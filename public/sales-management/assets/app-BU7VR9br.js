import{b as Oe,a as Y,o as i,c as m,d as e,e as A,r as w,f as C,u as z,g as y,w as $,T as U,h as T,F as I,i as V,j as a,t as l,v as E,P as S,D as W,k,n as L,_ as j,l as N,m as M,p as Ue,q as he,s as ae,x as Ee,y as P,z as me,A as ge,B as G,C as R,E as ze,G as re,H as K,I as q,J as Re,K as We,L as J,M as ne,N as Pe,O as qe,Q as fe,R as _e,S as He,U as Ge,V as Qe,W as Ze,X as ve,Y as Je,Z as Xe,$ as Ke,a0 as Ye,a1 as et,a2 as tt,a3 as st}from"./vendor-DVxmtyTD.js";window.bootstrap=Oe;let ot=document.head.querySelector('meta[name="csrf-token"]').content;Y.defaults.headers.common["X-CSRF-TOKEN"]=ot;Y.defaults.headers.common["X-Requested-With"]="XMLHttpRequest";window.axios=Y;const at="Dashboard",nt="List",lt="Edit",it="Delete",dt="Remove",rt="Name",ct="Description",ut="Count",pt="Speichern",ht="Stornieren",mt="Vorname",gt="Nachname",ft="Email",_t="Zurück",vt="USt-ID",bt="Anmerkungen",yt="Note",wt="Activities",xt="Profil",$t="Adresse",kt="Benutzer",Ct="Telefon",St="Firma",Ft="Kontakt",Nt="Website",Lt="PLZ",Bt="Stadt",Tt="Land",jt="Listen",At="Wählen",Dt="Von",Mt="Betreff",It="Nachricht",Vt="Leads",Ot="Stages",Ut={"Good day":"Guten Tag",Dashboard:at,"All Lists":"All Lists",List:nt,Edit:lt,Delete:it,Remove:dt,Name:rt,Description:ct,Count:ut,Save:pt,Cancel:ht,"Message Body":"Nachrichtentext",Firstname:mt,Lastname:gt,"Add message placeholders":"Nachrichtenplatzhalter hinzufügen",Email:ft,Back:_t,VAT:vt,Notes:bt,Note:yt,Activities:wt,Profile:xt,"Send E-Mail":"E-Mail senden",Address:$t,User:kt,"User ID":"Bentuzer ID","Job title":"Arbeit",Phone:Ct,Company:St,Contact:Ft,Website:Nt,ZIP:Lt,City:Bt,Country:Tt,"Contact Tags":"Kontakt Tags",Lists:jt,"Lead Tags":"Lead Tags",Select:At,From:Dt,Subject:Mt,"Enter subject":"Betreff eingeben",Message:It,"Send Message":"Nachricht senden",Leads:Vt,"Create New List":"Neue Liste erstellen",Stages:Ot,"Lead moved to another stage!":"Lead in neue Stage verschoben!","Search all stages":"Alle Stages durchsuchen","Search by name, email, company...":"Nach Name, E-Mail, Firma suchen...","Searching across all stages":"Suche über alle Stages","results found":"Ergebnisse gefunden","Clear search":"Suche löschen"},Et={class:"bg-light h-100 shadow-lg"},zt=A('<h5 class="sidebar-heading py-3 px-2"><span class="d-flex align-items-center justify-content-center fw-lighter text-center"><svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-move align-middle me-2"><polyline points="5 9 2 12 5 15"></polyline><polyline points="9 5 12 2 15 5"></polyline><polyline points="15 19 12 22 9 19"></polyline><polyline points="19 9 22 12 19 15"></polyline><line x1="2" y1="12" x2="22" y2="12"></line><line x1="12" y1="2" x2="12" y2="22"></line></svg>You can drag these nodes to the pane</span></h5>',1),Rt={class:"d-flex flex-column gap-2"},Wt={class:"d-flex flex-wrap gap-2 align-items-center my-3 px-4"},Pt=A('<span class="start-box px-3 justify-content-center"><span class="start-box__icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-flag"><path d="M4 15s1-1 4-1 5 2 8 2 4-1 4-1V3s-1 1-4 1-5-2-8-2-4 1-4 1z"></path><line x1="4" y1="22" x2="4" y2="15"></line></svg></span> Start </span>',1),qt=[Pt],Ht=A('<div class="bg-white shadow-sm px-3 py-2"><h6 class="mb-0"><span class="d-flex align-items-center"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-git-pull-request align-middle me-2"><circle cx="18" cy="18" r="3"></circle><circle cx="6" cy="6" r="3"></circle><path d="M13 6h3a2 2 0 0 1 2 2v7"></path><line x1="6" y1="9" x2="6" y2="21"></line></svg> Conditions</span></h6></div>',1),Gt={class:"d-flex flex-wrap gap-4 align-items-center my-3 px-4"},Qt=A('<span class="condition-box pe-2 justify-content-center"><span class="condition-box__icon"><span><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="feather feather-play-circle align-middle"><circle cx="12" cy="12" r="10"></circle><polygon points="10 8 16 12 10 16 10 8"></polygon></svg></span></span> On Run</span>',1),Zt=[Qt],Jt=A('<span class="condition-box pe-2 justify-content-end"><span class="condition-box__icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="feather feather-refresh-cw align-middle"><polyline points="23 4 23 10 17 10"></polyline><polyline points="1 20 1 14 7 14"></polyline><path d="M3.51 9a9 9 0 0 1 14.85-3.36L23 10M1 14l4.64 4.36A9 9 0 0 0 20.49 15"></path></svg></span> Stage Changed</span>',1),Xt=[Jt],Kt=A('<span class="condition-box pe-2 justify-content-end"><span class="condition-box__icon"><span><svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="20px" height="20px" viewBox="-10 -10 84 84" enable-background="new -10 -10 84 84" xml:space="preserve"><g><line fill="none" stroke="#FFFFFF" stroke-width="3" stroke-miterlimit="10" x1="36" y1="9" x2="45" y2="9"></line><line fill="none" stroke="#FFFFFF" stroke-width="3" stroke-miterlimit="10" x1="19" y1="17" x2="45" y2="17"></line><line fill="none" stroke="#FFFFFF" stroke-width="3" stroke-miterlimit="10" x1="19" y1="25" x2="45" y2="25"></line><g><polyline fill="none" stroke="#FFFFFF" stroke-width="3" stroke-miterlimit="10" points="1,26 32,45.434 63,26"></polyline><polyline fill="none" stroke="#FFFFFF" stroke-width="3" stroke-miterlimit="10" points="11.334,21.667 1,26 1,63 63,63 63,26 63,26 52.666,21.667"></polyline><polyline fill="none" stroke="#FFFFFF" stroke-width="3" stroke-miterlimit="10" points="11,32 11,1 53,1 53,32"></polyline></g></g></svg></span></span> Message Opened </span>',1),Yt=[Kt],es=A(`<span class="condition-box pe-2 justify-content-center"><span class="condition-box__icon"><svg version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 52.965 52.965" width="15" height="15" xml:space="preserve"><path style="fill:none;stroke:#FFFFFF;stroke-width:2;stroke-linecap:round;stroke-miterlimit:10;" d="M24.008,13.401L33.2,4.208
                                    c4.278-4.278,11.278-4.278,15.556,0l0,0c4.278,4.278,4.278,11.278,0,15.556L36.735,31.786c-4.278,4.278-11.278,4.278-15.556,0l0,0"></path><path style="fill:none;stroke:#FFFFFF;stroke-width:2;stroke-linecap:round;stroke-miterlimit:10;" d="M27.543,40.978l-7.778,7.778
                                    c-4.278,4.278-11.278,4.278-15.556,0l0,0c-4.278-4.278-4.278-11.278,0-15.556l11.314-11.314c4.278-4.278,11.278-4.278,15.556,0l0,0"></path><line style="fill:none;stroke:#FFFFFF;stroke-width:3;stroke-linecap:round;stroke-miterlimit:10;" x1="33.965" y1="45" x2="33.965" y2="51"></line><line style="fill:none;stroke:#FFFFFF;stroke-width:3;stroke-linecap:round;stroke-miterlimit:10;" x1="37.722" y1="43" x2="41.965" y2="47.243"></line><line style="fill:none;stroke:#FFFFFF;stroke-width:3;stroke-linecap:round;stroke-miterlimit:10;" x1="38.965" y1="39" x2="44.965" y2="39"></line><line style="fill:none;stroke:#FFFFFF;stroke-width:3;stroke-linecap:round;stroke-miterlimit:10;" x1="15.965" y1="10" x2="15.965" y2="4"></line><line style="fill:none;stroke:#FFFFFF;stroke-width:3;stroke-linecap:round;stroke-miterlimit:10;" x1="12.207" y1="12" x2="7.965" y2="7.757"></line><line style="fill:none;stroke:#FFFFFF;stroke-width:3;stroke-linecap:round;stroke-miterlimit:10;" x1="10.965" y1="16" x2="4.965" y2="16"></line></svg></span> Link Clicked </span>`,1),ts=[es],ss=A('<div class="bg-white shadow-sm px-3 py-2"><h6 class="mb-0"><span class="d-flex align-items-center"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-repeat align-middle me-2"><polyline points="17 1 21 5 17 9"></polyline><path d="M3 11V9a4 4 0 0 1 4-4h14"></path><polyline points="7 23 3 19 7 15"></polyline><path d="M21 13v2a4 4 0 0 1-4 4H3"></path></svg> Actions</span></h6></div>',1),os={class:"d-flex flex-wrap gap-4 align-items-center my-3 px-4"},as=A('<span class="action-box pe-2 justify-content-end"><span class="action-box__icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-mail align-middle"><path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"></path><polyline points="22,6 12,13 2,6"></polyline></svg></span> Send Message </span>',1),ns=[as],ls=A('<span class="action-box px-3 justify-content-center"><span class="action-box__icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-clock align-middle"><circle cx="12" cy="12" r="10"></circle><polyline points="12 6 12 12 16 14"></polyline></svg></span> Wait </span>',1),is=[ls],ds=A('<span class="action-box ps-2 justify-content-center"><span class="action-box__icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-tag align-middle"><path d="M20.59 13.41l-7.17 7.17a2 2 0 0 1-2.83 0L2 12V2h10l8.59 8.59a2 2 0 0 1 0 2.82z"></path><line x1="7" y1="7" x2="7.01" y2="7"></line></svg></span> Add Tag </span>',1),rs=[ds],cs=A('<span class="action-box ps-2 justify-content-center"><span class="action-box__icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-list align-middle"><line x1="8" y1="6" x2="21" y2="6"></line><line x1="8" y1="12" x2="21" y2="12"></line><line x1="8" y1="18" x2="21" y2="18"></line><line x1="3" y1="6" x2="3.01" y2="6"></line><line x1="3" y1="12" x2="3.01" y2="12"></line><line x1="3" y1="18" x2="3.01" y2="18"></line></svg></span> Move To List </span>',1),us=[cs],ps=A('<span class="action-box ps-2 justify-content-center"><span class="action-box__icon"><svg viewBox="0 0 24 24" width="20" height="20" stroke="currentColor" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round" class="css-i6dzq1"><rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect><line x1="8" y1="12" x2="16" y2="12"></line><line x1="12" y1="16" x2="12" y2="16"></line><line x1="12" y1="8" x2="12" y2="8"></line></svg></span> A/B Split </span>',1),hs=[ps],ms=A('<span class="action-box pe-2 justify-content-end"><span class="action-box__icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="feather feather-refresh-cw align-middle"><polyline points="23 4 23 10 17 10"></polyline><polyline points="1 20 1 14 7 14"></polyline><path d="M3.51 9a9 9 0 0 1 14.85-3.36L23 10M1 14l4.64 4.36A9 9 0 0 0 20.49 15"></path></svg></span> Change Stage</span>',1),gs=[ms],fs={__name:"Sidebar",setup(t){const d=(s,n,c)=>{s.dataTransfer&&(s.dataTransfer.setData("application/vueflow",n),s.dataTransfer.effectAllowed="move")};return(s,n)=>(i(),m("aside",Et,[zt,e("div",Rt,[e("div",Wt,[e("div",{class:"vue-flow__node-input shadow-sm",draggable:!0,onDragstart:n[0]||(n[0]=c=>d(c,"action.start"))},qt,32)]),Ht,e("div",Gt,[e("div",{class:"vue-flow__node-input shadow-sm",draggable:!0,onDragstart:n[1]||(n[1]=c=>d(c,"condition.run"))},Zt,32),e("div",{class:"vue-flow__node-input shadow-sm",draggable:!0,onDragstart:n[2]||(n[2]=c=>d(c,"condition.stage.changed"))},Xt,32),e("div",{class:"vue-flow__node-input shadow-sm",draggable:!0,onDragstart:n[3]||(n[3]=c=>d(c,"condition.message.opened"))},Yt,32),e("div",{class:"vue-flow__node-input shadow-sm",draggable:!0,onDragstart:n[4]||(n[4]=c=>d(c,"condition.link.clicked"))},ts,32)]),ss,e("div",os,[e("div",{class:"vue-flow__node-input shadow-sm",draggable:!0,onDragstart:n[5]||(n[5]=c=>d(c,"action.message.sent"))},ns,32),e("div",{class:"vue-flow__node-input shadow-sm",draggable:!0,onDragstart:n[6]||(n[6]=c=>d(c,"action.wait"))},is,32),e("div",{class:"vue-flow__node-input shadow-sm",draggable:!0,onDragstart:n[7]||(n[7]=c=>d(c,"action.add.tag"))},rs,32),e("div",{class:"vue-flow__node-input shadow-sm",draggable:!0,onDragstart:n[8]||(n[8]=c=>d(c,"action.move.to.list"))},us,32),e("div",{class:"vue-flow__node-input shadow-sm",draggable:!0,onDragstart:n[9]||(n[9]=c=>d(c,"action.ab.split"))},hs,32),e("div",{class:"vue-flow__node-input shadow-sm",draggable:!0,onDragstart:n[10]||(n[10]=c=>d(c,"action.change.stage"))},gs,32)])])]))}},_s={class:"vue-flow__node-input shadow-sm",style:{"min-width":"150px",width:"100%","padding-left":"2rem","padding-right":"2rem"}},vs={class:"bg-white p-3 rounded-3"},bs=e("h5",{class:"mb-3"},[e("span",{class:"d-flex align-items-center"},[e("i",{class:"align-middle me-1 fas fa-fw fa-cogs"}),k("Node Properties")])],-1),ys={class:"mb-3"},ws=e("label",{for:"argument",class:"form-label",style:{"font-size":"12px"}},"Choose Stage",-1),xs=["value"],$s={class:"d-flex justify-content-end"},ks=e("span",{class:"d-flex align-items-center"},[e("i",{class:"align-middle me-1 fas fa-fw fa-trash"}),k("Delete Node ")],-1),Cs=[ks],Ss={class:"condition-box"},Fs=A('<span class="condition-box__icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="feather feather-refresh-cw align-middle"><polyline points="23 4 23 10 17 10"></polyline><polyline points="1 20 1 14 7 14"></polyline><path d="M3.51 9a9 9 0 0 1 14.85-3.36L23 10M1 14l4.64 4.36A9 9 0 0 0 20.49 15"></path></svg></span>',1),Ns=e("span",{class:"circle"},null,-1),Ls=e("span",{class:"circle"},null,-1),be={__name:"StageChanged",props:{id:String,label:String,type:String},setup(t){const d=t,s=w(!1),n=C(()=>({backgroundColor:"white",borderColor:"#dcdbdb",borderStyle:"solid",borderWidth:"1px",width:"14px",height:"14px",top:"-7px"})),c=C(()=>({backgroundColor:"white",borderColor:"#dcdbdb",borderStyle:"solid",borderWidth:"1px",width:"14px",height:"14px",bottom:"-7px"}));let f=window.stages;const{findNode:p,onNodeClick:o,removeNodes:g,onPaneClick:v}=z(),_=w(p(d.id));o(u=>{u.event.target.classList.contains("handle")||u.node.id===_.value.id&&(s.value=!s.value)}),v(()=>{s.value=!1});const b=u=>{g([u],!0),window.notyf.open({type:"success",message:"Node successfully deleted!",duration:"3000",ripple:!0,dismissible:!0})};return(u,h)=>(i(),m("div",_s,[y(a(W),{style:{display:"flex",gap:"0.5rem","align-items":"center"},"is-visible":s.value,"node-id":t.id,position:a(S).Right},{default:$(()=>[y(U,{mode:"in-out",appear:""},{default:$(()=>[e("div",vs,[bs,e("div",ys,[ws,T(e("select",{name:"argument",class:"form-select form-select-sm","onUpdate:modelValue":h[0]||(h[0]=r=>_.value.data=r),id:"argument"},[(i(!0),m(I,null,V(a(f),r=>(i(),m("option",{value:r},l(r.title),9,xs))),256))],512),[[E,_.value.data]])]),e("div",$s,[e("button",{class:"btn btn-danger btn-sm rounded-2",onClick:h[1]||(h[1]=r=>b(_.value))},Cs)])])]),_:1})]),_:1},8,["is-visible","node-id","position"]),e("span",Ss,[Fs,k(" "+l(_.value.data.title??"Stage Changed"),1)]),y(a(j),{id:`state.stage.changed.target.${t.id}`,type:"target",position:a(S).Top,style:L(n.value),class:"handle"},{default:$(()=>[Ns]),_:1},8,["id","position","style"]),y(a(j),{id:`state.stage.changed.${t.id}`,type:"source",position:a(S).Bottom,style:L(c.value),class:"handle"},{default:$(()=>[Ls]),_:1},8,["id","position","style"])]))}},Bs={class:"vue-flow__node-input shadow-sm",style:{"min-width":"150px",width:"100%","padding-left":"2rem","padding-right":"2rem"}},Ts={class:"bg-white p-3 rounded-3"},js=e("h5",{class:"mb-3"},[e("span",{class:"d-flex align-items-center"},[e("i",{class:"align-middle me-1 fas fa-fw fa-cogs"}),k("Node Properties")])],-1),As={class:"mb-3"},Ds=e("label",{for:"argument",class:"form-label",style:{"font-size":"12px"}},"Choose Message",-1),Ms=["value"],Is={class:"d-flex justify-content-end"},Vs=e("span",{class:"d-flex align-items-center"},[e("i",{class:"align-middle me-1 fas fa-fw fa-trash"}),k("Delete Node ")],-1),Os=[Vs],Us={class:"action-box ps-1"},Es=e("span",{class:"action-box__icon"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"feather feather-mail align-middle"},[e("path",{d:"M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"}),e("polyline",{points:"22,6 12,13 2,6"})])],-1),zs=e("span",{class:"circle"},null,-1),Rs=e("span",{class:"circle"},null,-1),ye={__name:"SendMessage",props:{id:String,label:String,type:String},setup(t){const d=t,s=w(!1),n=C(()=>({backgroundColor:"white",borderColor:"#dcdbdb",borderStyle:"solid",borderWidth:"1px",width:"14px",height:"14px",top:"-7px"})),c=C(()=>({backgroundColor:"white",borderColor:"#dcdbdb",borderStyle:"solid",borderWidth:"1px",width:"14px",height:"14px",bottom:"-7px"}));let f=window.messages;const{findNode:p,onNodeClick:o,removeNodes:g,onPaneClick:v}=z(),_=w(p(d.id));o(u=>{u.event.target.classList.contains("handle")||u.node.id===_.value.id&&(s.value=!s.value)}),v(()=>{s.value=!1});const b=u=>{g([u],!0),window.notyf.open({type:"success",message:"Node successfully deleted!",duration:"3000",ripple:!0,dismissible:!0})};return(u,h)=>(i(),m("div",Bs,[y(a(W),{style:{display:"flex",gap:"0.5rem","align-items":"center"},"is-visible":s.value,"node-id":t.id,position:a(S).Right},{default:$(()=>[y(U,{mode:"in-out",appear:""},{default:$(()=>[e("div",Ts,[js,e("div",As,[Ds,T(e("select",{name:"argument",class:"form-select","onUpdate:modelValue":h[0]||(h[0]=r=>_.value.data=r)},[(i(!0),m(I,null,V(a(f),r=>(i(),m("option",{value:r},l(r.title),9,Ms))),256))],512),[[E,_.value.data]])]),e("div",Is,[e("button",{class:"btn btn-danger btn-sm rounded-2",onClick:h[1]||(h[1]=r=>b(_.value))},Os)])])]),_:1})]),_:1},8,["is-visible","node-id","position"]),e("span",Us,[Es,k(" "+l(_.value.data.title??"Send Message"),1)]),y(a(j),{id:`state.message.sent.${t.id}`,type:"source",position:a(S).Bottom,style:L(c.value),class:"handle"},{default:$(()=>[zs]),_:1},8,["id","position","style"]),y(a(j),{id:`state.message.sent.target.${t.id}`,type:"target",position:a(S).Top,style:L(n.value),class:"handle"},{default:$(()=>[Rs]),_:1},8,["id","position","style"])]))}},Ws={class:"vue-flow__node-input shadow-sm",style:{"min-width":"150px",width:"100%","padding-left":"2rem","padding-right":"2rem"}},Ps={class:"bg-white p-3 rounded-3"},qs=e("h5",{class:"mb-3"},[e("span",{class:"d-flex align-items-center"},[e("i",{class:"align-middle me-1 fas fa-fw fa-cogs"}),k("Node Properties")])],-1),Hs={class:"mb-3"},Gs=e("label",{for:"argument",class:"form-label",style:{"font-size":"12px"}},"Choose Wait Time",-1),Qs=["value"],Zs={class:"d-flex justify-content-end"},Js=e("span",{class:"d-flex align-items-center"},[e("i",{class:"align-middle me-1 fas fa-fw fa-trash"}),k("Delete Node ")],-1),Xs=[Js],Ks={class:"action-box ps-1"},Ys=e("span",{class:"action-box__icon"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"feather feather-clock align-middle"},[e("circle",{cx:"12",cy:"12",r:"10"}),e("polyline",{points:"12 6 12 12 16 14"})])],-1),eo=e("span",{class:"circle"},null,-1),to=e("span",{class:"circle"},null,-1),we={__name:"Wait",props:{id:String,label:String,type:String},setup(t){const d=t,s=w(!1),n=C(()=>({backgroundColor:"white",borderColor:"#dcdbdb",borderStyle:"solid",borderWidth:"1px",width:"14px",height:"14px",top:"-7px"})),c=C(()=>({backgroundColor:"white",borderColor:"#dcdbdb",borderStyle:"solid",borderWidth:"1px",width:"14px",height:"14px",bottom:"-7px"}));let f=window.waitOptions;const{findNode:p,onNodeClick:o,removeNodes:g,onPaneClick:v}=z(),_=w(p(d.id));o(u=>{u.event.target.classList.contains("handle")||u.node.id===_.value.id&&(s.value=!s.value)});const b=u=>{g([u],!0),window.notyf.open({type:"success",message:"Node successfully deleted!",duration:"3000",ripple:!0,dismissible:!0})};return v(()=>{s.value=!1}),(u,h)=>(i(),m("div",Ws,[y(a(W),{style:{display:"flex",gap:"0.5rem","align-items":"center"},"is-visible":s.value,"node-id":t.id,position:a(S).Right},{default:$(()=>[y(U,{mode:"in-out",appear:""},{default:$(()=>[e("div",Ps,[qs,e("div",Hs,[Gs,T(e("select",{name:"argument",class:"form-select","onUpdate:modelValue":h[0]||(h[0]=r=>_.value.data=r)},[(i(!0),m(I,null,V(a(f),r=>(i(),m("option",{value:r},l(r.title),9,Qs))),256))],512),[[E,_.value.data]])]),e("div",Zs,[e("button",{class:"btn btn-danger btn-sm rounded-2",onClick:h[1]||(h[1]=r=>b(_.value))},Xs)])])]),_:1})]),_:1},8,["is-visible","node-id","position"]),e("span",Ks,[Ys,k(" Wait "+l(_.value.data.title??""),1)]),y(a(j),{id:`state.wait.target.${t.id}`,type:"target",position:a(S).Top,style:L(n.value),class:"handle"},{default:$(()=>[eo]),_:1},8,["id","position","style"]),y(a(j),{id:`state.wait.${t.id}`,type:"source",position:a(S).Bottom,style:L(c.value),class:"handle"},{default:$(()=>[to]),_:1},8,["id","position","style"])]))}},so={class:"bg-white p-3 rounded-3"},oo=e("h5",{class:"mb-3"},[e("span",{class:"d-flex align-items-center"},[e("i",{class:"align-middle me-1 fas fa-fw fa-cogs"}),k("Node Properties")])],-1),ao={class:"d-flex justify-content-end"},no=e("span",{class:"d-flex align-items-center"},[e("i",{class:"align-middle me-1 fas fa-fw fa-trash"}),k("Delete Node ")],-1),lo=[no],io=A('<span class="start-box pe-2 justify-content-center"><span class="start-box__icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-flag"><path d="M4 15s1-1 4-1 5 2 8 2 4-1 4-1V3s-1 1-4 1-5-2-8-2-4 1-4 1z"></path><line x1="4" y1="22" x2="4" y2="15"></line></svg></span> Start </span>',1),ro=e("span",{class:"circle"},null,-1),xe={__name:"Start",props:{id:String,label:String,type:String},setup(t){const d=t,s=w(!1),n=w(),c=w(),f=C(()=>({backgroundColor:"white",borderColor:"#dcdbdb",borderStyle:"solid",borderWidth:"1px",width:"14px",height:"14px",bottom:"-6px"})),{findNode:p,onNodeClick:o,removeNodes:g,onPaneClick:v}=z(),_=w(p(d.id));o(u=>{u.event.target.classList.contains("handle")||u.node.id===_.value.id&&(s.value=!s.value)}),v(()=>{s.value=!1});const b=u=>{g([u],!0),window.notyf.open({type:"success",message:"Node successfully deleted!",duration:"3000",ripple:!0,dismissible:!0})};return(u,h)=>(i(),m("div",{class:"vue-flow__node-input shadow-sm",ref_key:"nodeWrapper",ref:n},[y(a(W),{ref_key:"nodeToolbar",ref:c,style:{display:"flex",gap:"0.5rem","align-items":"center"},"is-visible":s.value,"node-id":t.id,position:a(S).Right},{default:$(()=>[y(U,{mode:"in-out",appear:""},{default:$(()=>[e("div",so,[oo,e("div",ao,[e("button",{class:"btn btn-danger btn-sm rounded-2",onClick:h[0]||(h[0]=r=>b(_.value))},lo)])])]),_:1})]),_:1},8,["is-visible","node-id","position"]),io,y(a(j),{id:"start",type:"source",position:a(S).Bottom,style:L(f.value),class:"handle"},{default:$(()=>[ro]),_:1},8,["position","style"])],512))}},co={class:"vue-flow__node-input shadow-sm",style:{"min-width":"150px",width:"100%","padding-left":"2rem","padding-right":"2rem"}},uo={class:"bg-white p-3 rounded-3"},po=e("h5",{class:"mb-3"},[e("span",{class:"d-flex align-items-center"},[e("i",{class:"align-middle me-1 fas fa-fw fa-cogs"}),k("Node Properties")])],-1),ho={class:"mb-3"},mo=e("label",{for:"argument",class:"form-label",style:{"font-size":"12px"}},"Choose Tag",-1),go=["value"],fo={class:"d-flex justify-content-end"},_o=e("span",{class:"d-flex align-items-center"},[e("i",{class:"align-middle me-1 fas fa-fw fa-trash"}),k("Delete Node ")],-1),vo=[_o],bo={class:"action-box ps-1"},yo=e("span",{class:"action-box__icon"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"feather feather-tag align-middle"},[e("path",{d:"M20.59 13.41l-7.17 7.17a2 2 0 0 1-2.83 0L2 12V2h10l8.59 8.59a2 2 0 0 1 0 2.82z"}),e("line",{x1:"7",y1:"7",x2:"7.01",y2:"7"})])],-1),wo=e("span",{class:"circle"},null,-1),xo=e("span",{class:"circle"},null,-1),$e={__name:"AddTag",props:{id:String,label:String,type:String},setup(t){const d=t,s=w(!1),n=C(()=>({backgroundColor:"white",borderColor:"#dcdbdb",borderStyle:"solid",borderWidth:"1px",width:"14px",height:"14px",top:"-7px"})),c=C(()=>({backgroundColor:"white",borderColor:"#dcdbdb",borderStyle:"solid",borderWidth:"1px",width:"14px",height:"14px",bottom:"-7px"}));let f=window.tags;const{findNode:p,onNodeClick:o,removeNodes:g,onPaneClick:v}=z(),_=w(p(d.id));o(u=>{u.event.target.classList.contains("handle")||u.node.id===_.value.id&&(s.value=!s.value)}),v(()=>{s.value=!1});const b=u=>{g([u],!0),window.notyf.open({type:"success",message:"Node successfully deleted!",duration:"3000",ripple:!0,dismissible:!0})};return(u,h)=>(i(),m("div",co,[y(a(W),{style:{display:"flex",gap:"0.5rem","align-items":"center"},"is-visible":s.value,"node-id":t.id,position:a(S).Right},{default:$(()=>[y(U,{mode:"in-out",appear:""},{default:$(()=>[e("div",uo,[po,e("div",ho,[mo,T(e("select",{name:"argument",class:"form-select","onUpdate:modelValue":h[0]||(h[0]=r=>_.value.data=r)},[(i(!0),m(I,null,V(a(f),r=>(i(),m("option",{value:r},l(r.title),9,go))),256))],512),[[E,_.value.data]])]),e("div",fo,[e("button",{class:"btn btn-danger btn-sm rounded-2",onClick:h[1]||(h[1]=r=>b(_.value))},vo)])])]),_:1})]),_:1},8,["is-visible","node-id","position"]),e("span",bo,[yo,k(" "+l(_.value.data.title??"Add Tag"),1)]),y(a(j),{id:`state.tag.add.${t.id}`,type:"source",position:a(S).Bottom,style:L(c.value),class:"handle"},{default:$(()=>[wo]),_:1},8,["id","position","style"]),y(a(j),{id:`state.tag.add.target.${t.id}`,type:"target",position:a(S).Top,style:L(n.value),class:"handle"},{default:$(()=>[xo]),_:1},8,["id","position","style"])]))}},$o={class:"vue-flow__node-input shadow-sm",style:{"min-width":"150px",width:"100%","padding-left":"2rem","padding-right":"2rem"}},ko={class:"bg-white p-3 rounded-3"},Co=e("h5",{class:"mb-3"},[e("span",{class:"d-flex align-items-center"},[e("i",{class:"align-middle me-1 fas fa-fw fa-cogs"}),k("Node Properties")])],-1),So={class:"mb-3"},Fo=e("label",{for:"argument",class:"form-label",style:{"font-size":"12px"}},"Choose Message",-1),No=["value"],Lo={class:"d-flex justify-content-end"},Bo=e("span",{class:"d-flex align-items-center"},[e("i",{class:"align-middle me-1 fas fa-fw fa-trash"}),k("Delete Node ")],-1),To=[Bo],jo={class:"condition-box"},Ao=A('<span class="condition-box__icon"><span><svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="20px" height="20px" viewBox="-10 -10 84 84" enable-background="new -10 -10 84 84" xml:space="preserve"><g><line fill="none" stroke="#FFFFFF" stroke-width="3" stroke-miterlimit="10" x1="36" y1="9" x2="45" y2="9"></line><line fill="none" stroke="#FFFFFF" stroke-width="3" stroke-miterlimit="10" x1="19" y1="17" x2="45" y2="17"></line><line fill="none" stroke="#FFFFFF" stroke-width="3" stroke-miterlimit="10" x1="19" y1="25" x2="45" y2="25"></line><g><polyline fill="none" stroke="#FFFFFF" stroke-width="3" stroke-miterlimit="10" points="1,26 32,45.434 63,26"></polyline><polyline fill="none" stroke="#FFFFFF" stroke-width="3" stroke-miterlimit="10" points="11.334,21.667 1,26 1,63 63,63 63,26 63,26 52.666,21.667"></polyline><polyline fill="none" stroke="#FFFFFF" stroke-width="3" stroke-miterlimit="10" points="11,32 11,1 53,1 53,32"></polyline></g></g></svg></span></span>',1),Do=e("span",{class:"circle"},null,-1),Mo=e("svg",{width:"10",height:"10",fill:"none",viewBox:"0 0 24 24","stroke-width":"2",stroke:"white"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M4.5 12.75l6 6 9-13.5"})],-1),Io=e("svg",{width:"10",height:"10",fill:"none",viewBox:"0 0 24 24","stroke-width":"2",stroke:"white"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6 18L18 6M6 6l12 12"})],-1),ke={__name:"MessageOpened",props:{id:String,label:String,type:String},setup(t){const d=t,s=w(!1),n=C(()=>({backgroundColor:"green",left:"48px",width:"14px",height:"14px",right:"auto",bottom:"-7px"})),c=C(()=>({backgroundColor:"red",width:"14px",height:"14px",right:"40px",left:"auto",bottom:"-7px"})),f=C(()=>({backgroundColor:"white",borderColor:"#dcdbdb",borderStyle:"solid",borderWidth:"1px",width:"14px",height:"14px",top:"-6px"}));let p=window.messagesOpened;const{findNode:o,onNodeClick:g,removeNodes:v,onPaneClick:_}=z(),b=w(o(d.id));g(h=>{h.event.target.classList.contains("handle")||h.node.id===b.value.id&&(s.value=!s.value)}),_(()=>{s.value=!1});const u=h=>{v([h],!0),window.notyf.open({type:"success",message:"Node successfully deleted!",duration:"3000",ripple:!0,dismissible:!0})};return(h,r)=>(i(),m("div",$o,[y(a(W),{style:{display:"flex",gap:"0.5rem","align-items":"center"},"is-visible":s.value,"node-id":t.id,position:a(S).Right},{default:$(()=>[y(U,{mode:"in-out",appear:""},{default:$(()=>[e("div",ko,[Co,e("div",So,[Fo,T(e("select",{name:"argument",class:"form-select form-select-sm","onUpdate:modelValue":r[0]||(r[0]=x=>b.value.data=x),id:"argument"},[(i(!0),m(I,null,V(a(p),x=>(i(),m("option",{value:x},l(x.title),9,No))),256))],512),[[E,b.value.data]])]),e("div",Lo,[e("button",{class:"btn btn-danger btn-sm rounded-2",onClick:r[1]||(r[1]=x=>u(b.value))},To)])])]),_:1})]),_:1},8,["is-visible","node-id","position"]),e("span",jo,[Ao,k(" "+l(b.value.data.title??"Message Opened"),1)]),y(a(j),{id:`state.message.opened.target.${t.id}`,type:"target",position:a(S).Top,style:L(f.value),class:"handle"},{default:$(()=>[Do]),_:1},8,["id","position","style"]),y(a(j),{id:`state.message.opened.${t.id}`,type:"source",position:a(S).Bottom,style:L(n.value),class:"handle"},{default:$(()=>[Mo]),_:1},8,["id","position","style"]),y(a(j),{id:`state.message.not_opened.${t.id}`,type:"source",position:a(S).Bottom,style:L(c.value),class:"handle"},{default:$(()=>[Io]),_:1},8,["id","position","style"])]))}},Vo={class:"vue-flow__node-input shadow-sm",style:{"min-width":"150px",width:"100%","padding-left":"2rem","padding-right":"2rem"}},Oo={class:"bg-white p-3 rounded-3"},Uo=e("h5",{class:"mb-3"},[e("span",{class:"d-flex align-items-center"},[e("i",{class:"align-middle me-1 fas fa-fw fa-cogs"}),k("Node Properties")])],-1),Eo={class:"mb-3"},zo=e("label",{for:"argument",class:"form-label",style:{"font-size":"12px"}},"Choose List",-1),Ro=["value"],Wo={class:"d-flex justify-content-end"},Po=e("span",{class:"d-flex align-items-center"},[e("i",{class:"align-middle me-1 fas fa-fw fa-trash"}),k("Delete Node ")],-1),qo=[Po],Ho={class:"action-box ps-1"},Go=A('<span class="action-box__icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-list align-middle"><line x1="8" y1="6" x2="21" y2="6"></line><line x1="8" y1="12" x2="21" y2="12"></line><line x1="8" y1="18" x2="21" y2="18"></line><line x1="3" y1="6" x2="3.01" y2="6"></line><line x1="3" y1="12" x2="3.01" y2="12"></line><line x1="3" y1="18" x2="3.01" y2="18"></line></svg></span>',1),Qo=e("span",{class:"circle"},null,-1),Zo=e("span",{class:"circle"},null,-1),Ce={__name:"MoveToList",props:{id:String,label:String,type:String},setup(t){const d=t,s=w(!1),n=C(()=>({backgroundColor:"white",borderColor:"#dcdbdb",borderStyle:"solid",borderWidth:"1px",width:"14px",height:"14px",top:"-7px"})),c=C(()=>({backgroundColor:"white",borderColor:"#dcdbdb",borderStyle:"solid",borderWidth:"1px",width:"14px",height:"14px",bottom:"-7px"}));let f=window.contactLists;const{findNode:p,onNodeClick:o,removeNodes:g,onPaneClick:v}=z(),_=w(p(d.id));o(u=>{u.event.target.classList.contains("handle")||u.node.id===_.value.id&&(s.value=!s.value)}),v(()=>{s.value=!1});const b=u=>{g([u],!0),window.notyf.open({type:"success",message:"Node successfully deleted!",duration:"3000",ripple:!0,dismissible:!0})};return(u,h)=>(i(),m("div",Vo,[y(a(W),{style:{display:"flex",gap:"0.5rem","align-items":"center"},"is-visible":s.value,"node-id":t.id,position:a(S).Right},{default:$(()=>[y(U,{mode:"in-out",appear:""},{default:$(()=>[e("div",Oo,[Uo,e("div",Eo,[zo,T(e("select",{name:"argument",class:"form-select","onUpdate:modelValue":h[0]||(h[0]=r=>_.value.data=r)},[(i(!0),m(I,null,V(a(f),r=>(i(),m("option",{value:r},l(r.title),9,Ro))),256))],512),[[E,_.value.data]])]),e("div",Wo,[e("button",{class:"btn btn-danger btn-sm rounded-2",onClick:h[1]||(h[1]=r=>b(_.value))},qo)])])]),_:1})]),_:1},8,["is-visible","node-id","position"]),e("span",Ho,[Go,k(" "+l(_.value.data.title??"Move To List"),1)]),y(a(j),{id:`state.move_to_list.${t.id}`,type:"source",position:a(S).Bottom,style:L(c.value),class:"handle"},{default:$(()=>[Qo]),_:1},8,["id","position","style"]),y(a(j),{id:`state.move_to_list.target.${t.id}`,type:"target",position:a(S).Top,style:L(n.value),class:"handle"},{default:$(()=>[Zo]),_:1},8,["id","position","style"])]))}},Jo={class:"vue-flow__node-input shadow-sm",style:{"min-width":"150px",width:"100%","padding-left":"2rem","padding-right":"2rem"}},Xo={class:"bg-white p-3 rounded-3"},Ko=e("h5",{class:"mb-3"},[e("span",{class:"d-flex align-items-center"},[e("i",{class:"align-middle me-1 fas fa-fw fa-cogs"}),k("Node Properties")])],-1),Yo={class:"mb-3"},ea=e("label",{for:"argument",class:"form-label",style:{"font-size":"12px"}},"Choose split",-1),ta=["value"],sa={class:"d-flex justify-content-end"},oa=e("span",{class:"d-flex align-items-center"},[e("i",{class:"align-middle me-1 fas fa-fw fa-trash"}),k("Delete Node ")],-1),aa=[oa],na={class:"action-box ps-1"},la=A('<span class="action-box__icon"><svg viewBox="0 0 24 24" width="20" height="20" stroke="currentColor" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round" class="css-i6dzq1"><rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect><line x1="8" y1="12" x2="16" y2="12"></line><line x1="12" y1="16" x2="12" y2="16"></line><line x1="12" y1="8" x2="12" y2="8"></line></svg></span>',1),ia=e("span",{class:"circle"},null,-1),da=e("span",{class:"circle"},null,-1),ra=e("span",{class:"circle"},null,-1),Se={__name:"ABSplit",props:{id:String,label:String,type:String},setup(t){const d=t,s=w(!1),n=C(()=>({backgroundColor:"white",borderColor:"#dcdbdb",borderStyle:"solid",borderWidth:"1px",width:"14px",height:"14px",top:"-7px"})),c=C(()=>({backgroundColor:"white",borderColor:"#dcdbdb",borderStyle:"solid",borderWidth:"1px",width:"14px",height:"14px",left:"48px",right:"auto",bottom:"-7px"})),f=C(()=>({backgroundColor:"white",borderColor:"#dcdbdb",borderStyle:"solid",borderWidth:"1px",width:"14px",height:"14px",right:"40px",left:"auto",bottom:"-7px"}));let p=window.abSplit;const{findNode:o,onNodeClick:g,removeNodes:v,onPaneClick:_}=z(),b=w(o(d.id));g(h=>{h.event.target.classList.contains("handle")||h.node.id===b.value.id&&(s.value=!s.value)}),_(()=>{s.value=!1});const u=h=>{v([h],!0),window.notyf.open({type:"success",message:"Node successfully deleted!",duration:"3000",ripple:!0,dismissible:!0})};return(h,r)=>(i(),m("div",Jo,[y(a(W),{style:{display:"flex",gap:"0.5rem","align-items":"center"},"is-visible":s.value,"node-id":t.id,position:a(S).Right},{default:$(()=>[y(U,{mode:"in-out",appear:""},{default:$(()=>[e("div",Xo,[Ko,e("div",Yo,[ea,T(e("select",{name:"argument",class:"form-select","onUpdate:modelValue":r[0]||(r[0]=x=>b.value.data=x)},[(i(!0),m(I,null,V(a(p),x=>(i(),m("option",{value:x},l(x.title),9,ta))),256))],512),[[E,b.value.data]])]),e("div",sa,[e("button",{class:"btn btn-danger btn-sm rounded-2",onClick:r[1]||(r[1]=x=>u(b.value))},aa)])])]),_:1})]),_:1},8,["is-visible","node-id","position"]),e("span",na,[la,k(" "+l(b.value.data.title??"A/B Split"),1)]),y(a(j),{id:`state.abSplit.target.${t.id}`,type:"target",position:a(S).Top,style:L(n.value),class:"handle"},{default:$(()=>[ia]),_:1},8,["id","position","style"]),y(a(j),{id:`state.abSplit.left.${t.id}`,type:"source",position:a(S).Bottom,style:L(c.value),class:"handle"},{default:$(()=>[da]),_:1},8,["id","position","style"]),y(a(j),{id:`state.abSplit.right.${t.id}`,type:"source",position:a(S).Bottom,style:L(f.value),class:"handle"},{default:$(()=>[ra]),_:1},8,["id","position","style"])]))}},ca={class:"vue-flow__node-input shadow-sm",style:{"min-width":"150px",width:"100%","padding-left":"2rem","padding-right":"2rem"}},ua={class:"bg-white p-3 rounded-3"},pa=e("h5",{class:"mb-3"},[e("span",{class:"d-flex align-items-center"},[e("i",{class:"align-middle me-1 fas fa-fw fa-cogs"}),k("Node Properties")])],-1),ha={class:"d-flex justify-content-end"},ma=e("span",{class:"d-flex align-items-center"},[e("i",{class:"align-middle me-1 fas fa-fw fa-trash"}),k("Delete Node ")],-1),ga=[ma],fa={class:"condition-box"},_a=e("span",{class:"condition-box__icon"},[e("span",null,[e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"1","stroke-linecap":"round","stroke-linejoin":"round",class:"feather feather-play-circle align-middle"},[e("circle",{cx:"12",cy:"12",r:"10"}),e("polygon",{points:"10 8 16 12 10 16 10 8"})])])],-1),va=e("span",{class:"circle"},null,-1),ba=e("span",{class:"circle"},null,-1),Fe={__name:"Run",props:{id:String,label:String,type:String},setup(t){const d=t,s=w(!1),n=C(()=>({backgroundColor:"white",borderColor:"#dcdbdb",borderStyle:"solid",borderWidth:"1px",width:"14px",height:"14px",top:"-7px"})),c=C(()=>({backgroundColor:"white",borderColor:"#dcdbdb",borderStyle:"solid",borderWidth:"1px",width:"14px",height:"14px",bottom:"-7px"})),{findNode:f,onNodeClick:p,removeNodes:o,onPaneClick:g}=z(),v=w(f(d.id));v.value.data={argument:window.workflowId},p(b=>{b.event.target.classList.contains("handle")||b.node.id===v.value.id&&(s.value=!s.value)}),g(()=>{s.value=!1});const _=b=>{o([b],!0),window.notyf.open({type:"success",message:"Node successfully deleted!",duration:"3000",ripple:!0,dismissible:!0})};return(b,u)=>(i(),m("div",ca,[y(a(W),{style:{display:"flex",gap:"0.5rem","align-items":"center"},"is-visible":s.value,"node-id":t.id,position:a(S).Right},{default:$(()=>[y(U,{mode:"in-out",appear:""},{default:$(()=>[e("div",ua,[pa,e("div",ha,[e("button",{class:"btn btn-danger btn-sm rounded-2",onClick:u[0]||(u[0]=h=>_(v.value))},ga)])])]),_:1})]),_:1},8,["is-visible","node-id","position"]),e("span",fa,[_a,k(" "+l(v.value.data.title??"On Run"),1)]),y(a(j),{id:`state.run.target.${t.id}`,type:"target",position:a(S).Top,style:L(n.value),class:"handle"},{default:$(()=>[va]),_:1},8,["id","position","style"]),y(a(j),{id:`state.run.${t.id}`,type:"source",position:a(S).Bottom,style:L(c.value),class:"handle"},{default:$(()=>[ba]),_:1},8,["id","position","style"])]))}},ya={class:"vue-flow__node-input shadow-sm",style:{"min-width":"150px",width:"100%","padding-left":"2rem","padding-right":"2rem"}},wa={class:"bg-white p-3 rounded-3"},xa=e("h5",{class:"mb-3"},[e("span",{class:"d-flex align-items-center"},[e("i",{class:"align-middle me-1 fas fa-fw fa-cogs"}),k("Node Properties")])],-1),$a={class:"mb-3"},ka=e("label",{for:"argument",class:"form-label",style:{"font-size":"12px"}},"Choose Stage",-1),Ca=["value"],Sa={class:"d-flex justify-content-end"},Fa=e("span",{class:"d-flex align-items-center"},[e("i",{class:"align-middle me-1 fas fa-fw fa-trash"}),k("Delete Node ")],-1),Na=[Fa],La={class:"action-box ps-1"},Ba=A('<span class="action-box__icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="feather feather-refresh-cw align-middle"><polyline points="23 4 23 10 17 10"></polyline><polyline points="1 20 1 14 7 14"></polyline><path d="M3.51 9a9 9 0 0 1 14.85-3.36L23 10M1 14l4.64 4.36A9 9 0 0 0 20.49 15"></path></svg></span>',1),Ta=e("span",{class:"circle"},null,-1),ja=e("span",{class:"circle"},null,-1),Ne={__name:"ChangeStage",props:{id:String,label:String,type:String},setup(t){const d=t,s=w(!1),n=C(()=>({backgroundColor:"white",borderColor:"#dcdbdb",borderStyle:"solid",borderWidth:"1px",width:"14px",height:"14px",top:"-7px"})),c=C(()=>({backgroundColor:"white",borderColor:"#dcdbdb",borderStyle:"solid",borderWidth:"1px",width:"14px",height:"14px",bottom:"-7px"}));let f=window.stageActions;const{findNode:p,onNodeClick:o,removeNodes:g,onPaneClick:v}=z(),_=w(p(d.id));o(u=>{u.event.target.classList.contains("handle")||u.node.id===_.value.id&&(s.value=!s.value)}),v(()=>{s.value=!1});const b=u=>{g([u],!0),window.notyf.open({type:"success",message:"Node successfully deleted!",duration:"3000",ripple:!0,dismissible:!0})};return(u,h)=>(i(),m("div",ya,[y(a(W),{style:{display:"flex",gap:"0.5rem","align-items":"center"},"is-visible":s.value,"node-id":t.id,position:a(S).Right},{default:$(()=>[y(U,{mode:"in-out",appear:""},{default:$(()=>[e("div",wa,[xa,e("div",$a,[ka,T(e("select",{name:"argument",class:"form-select","onUpdate:modelValue":h[0]||(h[0]=r=>_.value.data=r)},[(i(!0),m(I,null,V(a(f),r=>(i(),m("option",{value:r},l(r.title),9,Ca))),256))],512),[[E,_.value.data]])]),e("div",Sa,[e("button",{class:"btn btn-danger btn-sm rounded-2",onClick:h[1]||(h[1]=r=>b(_.value))},Na)])])]),_:1})]),_:1},8,["is-visible","node-id","position"]),e("span",La,[Ba,k(" "+l(_.value.data.title??"Change Stage"),1)]),y(a(j),{id:`state.change.stage.target.${t.id}`,type:"target",position:a(S).Top,style:L(n.value),class:"handle"},{default:$(()=>[Ta]),_:1},8,["id","position","style"]),y(a(j),{id:`state.change.stage.${t.id}`,type:"source",position:a(S).Bottom,style:L(c.value),class:"handle"},{default:$(()=>[ja]),_:1},8,["id","position","style"])]))}},Aa={class:"vue-flow__node-input shadow-sm",style:{"min-width":"150px",width:"100%","padding-left":"2rem","padding-right":"2rem"}},Da={class:"bg-white p-3 rounded-3"},Ma=e("h5",{class:"mb-3"},[e("span",{class:"d-flex align-items-center"},[e("i",{class:"align-middle me-1 fas fa-fw fa-cogs"}),k("Node Properties")])],-1),Ia={class:"mb-3"},Va=e("label",{for:"argument",class:"form-label",style:{"font-size":"12px"}},"Choose Message",-1),Oa=["value"],Ua={key:0,class:"mb-3"},Ea=e("label",{for:"argument",class:"form-label",style:{"font-size":"12px"}},"Choose Link",-1),za=["value"],Ra={class:"d-flex justify-content-end"},Wa=e("span",{class:"d-flex align-items-center"},[e("i",{class:"align-middle me-1 fas fa-fw fa-trash"}),k("Delete Node ")],-1),Pa=[Wa],qa=A(`<span class="condition-box"><span class="condition-box__icon"><svg version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 52.965 52.965" width="15" height="15" xml:space="preserve"><path style="fill:none;stroke:#FFFFFF;stroke-width:2;stroke-linecap:round;stroke-miterlimit:10;" d="M24.008,13.401L33.2,4.208
                        c4.278-4.278,11.278-4.278,15.556,0l0,0c4.278,4.278,4.278,11.278,0,15.556L36.735,31.786c-4.278,4.278-11.278,4.278-15.556,0l0,0"></path><path style="fill:none;stroke:#FFFFFF;stroke-width:2;stroke-linecap:round;stroke-miterlimit:10;" d="M27.543,40.978l-7.778,7.778
                        c-4.278,4.278-11.278,4.278-15.556,0l0,0c-4.278-4.278-4.278-11.278,0-15.556l11.314-11.314c4.278-4.278,11.278-4.278,15.556,0l0,0"></path><line style="fill:none;stroke:#FFFFFF;stroke-width:3;stroke-linecap:round;stroke-miterlimit:10;" x1="33.965" y1="45" x2="33.965" y2="51"></line><line style="fill:none;stroke:#FFFFFF;stroke-width:3;stroke-linecap:round;stroke-miterlimit:10;" x1="37.722" y1="43" x2="41.965" y2="47.243"></line><line style="fill:none;stroke:#FFFFFF;stroke-width:3;stroke-linecap:round;stroke-miterlimit:10;" x1="38.965" y1="39" x2="44.965" y2="39"></line><line style="fill:none;stroke:#FFFFFF;stroke-width:3;stroke-linecap:round;stroke-miterlimit:10;" x1="15.965" y1="10" x2="15.965" y2="4"></line><line style="fill:none;stroke:#FFFFFF;stroke-width:3;stroke-linecap:round;stroke-miterlimit:10;" x1="12.207" y1="12" x2="7.965" y2="7.757"></line><line style="fill:none;stroke:#FFFFFF;stroke-width:3;stroke-linecap:round;stroke-miterlimit:10;" x1="10.965" y1="16" x2="4.965" y2="16"></line></svg></span> Link Clicked </span>`,1),Ha=e("span",{class:"circle"},null,-1),Ga=e("svg",{width:"10",height:"10",fill:"none",viewBox:"0 0 24 24","stroke-width":"2",stroke:"white"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M4.5 12.75l6 6 9-13.5"})],-1),Qa=e("svg",{width:"10",height:"10",fill:"none",viewBox:"0 0 24 24","stroke-width":"2",stroke:"white"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6 18L18 6M6 6l12 12"})],-1),Le={__name:"LinkClicked",props:{id:String,label:String,type:String},setup(t){const d=t,s=w(!1),n=C(()=>({backgroundColor:"green",left:"48px",width:"14px",height:"14px",right:"auto",bottom:"-7px"})),c=C(()=>({backgroundColor:"red",width:"14px",height:"14px",right:"40px",left:"auto",bottom:"-7px"})),f=C(()=>({backgroundColor:"white",borderColor:"#dcdbdb",borderStyle:"solid",borderWidth:"1px",width:"14px",height:"14px",top:"-6px"}));let p=w(window.messagesWithLinks);const{findNode:o,onNodeClick:g,removeNodes:v,onPaneClick:_}=z(),b=w(o(d.id)),u=C(()=>p.value.find(r=>r.argument===b.value.data.message)||{links:[]});b.value.data.argument=C(()=>b.value.data.message&&b.value.data.link?`${b.value.data.message}.${b.value.data.link}`:""),g(r=>{r.event.target.classList.contains("handle")||r.node.id===b.value.id&&(s.value=!s.value)}),_(()=>{s.value=!1});const h=r=>{v([r],!0),window.notyf.open({type:"success",message:"Node successfully deleted!",duration:"3000",ripple:!0,dismissible:!0})};return(r,x)=>(i(),m("div",Aa,[y(a(W),{style:{display:"flex",gap:"0.5rem","align-items":"center"},"is-visible":s.value,"node-id":t.id,position:a(S).Right},{default:$(()=>[y(U,{mode:"in-out",appear:""},{default:$(()=>[e("div",Da,[Ma,e("div",Ia,[Va,T(e("select",{name:"argument",class:"form-select","onUpdate:modelValue":x[0]||(x[0]=F=>b.value.data.message=F)},[(i(!0),m(I,null,V(a(p),F=>(i(),m("option",{value:F.argument},l(F.title),9,Oa))),256))],512),[[E,b.value.data.message]])]),y(U,{mode:"in-out",appear:""},{default:$(()=>{var F,D;return[(D=(F=u.value)==null?void 0:F.links)!=null&&D.length?(i(),m("div",Ua,[Ea,T(e("select",{name:"argument",class:"form-select","onUpdate:modelValue":x[1]||(x[1]=B=>b.value.data.link=B)},[(i(!0),m(I,null,V(u.value.links,B=>(i(),m("option",{value:B.url},l(B.text),9,za))),256))],512),[[E,b.value.data.link]])])):N("",!0)]}),_:1}),e("div",Ra,[e("button",{class:"btn btn-danger btn-sm rounded-2",onClick:x[2]||(x[2]=F=>h(b.value))},Pa)])])]),_:1})]),_:1},8,["is-visible","node-id","position"]),qa,y(a(j),{id:`state.link.clicked.target.${t.id}`,type:"target",position:a(S).Top,style:L(f.value),class:"handle"},{default:$(()=>[Ha]),_:1},8,["id","position","style"]),y(a(j),{id:`state.link.clicked.${t.id}`,type:"source",position:a(S).Bottom,style:L(n.value),class:"handle"},{default:$(()=>[Ga]),_:1},8,["id","position","style"]),y(a(j),{id:`state.link.not_clicked.${t.id}`,type:"source",position:a(S).Bottom,style:L(c.value),class:"handle"},{default:$(()=>[Qa]),_:1},8,["id","position","style"])]))}},Za={class:"col-lg-7 col-xl-8 col-xxl-9 pe-0"},Ja={class:"d-flex gap-2"},Xa=["href"],Ka=e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"feather feather-arrow-left-circle align-middle me-2"},[e("circle",{cx:"12",cy:"12",r:"10"}),e("polyline",{points:"12 8 8 12 12 16"}),e("line",{x1:"16",y1:"12",x2:"8",y2:"12"})],-1),Ya={class:"h3 mb-3 px-4 py-2 bg-white"},en={class:"d-flex gap-2"},tn={class:"d-flex align-items-center"},sn=e("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"feather feather-save align-middle me-2"},[e("path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z"}),e("polyline",{points:"17 21 17 13 7 13 7 21"}),e("polyline",{points:"7 3 7 8 15 8"})],-1),on={class:"col-lg-5 col-xl-4 col-xxl-3 px-0"},an={__name:"WorkFlow",props:{workflowName:{type:String,default:"Untitled"},workflowId:{type:Number,default:null},saveUrl:{type:String,default:"/automation/workflow/save"},elementsData:{type:Array,default:[]},messages:{type:Array,default:[{argument:3,action:"Message 3",title:"Message 3"}]},messagesOpened:{type:Array,default:[{argument:3,action:"Message 3",title:"Message 3"}]},messagesWithLinks:{type:Array},stages:{type:Array,default:[{argument:"50/50",action:"ABSplit",title:"50/50"}]},tags:{type:Array,default:[{argument:"default",action:"default",title:"default",type:"default"}]},stageActions:{type:Array,default:[{argument:"default",action:"default",title:"default",type:"default"}]},abSplit:{type:Array,default:[{argument:"50/50",action:"ABSplit",title:"50/50"}]},contactLists:{type:Array,default:[{argument:2,action:"contactList 2",title:"contactList 2"}]},waitOptions:{type:Array,default:[{argument:2,action:"contactList 2",title:"contactList 2"}]},backUrl:{type:String,default:"/"}},setup(t){const d={"condition.stage.changed":M(be),"condition.message.opened":M(ke),"condition.run":M(Fe),"condition.link.clicked":M(Le),"action.message.sent":M(ye),"action.wait":M(we),"action.start":M(xe),"action.add.tag":M($e),"action.move.to.list":M(Ce),"action.ab.split":M(Se),"action.change.stage":M(Ne)},s=t,n=w(s.elementsData),c=w(s.workflowName);let f=0;const p=()=>Math.floor(Math.random()*1e4+1)+`_${f++}`,{findNode:o,onConnect:g,nodes:v,edges:_,onNodeClick:b,addEdges:u,addNodes:h,viewport:r,project:x,vueFlowRef:F}=z({nodes:[]});window.messages=s.messages,window.messagesOpened=s.messagesOpened,window.contactLists=s.contactLists,window.waitOptions=s.waitOptions,window.abSplit=s.abSplit,window.stages=s.stages,window.tags=s.tags,window.workflowId=s.workflowId,window.stageActions=s.stageActions,window.messagesWithLinks=s.messagesWithLinks;const D=O=>{O.preventDefault(),O.dataTransfer&&(O.dataTransfer.dropEffect="move")};g(O=>u([O]));const B=O=>{var ie;const H=(ie=O.dataTransfer)==null?void 0:ie.getData("application/vueflow"),{left:X,top:Me}=F.value.getBoundingClientRect(),Ie=x({x:O.clientX-X,y:O.clientY-Me}),le={id:p(),type:H,position:Ie,label:`${H} node`};h([le]),Ue(()=>{const Z=o(le.id),Ve=ge(()=>Z.dimensions,de=>{de.width>0&&de.height>0&&(Z.position={x:Z.position.x-Z.dimensions.width/2,y:Z.position.y-Z.dimensions.height/2},Ve())},{deep:!0,flush:"post"})})},ee=function(){axios.post(s.saveUrl,{elements:n.value,title:c.value}).then(function(O){window.notyf.open({type:"success",message:"Workflow successfully saved!",duration:"5000",ripple:!0,dismissible:!0})}).catch(function(O){console.log(O),window.notyf.open({type:"warning",message:"Something went wrong!",duration:"5000",ripple:!0,dismissible:!0})})};return(O,H)=>(i(),m("div",{class:"row w-100 h-100 mx-0",onDrop:B},[e("div",Za,[y(a(me),{onDragover:D,modelValue:n.value,"onUpdate:modelValue":H[1]||(H[1]=X=>n.value=X),"node-types":d,"default-edge-options":{type:"smoothstep"}},{default:$(()=>[y(a(he)),y(a(ae),null,{default:$(()=>[e("div",Ja,[e("a",{class:"d-flex align-items-center h4 mb-3 px-4 py-2 text-white bg-info text-decoration-none",href:t.backUrl},[Ka,e("span",null,l(O.$t("Back")),1)],8,Xa),e("h1",Ya,l(c.value),1)])]),_:1}),y(a(ae),{position:a(Ee).BottomRight},{default:$(()=>[e("div",en,[T(e("input",{type:"text",class:"form-control","onUpdate:modelValue":H[0]||(H[0]=X=>c.value=X),style:{"min-width":"200px"}},null,512),[[P,c.value]]),e("button",{class:"btn btn-success text-uppercase px-4",onClick:ee},[e("span",tn,[sn,k(" "+l(O.$t("Save")),1)])])])]),_:1},8,["position"])]),_:1},8,["modelValue"])]),e("div",on,[y(fs)])],32))}},nn={class:"row w-100 h-100 mx-0"},ln={class:"col-lg-12 col-xl-12 col-xxl-12 pe-0"},dn={class:"d-flex gap-2"},rn=["href"],cn=e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"feather feather-arrow-left-circle align-middle me-2"},[e("circle",{cx:"12",cy:"12",r:"10"}),e("polyline",{points:"12 8 8 12 12 16"}),e("line",{x1:"16",y1:"12",x2:"8",y2:"12"})],-1),un={class:"h3 mb-3 px-4 py-2 bg-white"},pn={__name:"ShowWorkFlow",props:{workflowName:{type:String,default:"Untitled"},workflowId:{type:Number,default:null},elementsData:{type:Array,default:[]},messages:{type:Array,default:[{argument:3,action:"Message 3",title:"Message 3"}]},messagesOpened:{type:Array,default:[{argument:3,action:"Message 3",title:"Message 3"}]},messagesWithLinks:{type:Array},stages:{type:Array,default:[{argument:"50/50",action:"ABSplit",title:"50/50"}]},tags:{type:Array,default:[{argument:"default",action:"default",title:"default",type:"default"}]},stageActions:{type:Array,default:[{argument:"default",action:"default",title:"default",type:"default"}]},abSplit:{type:Array,default:[{argument:"50/50",action:"ABSplit",title:"50/50"}]},contactLists:{type:Array,default:[{argument:2,action:"contactList 2",title:"contactList 2"}]},waitOptions:{type:Array,default:[{argument:2,action:"contactList 2",title:"contactList 2"}]},backUrl:{type:String,default:"/"}},setup(t){const d={"condition.stage.changed":M(be),"condition.message.opened":M(ke),"condition.run":M(Fe),"condition.link.clicked":M(Le),"action.message.sent":M(ye),"action.wait":M(we),"action.start":M(xe),"action.add.tag":M($e),"action.move.to.list":M(Ce),"action.ab.split":M(Se),"action.change.stage":M(Ne)},s=t,n=w(s.elementsData),c=w(s.workflowName);return z({nodes:[]}),window.messages=s.messages,window.messagesOpened=s.messagesOpened,window.contactLists=s.contactLists,window.waitOptions=s.waitOptions,window.abSplit=s.abSplit,window.stages=s.stages,window.tags=s.tags,window.workflowId=s.workflowId,window.stageActions=s.stageActions,window.messagesWithLinks=s.messagesWithLinks,(f,p)=>(i(),m("div",nn,[e("div",ln,[y(a(me),{modelValue:n.value,"onUpdate:modelValue":p[0]||(p[0]=o=>n.value=o),"node-types":d},{default:$(()=>[y(a(he)),y(a(ae),null,{default:$(()=>[e("div",dn,[e("a",{class:"d-flex align-items-center h4 mb-3 px-4 py-2 text-white bg-info text-decoration-none",href:t.backUrl},[cn,e("span",null,l(f.$t("Back")),1)],8,rn),e("h1",un,l(c.value),1)])]),_:1})]),_:1},8,["modelValue"])])]))}},hn={class:"row p-3"},mn={class:"d-flex justify-content-between"},gn=["onClick"],fn=e("i",{class:"align-middle fas fa-fw fa-minus-circle"},null,-1),_n=[fn],vn=e("i",{class:"align-middle ms-2 fas fa-fw fa-plus-circle"},null,-1),bn=[vn],yn={class:"col-md-4"},wn={class:"mb-3"},xn=e("label",{for:"stage_name",class:"form-label"},"Stage name",-1),$n=["name","onUpdate:modelValue"],kn={class:"col-md-5"},Cn={class:"mb-3"},Sn=e("label",{for:"stage_description",class:"form-label"},"Stage description",-1),Fn=["name","onUpdate:modelValue"],Nn={class:"col-md-3"},Ln={class:"d-flex flex-column mb-3"},Bn=e("label",{for:"stage_color",class:"form-label"},"Stage color",-1),Tn={class:"d-flex align-items-center"},jn=["name","onUpdate:modelValue"],An={class:"fs-4 ms-3"},Dn=["name","value"],Mn={__name:"PipelineStageRepeater",props:{stages:{type:Array}},setup(t){const d=t,s=w([{name:"Default",description:"This is some description",color:"#366dc7"}]);G(()=>{d.stages.length&&(s.value=d.stages)});const n=()=>{s.value.push({name:"",description:"",color:"#366dc7"})},c=f=>{const p=s.value.indexOf(f);p>-1&&s.value.splice(p,1)};return(f,p)=>(i(),R(ze,{name:"stage-list",appear:""},{default:$(()=>[(i(!0),m(I,null,V(s.value,(o,g)=>(i(),m("div",{class:"d-flex flex-column bg-light mb-3 rounded-3",key:g},[e("div",hn,[e("div",mn,[e("h6",null,"#"+l(g+1)+" - "+l(o.name),1),e("div",null,[T(e("button",{class:"btn text-danger btn-lg border-0 p-0",onClick:K(v=>c(o),["prevent"]),title:"Remove Stage"},_n,8,gn),[[re,g||!g&&s.value.length>1]]),T(e("button",{class:"btn text-info btn-lg border-0 p-0",title:"Add New Stage",onClick:K(n,["prevent"])},bn,512),[[re,g===s.value.length-1]])])]),e("div",yn,[e("div",wn,[xn,T(e("input",{class:"form-control",name:`pipeline_stages[${g}][name]`,placeholder:"Enter stage name",type:"text",id:"stage_name","onUpdate:modelValue":v=>o.name=v},null,8,$n),[[P,o.name]])])]),e("div",kn,[e("div",Cn,[Sn,T(e("input",{class:"form-control",name:`pipeline_stages[${g}][description]`,placeholder:"Enter stage description",type:"text",id:"stage_description","onUpdate:modelValue":v=>o.description=v},null,8,Fn),[[P,o.description]])])]),e("div",Nn,[e("div",Ln,[Bn,e("div",Tn,[T(e("input",{type:"color",name:`pipeline_stages[${g}][color]`,id:"stage_color","onUpdate:modelValue":v=>o.color=v,style:{height:"30px"}},null,8,jn),[[P,o.color]]),e("span",An,l(o.color),1)])])]),e("input",{type:"hidden",name:`pipeline_stages[${g}][id]`,value:o.id},null,8,Dn)])]))),128))]),_:1}))}},se=(t,d)=>{const s=t.__vccOpts||t;for(const[n,c]of d)s[n]=c;return s},In={class:"mb-3 position-relative d-flex flex-column align-items-center"},Vn={for:"body",class:"form-label align-self-start"},On=["name"],Un={class:"placeholder-buttons bg-light"},En={class:"d-flex gap-1"},zn={key:0,class:"invalid-feedback"},Rn={__name:"TextArea",props:{errorMessage:{type:String,required:!0},messageBody:{type:String},name:{type:String,required:!0}},setup(t){const d=t,s=w(""),n=w(null);G(()=>{s.value=d.messageBody});const c=(f,p)=>{f.preventDefault();const o=n.value,g=o.selectionStart,v=`[[${p}]]`;s.value=`${s.value.substring(0,g)} ${v}${s.value.substring(g)}`,o.focus()};return(f,p)=>(i(),m("div",In,[e("label",Vn,l(f.$t("Message Body")),1),T(e("textarea",{ref_key:"textarea",ref:n,"onUpdate:modelValue":p[0]||(p[0]=o=>s.value=o),name:t.name,id:"body",class:q([{"is-invalid":t.errorMessage},"form-control"]),cols:"10",rows:"10"},`
         `,10,On),[[P,s.value]]),e("div",Un,[e("span",null,l(f.$t("Add message placeholders"))+":",1),e("div",En,[e("button",{onClick:p[1]||(p[1]=o=>c(o,"firstname")),class:"btn btn-sm btn-info"},l(f.$t("Firstname")),1),e("button",{onClick:p[2]||(p[2]=o=>c(o,"lastname")),class:"btn btn-sm btn-info"},l(f.$t("Lastname")),1),e("button",{onClick:p[3]||(p[3]=o=>c(o,"email")),class:"btn btn-sm btn-info"},l(f.$t("Email")),1)])]),t.errorMessage?(i(),m("small",zn,l(t.errorMessage),1)):N("",!0)]))}},Wn=se(Rn,[["__scopeId","data-v-0c41e744"]]),Pn={class:"mb-3"},qn={class:"d-block form-label"},Hn=["name","value"],te={__name:"MultiSelectList",props:{selected:{type:Array},options:{type:Array,required:!0},name:{type:String},label:{type:String},placeholder:{type:String},labelBy:{type:String},trackBy:{type:String},syncTagsUrl:{type:String},modelId:{type:Number||String}},setup(t){const d=t,s=w([]);G(()=>{d.selected.length&&(s.value=d.selected)});function n(c,f){if(d.syncTagsUrl){let p=new FormData;p.append("modelId",d.modelId);for(let o=0;o<s.value.length;o++)p.append("tags[]",s.value[o].id);axios.post(d.syncTagsUrl,p,{headers:{"Content-Type":"application/json"}}).then(o=>{o.status===200&&window.notyf.open({type:"success",message:"Tags synced!",duration:"2500",ripple:!0,position:"bottom right",dismissible:!0})}).catch(o=>{console.log(o.message),o.response.status===422&&(errors.value=o.response.data.errors)})}}return(c,f)=>(i(),m("div",Pn,[e("span",qn,l(t.label),1),y(a(Re),{modelValue:s.value,"onUpdate:modelValue":f[0]||(f[0]=p=>s.value=p),options:t.options,multiple:!0,"close-on-select":!1,placeholder:t.placeholder,label:t.labelBy,"track-by":t.trackBy,onRemove:n,onSelect:n},null,8,["modelValue","options","placeholder","label","track-by"]),(i(!0),m(I,null,V(s.value,p=>(i(),m("input",{type:"hidden",name:t.name,value:p.id,key:p.id},null,8,Hn))),128))]))}},Gn={for:"note",class:"form-label fw-bold"},Qn={class:"d-flex align-items-center"},Zn=e("i",{class:"align-middle me-2 fas fa-fw fa-clipboard-list"},null,-1),Jn=["placeholder"],Xn={key:0,class:"invalid-feedback"},Kn=e("option",{value:"Note"},"Note",-1),Yn=e("option",{value:"Call Accepted"},"Call Accepted",-1),el=e("option",{value:"Call Declined"},"Call Declined",-1),tl=e("option",{value:"Meeting"},"Meeting",-1),sl=[Kn,Yn,el,tl],ol=["disabled"],al=e("hr",null,null,-1),nl={class:"notes-container"},ll={class:"d-flex flex-column"},il={class:"mb-1"},dl={key:0,style:{"font-size":"11px"}},rl={style:{"font-size":"11px"}},cl={class:"d-flex gap-1"},ul=["onClick"],pl=e("i",{class:"align-middle me-2 fas fa-fw fa-trash text-danger"},null,-1),hl=[pl],Be={__name:"Notes",props:{url:{type:String},deleteUrl:{type:String},fetchUrl:{type:String},leadId:{type:Number}},setup(t){const d=t,s=w([]),n=w(""),c=w("Note"),f=w({}),p=w(!1);G(()=>{o()});function o(){axios.get(d.fetchUrl,{params:{lead_id:d.leadId}}).then(u=>{u.status===200&&(s.value=[...u.data.leadNotes])}).catch(u=>{console.log(u.message)})}const g=()=>{p.value=!0;let u=new FormData;u.append("note",n.value),u.append("note_type",c.value),u.append("lead_id",d.leadId),axios.post(d.url,u,{headers:{"Content-Type":"application/json"}}).then(h=>{h.status===200&&(s.value=[...s.value,h.data.leadNote],n.value="",p.value=!1,f.value={},window.notyf.open({type:"success",message:"Note saved!",duration:"2500",ripple:!0,position:"bottom right",dismissible:!0}))}).catch(h=>{console.log(h.message),h.response.status===422&&(f.value=h.response.data.errors,p.value=!1)})},v=u=>{axios.delete(d.deleteUrl.replace(":noteId",u)).then(h=>{h.status===200&&(s.value=s.value.filter(r=>r.id!==u),window.notyf.open({type:"success",message:"Note deleted!",duration:"2500",ripple:!0,position:"bottom right",dismissible:!0}))}).catch(h=>{console.log(h.message),window.notyf.open({type:"danger",message:h.message,duration:"2500",ripple:!0,position:"bottom right",dismissible:!0})})},_=u=>Object.keys(u).length!==0,b=u=>{let h=new Date(u*1e3);return new Intl.DateTimeFormat("default",{year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric"}).format(h)};return(u,h)=>(i(),m(I,null,[e("form",{onSubmit:K(g,["prevent"]),id:"notes-form",ref:"notesForm"},[e("div",null,[e("label",Gn,[e("span",Qn,[Zn,k(l(u.$t("Notes")),1)])]),T(e("textarea",{id:"note","onUpdate:modelValue":h[0]||(h[0]=r=>n.value=r),class:q(["form-control mb-2",{"is-invalid":_(f.value)}]),name:"note",placeholder:u.$t("Note")},null,10,Jn),[[P,n.value]]),f.value&&f.value.note?(i(),m("small",Xn,l(f.value.note[0]),1)):N("",!0),T(e("select",{name:"note_type","onUpdate:modelValue":h[1]||(h[1]=r=>c.value=r),id:"note_type",class:"form-select mt-2"},sl,512),[[E,c.value]]),e("button",{type:"submit",class:"btn btn-success mt-2",disabled:p.value},"Add Note",8,ol)])],544),al,e("div",nl,[(i(!0),m(I,null,V(s.value,r=>(i(),m("div",{key:r.id,class:"note mb-3"},[e("div",ll,[e("p",il,l(r.note),1),e("span",{class:q(r.type=="Call Declined"?"text-danger":"text-success")},l(r.type),3),r.user?(i(),m("span",dl,[e("em",null,[e("strong",null,l(r.user.full_name),1)])])):N("",!0),e("span",rl,[e("strong",null,[e("em",null,l(b(r.created_at)),1)])])]),e("div",cl,[e("span",{class:"delete-icon",onClick:x=>v(r.id)},hl,8,ul)])]))),128))])],64))}},ml={for:"note",class:"form-label fw-bold"},gl={class:"d-flex align-items-center"},fl=e("i",{class:"align-middle me-2 fas fa-fw fa-clipboard-list"},null,-1),_l={class:"form-group mb-3"},vl=e("label",{for:"start_date"},"Typ",-1),bl=e("option",{value:"Call"},"Call",-1),yl=e("option",{value:"Meeting"},"Meeting",-1),wl=e("option",{value:"E-Mail"},"E-Mail",-1),xl=e("option",{value:"Task"},"Task",-1),$l=[bl,yl,wl,xl],kl={class:"form-group mb-3"},Cl=e("label",{for:"start_date"},"Start Datum",-1),Sl={key:0,class:"invalid-feedback"},Fl={class:"form-group mb-3"},Nl=e("label",{for:"end_date"},"Ende Datum",-1),Ll={class:"form-group"},Bl=e("label",{for:"start_date"},"Beschreibung",-1),Tl={key:0,class:"invalid-feedback"},jl={class:"d-flex gap-2 mt-2"},Al=["disabled"],Dl=["disabled"],Ml=e("i",{class:"align-middle me-1 fas fa-fw fa-clock"},null,-1),Il=e("hr",null,null,-1),Vl={class:"d-flex flex-column"},Ol={class:"d-flex flex-column"},Ul={class:"mb-1"},El={key:0,style:{"font-size":"11px"}},zl={style:{"font-size":"11px"}},Rl={class:"d-flex gap-1"},Wl=["onClick"],Pl=e("i",{class:"align-middle me-2 fas fa-fw fa-trash text-danger"},null,-1),ql=[Pl],Te={__name:"Activities",props:{url:{type:String},fetchUrl:{type:String},deleteUrl:{type:String},leadId:{type:Number},leadActivities:{type:Array}},setup(t){const d=t,s=w([]),n=w(""),c=w("Call"),f=w(new Date(new Date().getTime()+24*60*60*1e3).toISOString().slice(0,16).slice(0,11)+"00:00"),p=w(""),o=w({}),g=w(!1);G(()=>{v()});function v(){axios.get(d.fetchUrl,{params:{lead_id:d.leadId}}).then(r=>{r.status===200&&(s.value=[...r.data.leadActivities])}).catch(r=>{console.log(r.message)})}const _=()=>{g.value=!0;const r=new Date;r.setTime(r.getTime()+72*60*60*1e3);const x=r.toISOString().slice(0,16);let F=new FormData;F.append("description","Wiedervorlage"),F.append("activity_type","Call"),F.append("activity_start_date",x),F.append("activity_end_date",""),F.append("lead_id",d.leadId),axios.post(d.url,F,{headers:{"Content-Type":"application/json"}}).then(D=>{D.status===200&&(s.value=[...s.value,D.data.leadActivity],g.value=!1,window.notyf.open({type:"success",message:"Wiedervorlage in 3 Tagen erstellt!",duration:"2500",ripple:!0,position:"bottom right",dismissible:!0}))}).catch(D=>{D.response.status===422&&(o.value=D.response.data.errors,console.log(D.response.data.errors)),g.value=!1})},b=()=>{g.value=!0;let r=new FormData;r.append("description",n.value),r.append("activity_type",c.value),r.append("activity_start_date",f.value),r.append("activity_end_date",p.value),r.append("lead_id",d.leadId),axios.post(d.url,r,{headers:{"Content-Type":"application/json"}}).then(x=>{x.status===200&&(s.value=[...s.value,x.data.leadActivity],n.value="",g.value=!1,o.value={},window.notyf.open({type:"success",message:"Activity saved!",duration:"2500",ripple:!0,position:"bottom right",dismissible:!0}))}).catch(x=>{x.response.status===422&&(o.value=x.response.data.errors,console.log(x.response.data.errors),g.value=!1)})},u=r=>{axios.delete(d.deleteUrl.replace(":activityId",r)).then(x=>{x.status===200&&(s.value=s.value.filter(F=>F.id!==r),window.notyf.open({type:"success",message:"Activity deleted!",duration:"2500",ripple:!0,position:"bottom right",dismissible:!0}))}).catch(x=>{console.log(x.message),window.notyf.open({type:"danger",message:x.message,duration:"2500",ripple:!0,position:"bottom right",dismissible:!0})})};function h(r){const x=new Date(r);let F=x.getUTCDate().toString().padStart(2,"0"),D=(x.getUTCMonth()+1).toString().padStart(2,"0"),B=x.getUTCFullYear(),ee=x.getUTCHours().toString().padStart(2,"0"),O=x.getUTCMinutes().toString().padStart(2,"0");return`${F}.${D}.${B} ${ee}:${O}`}return(r,x)=>{var F,D;return i(),m(I,null,[e("form",{onSubmit:K(b,["prevent"]),id:"activities-form",ref:"activitiesForm"},[e("div",null,[e("label",ml,[e("span",gl,[fl,k(l(r.$t("Activities")),1)])]),e("div",_l,[vl,T(e("select",{name:"activity_type","onUpdate:modelValue":x[0]||(x[0]=B=>c.value=B),id:"note_type",class:"form-select mt-2"},$l,512),[[E,c.value]])]),e("div",kl,[Cl,T(e("input",{type:"datetime-local",class:q(["form-control",{"is-invalid":(F=o.value)==null?void 0:F.activity_start_date}]),id:"activity_start_date","onUpdate:modelValue":x[1]||(x[1]=B=>f.value=B)},null,2),[[P,f.value]]),o.value&&o.value.activity_start_date?(i(),m("small",Sl,l(o.value.activity_start_date[0]),1)):N("",!0)]),e("div",Fl,[Nl,T(e("input",{type:"datetime-local",class:"form-control",id:"activity_end_date","onUpdate:modelValue":x[2]||(x[2]=B=>p.value=B)},null,512),[[P,p.value]])]),e("div",Ll,[Bl,T(e("textarea",{id:"activity","onUpdate:modelValue":x[3]||(x[3]=B=>n.value=B),class:q(["form-control",{"is-invalid":(D=o.value)==null?void 0:D.description}]),name:"activity"},null,2),[[P,n.value]]),o.value&&o.value.description?(i(),m("small",Tl,l(o.value.description[0]),1)):N("",!0)]),e("div",jl,[e("button",{type:"submit",class:"btn btn-success",disabled:g.value},"Add Activity",8,Al),e("button",{type:"button",class:"btn btn-warning",onClick:_,disabled:g.value},[Ml,k("Auf Wiedervorlage legen ")],8,Dl)])])],544),Il,e("div",Vl,[(i(!0),m(I,null,V(s.value,B=>(i(),m("div",{key:B.id,class:"note mb-3"},[e("div",Ol,[e("p",Ul,l(B.description),1),e("span",null,l(B.type),1),B.user?(i(),m("span",El,[e("em",null,[e("strong",null,l(B.user.full_name),1)])])):N("",!0),e("span",zl,[k("Start Datum: "),e("strong",null,[e("em",null,l(h(B.start_date)),1)])])]),e("div",Rl,[e("span",{class:"delete-icon",onClick:ee=>u(B.id)},ql,8,Wl)])]))),128))])],64)}}},Hl={props:["chartData","chartType"],mounted(){this.createChart()},methods:{createChart(){const t=this.$refs.chart.getContext("2d");new We(t,{type:this.chartType,data:{labels:this.chartData.labels,datasets:[{label:"Opens",data:this.chartData.opens,fill:this.chartType==="line",backgroundColor:this.chartType==="bar"?"#3B82EC":"transparent",borderColor:"#3B82EC",tension:this.chartType==="line"?.4:0},{label:"Clicks",data:this.chartData.clicks,fill:this.chartType==="line",backgroundColor:this.chartType==="bar"?"#E8EAED":"transparent",borderColor:"#E8EAED",borderDash:this.chartType==="line"?[4,4]:[],tension:this.chartType==="line"?.4:0}]},options:{maintainAspectRatio:!1,plugins:{legend:{display:!0},tooltip:{intersect:!1},filler:{propagate:!1}},interaction:{intersect:!0},scales:{x:{grid:{color:"rgba(0,0,0,0.05)"},ticks:{maxTicksLimit:15}},y:{ticks:{stepSize:500},display:!0,grid:{color:"rgba(0,0,0,0)",borderColor:"rgba(0,0,0,0)",tickColor:"#fff"},borderDash:[5,5]}}}})}}},Gl={ref:"chart",width:"749",height:"350"};function Ql(t,d,s,n,c,f){return i(),m("div",null,[e("canvas",Gl,null,512)])}const Zl=se(Hl,[["render",Ql]]);function Jl(t,d){const s=w([]),n=w(20),c=J("data",{}),f=C(()=>t.stage&&t.stage.color?{"border-top":`8px solid ${t.stage.color}`}:{}),p=C(()=>t.stage&&t.stage.name?`${t.stage.name} (${t.leadsCount[t.stage.id]})`:`${d("Leads")} (${t.leadsCount})`),o=C(()=>{const u=Object.keys(t.stage).length===0?"leads":`stage-${t.stage.id}`,h=Object.keys(t.stage).length!==0?t.stage.id:0;return{id:u,dataStageId:h}}),g=C(()=>Object.keys(t.stage).length===0?t.leads:t.leads[t.stage.id]),v=C(()=>{var h;if(c.isGlobalSearching&&c.globalSearchQuery){const r=t.stage.id||0;return(((h=c.globalSearchResults)==null?void 0:h[r])||[]).slice(0,n.value)}return(s.value.length>0?s.value:g.value).slice(0,n.value)}),_=()=>{n.value+=10},b=async u=>{if(u.target.value.length===0){n.value=20,s.value=[];return}const h=t.campaign.id,r=t.campaign.pipeline.id,x=t.stage.id||0,F=u.target.value.toLowerCase().trim();try{const{data:{searchResults:D}}=await Y.get(`/sales/campaign/${h}/pipeline/${r}/stage/${x}/search`,{params:{query:F}});s.value=D}catch(D){console.error("Error fetching data:",D)}};return ge(()=>c.globalSearchQuery,u=>{u&&u.length>0&&(s.value=[])}),{cardStyle:f,stageTitle:p,stageIdAttributes:o,getLeads:v,loadMoreLeads:_,handleSearch:b}}const Xl=["width","height"],Kl=e("circle",{cx:"11",cy:"11",r:"8"},null,-1),Yl=e("line",{x1:"21",y1:"21",x2:"16.65",y2:"16.65"},null,-1),ei=[Kl,Yl],je={__name:"Search",props:{width:{type:Number,default:15},height:{type:Number,default:15}},setup(t){return(d,s)=>(i(),m("svg",{width:t.width,height:t.height,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},ei,8,Xl))}},ti={class:"mb-3"},si={for:"from_email",class:"form-label"},oi={value:"",selected:""},ai=["value"],ni={key:0,class:"invalid-feedback"},li={class:"mb-3"},ii={for:"subject",class:"form-label"},di=["placeholder"],ri={key:0,class:"invalid-feedback"},ci={class:"mb-3"},ui={for:"body",class:"form-label"},pi={key:0,class:"invalid-feedback"},hi={class:"my-3"},mi=["disabled"],gi={class:"d-flex align-items-center justify-content-center"},fi={key:0,class:"spinner spinner-border spinner-border-sm text-light me-2",role:"status"},_i=e("span",{class:"visually-hidden"},"Loading...",-1),vi=[_i],bi={__name:"SendEmailForm",props:{leadId:{type:Number,required:!0}},setup(t){const d=t,s=w(null),n=w({}),c=w(!1),{emails:f,route:{messages:p}}=J("data"),o=()=>{let g=new FormData(s.value);c.value=!0,axios.post(p.send.replace(":leadId",d.leadId),g,{headers:{"Content-Type":"application/json"}}).then(v=>{v.status===200&&(c.value=!1,n.value={},window.notyf.open({type:"success",message:v.data.message,duration:"2500",ripple:!0,position:"bottom right",dismissible:!0}),s.value.reset())}).catch(v=>{v.response.status===422&&(n.value=v.response.data.errors,c.value=!1)})};return(g,v)=>{var _,b,u;return i(),m("form",{onSubmit:K(o,["prevent"]),ref_key:"form",ref:s},[e("div",ti,[e("label",si,l(g.$t("From")),1),e("select",{id:"from_email",name:"from_email",class:q(["form-control",{"is-invalid":(_=n.value)==null?void 0:_.from_email}])},[e("option",oi,l(g.$t("Select")),1),(i(!0),m(I,null,V(a(f),(h,r)=>(i(),m("option",{value:r,key:r},l(h),9,ai))),128))],2),n.value&&n.value.from_email?(i(),m("small",ni,l(n.value.from_email[0]),1)):N("",!0)]),e("div",li,[e("label",ii,l(g.$t("Subject")),1),e("input",{type:"text",name:"subject",class:q(["form-control",{"is-invalid":(b=n.value)==null?void 0:b.subject}]),id:"subject",placeholder:g.$t("Enter subject")},null,10,di),n.value&&n.value.subject?(i(),m("small",ri,l(n.value.subject[0]),1)):N("",!0)]),e("div",ci,[e("label",ui,l(g.$t("Message")),1),e("textarea",{name:"body",id:"body",class:q(["form-control",{"is-invalid":(u=n.value)==null?void 0:u.body}]),rows:"4"},null,2),n.value&&n.value.body?(i(),m("small",pi,l(n.value.body[0]),1)):N("",!0)]),e("div",hi,[e("button",{type:"submit",class:"btn btn-success me-2 w-100",disabled:c.value},[e("span",gi,[c.value?(i(),m("span",fi,vi)):N("",!0),k(l(g.$t("Send Message")),1)])],8,mi)])],544)}}},yi={class:"form-group mb-3"},wi=e("label",{for:"stage-select-select"},"Move Lead to stage:",-1),xi=e("option",{value:"",disabled:""},"Select an option",-1),$i=["value"],ki={__name:"RegularSelect",props:{modelId:{type:Number,required:!1},options:{type:Array,required:!0},transformOptions:{type:Boolean,required:!1},selectedOption:{type:Number,required:!1}},setup(t){const d=t,s=J("data"),n=w(d.selectedOption),{t:c}=ne(),f=C(()=>d.transformOptions?d.options.map(o=>({id:o.id,name:o.name})):d.options),p=async()=>{if(n.value)try{(await axios.post(s.route.leads.leadStageChange.replace(":leadId",d.modelId),{stage_id:n.value})).status===200&&window.notyf.open({type:"success",message:c("Lead moved to another stage!"),duration:"2500",ripple:!0,position:"bottom right",dismissible:!0})}catch(o){console.error("Error fetching data:",o)}};return(o,g)=>(i(),m("div",yi,[wi,T(e("select",{id:"stage-select",class:"form-select mt-2","onUpdate:modelValue":g[0]||(g[0]=v=>n.value=v),onChange:p},[xi,(i(!0),m(I,null,V(f.value,v=>(i(),m("option",{key:v.id,value:v.id},l(v.name),9,$i))),128))],544),[[E,n.value]])]))}},Q=t=>(fe("data-v-35c01996"),t=t(),_e(),t),Ci={class:"offcanvas-header bg-light border-bottom"},Si={class:"offcanvas-title",id:"offcanvasRightLabel"},Fi={class:"d-flex align-items-center"},Ni=Q(()=>e("svg",{class:"me-2 flex-shrink-0",width:"24",height:"24",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M17.982 18.725A7.488 7.488 0 0012 15.75a7.488 7.488 0 00-5.982 2.975m11.963 0a9 9 0 10-11.963 0m11.963 0A8.966 8.966 0 0112 21a8.966 8.966 0 01-5.982-2.275M15 9.75a3 3 0 11-6 0 3 3 0 016 0z"})],-1)),Li={class:"nav nav-tabs",id:"lead-tabs",role:"tablist",style:{"font-size":"12px"}},Bi={class:"nav-item",role:"presentation"},Ti={class:"nav-link active text-uppercase btn-tab",id:"profile-tab","data-bs-toggle":"tab","data-bs-target":"#profile-tab-pane",type:"button",role:"tab","aria-controls":"profile-tab-pane","aria-selected":"true"},ji={class:"nav-item",role:"presentation"},Ai={class:"nav-link text-uppercase btn-tab",id:"notes-tab","data-bs-toggle":"tab","data-bs-target":"#notes-tab-pane",type:"button",role:"tab","aria-controls":"notes-tab-pane","aria-selected":"false"},Di={class:"nav-item",role:"presentation"},Mi={class:"nav-link text-uppercase btn-tab",id:"activities-tab","data-bs-toggle":"tab","data-bs-target":"#activities-tab-pane",type:"button",role:"tab","aria-controls":"activities-tab-pane","aria-selected":"false"},Ii={class:"nav-item",role:"presentation"},Vi={class:"nav-link text-uppercase btn-tab",id:"profile-tab","data-bs-toggle":"tab","data-bs-target":"#message-tab-pane",type:"button",role:"tab","aria-controls":"message-tab-pane","aria-selected":"false"},Oi={class:"tab-content",id:"myTabContent",style:{"overflow-y":"auto"}},Ui={class:"tab-pane fade show active",id:"profile-tab-pane",role:"tabpanel","aria-labelledby":"profile-tab",tabindex:"0"},Ei={class:"offcanvas-body"},zi={class:"row mb-4 data-list"},Ri={class:"col-4 col-xxl-3 mb-0"},Wi={class:"col-8 col-xxl-9 mb-0"},Pi={class:"mb-1"},qi={class:"col-4 col-xxl-3 mb-0"},Hi={class:"col-8 col-xxl-9 mb-0"},Gi={class:"mb-1"},Qi={class:"col-4 col-xxl-3 mb-0"},Zi={class:"col-8 col-xxl-9 mb-0"},Ji={class:"mb-1"},Xi={class:"col-4 col-xxl-3 mb-0"},Ki={class:"col-8 col-xxl-9 mb-0"},Yi={class:"mb-1"},ed={class:"col-4 col-xxl-3 mb-0"},td={class:"col-8 col-xxl-9 mb-0"},sd={class:"mb-1"},od={class:"col-4 col-xxl-3 mb-0"},ad={class:"col-8 col-xxl-9 mb-0"},nd={class:"mb-1"},ld={class:"col-4 col-xxl-3 mb-0"},id={class:"col-8 col-xxl-9 mb-0"},dd={class:"mb-1"},rd={class:"col-4 col-xxl-3 mb-0"},cd={class:"col-8 col-xxl-9 mb-0"},ud={class:"mb-1"},pd={class:"col-4 col-xxl-3 mb-0"},hd={class:"col-8 col-xxl-9 mb-0"},md={class:"mb-1"},gd={class:"col-4 col-xxl-3 mb-0"},fd={class:"col-8 col-xxl-9 mb-0"},_d={class:"mb-1"},vd={class:"col-4 col-xxl-3 mb-0"},bd={class:"col-8 col-xxl-9 mb-0"},yd={class:"mb-1"},wd={class:"col-4 col-xxl-3 mb-0"},xd={class:"col-8 col-xxl-9 mb-0"},$d={class:"mb-1"},kd={class:"col-4 col-xxl-3 mb-0"},Cd={class:"col-8 col-xxl-9 mb-0"},Sd={class:"mb-1"},Fd={class:"col-4 col-xxl-3 mb-0"},Nd={class:"col-8 col-xxl-9 mb-0"},Ld={class:"mb-1"},Bd={key:0,class:"col-4 col-xxl-3 mb-0"},Td={key:1,class:"col-8 col-xxl-9 mb-0"},jd={class:"mb-1"},Ad=["href"],Dd={class:"mb-4"},Md={class:"d-flex fw-bold align-items-center mb-1"},Id=Q(()=>e("i",{class:"align-middle me-2 fas fa-fw fa-random"},null,-1)),Vd=Q(()=>e("hr",null,null,-1)),Od={class:"mb-4"},Ud={class:"d-flex fw-bold align-items-center mb-2"},Ed=Q(()=>e("svg",{class:"me-2",width:"18",height:"18",viewBox:"0 0 24 24",fill:"currentColor"},[e("path",{"fill-rule":"evenodd",d:"M5.25 2.25a3 3 0 00-3 3v4.318a3 3 0 00.879 2.121l9.58 9.581c.92.92 2.39 1.186 3.548.428a18.849 18.849 0 005.441-5.44c.758-1.16.492-2.629-.428-3.548l-9.58-9.581a3 3 0 00-2.122-.879H5.25zM6.375 7.5a1.125 1.125 0 100-2.25 1.125 1.125 0 000 2.25z","clip-rule":"evenodd"})],-1)),zd={class:"mb-4"},Rd={class:"d-flex fw-bold align-items-center mb-2"},Wd=Q(()=>e("svg",{class:"me-2",width:"18",height:"18",viewBox:"0 0 24 24",fill:"currentColor"},[e("path",{"fill-rule":"evenodd",d:"M5.25 2.25a3 3 0 00-3 3v4.318a3 3 0 00.879 2.121l9.58 9.581c.92.92 2.39 1.186 3.548.428a18.849 18.849 0 005.441-5.44c.758-1.16.492-2.629-.428-3.548l-9.58-9.581a3 3 0 00-2.122-.879H5.25zM6.375 7.5a1.125 1.125 0 100-2.25 1.125 1.125 0 000 2.25z","clip-rule":"evenodd"})],-1)),Pd={class:"mb-4"},qd={class:"d-flex fw-bold align-items-center mb-2"},Hd=Q(()=>e("svg",{class:"me-2",width:"18",height:"18",viewBox:"0 0 24 24",fill:"currentColor"},[e("path",{"fill-rule":"evenodd",d:"M5.25 2.25a3 3 0 00-3 3v4.318a3 3 0 00.879 2.121l9.58 9.581c.92.92 2.39 1.186 3.548.428a18.849 18.849 0 005.441-5.44c.758-1.16.492-2.629-.428-3.548l-9.58-9.581a3 3 0 00-2.122-.879H5.25zM6.375 7.5a1.125 1.125 0 100-2.25 1.125 1.125 0 000 2.25z","clip-rule":"evenodd"})],-1)),Gd=Q(()=>e("div",{style:{height:"50px","margin-bottom":"50px"}},null,-1)),Qd={class:"tab-pane fade",id:"notes-tab-pane",role:"tabpanel","aria-labelledby":"notes-tab",tabindex:"0"},Zd={class:"offcanvas-body"},Jd={class:"tab-pane fade",id:"activities-tab-pane",role:"tabpanel","aria-labelledby":"activities-tab",tabindex:"0"},Xd={class:"offcanvas-body"},Kd={class:"tab-pane fade",id:"message-tab-pane",role:"tabpanel","aria-labelledby":"message-tab",tabindex:"0"},Yd={class:"offcanvas-body"},er={__name:"OffCanvas",props:{modelValue:{type:Boolean,default:!1},lead:{type:Object,required:!0},routes:{type:Object,required:!0},tags:{type:Array,required:!0},lists:{type:Array,required:!0}},emits:["update:modelValue"],setup(t,{emit:d}){const s=t,n=d,c=w(null);G(()=>{const o=document.getElementById("offcanvasRight");new bootstrap.Offcanvas(o).show()}),Pe(()=>{const o=document.getElementById("offcanvasRight"),g=new bootstrap.Offcanvas(o);c.value.addEventListener("hidden.bs.offcanvas",()=>{n("update:modelValue",!1)}),g.hide()}),qe(c,()=>{n("update:modelValue",!1)});const f=C(()=>{var o,g;return`${((o=s.lead.contact)==null?void 0:o.firstname)??""} ${((g=s.lead.contact)==null?void 0:g.lastname)??""}`}),p=J("data");return(o,g)=>t.modelValue?(i(),m("div",{key:0,ref_key:"offCanvasRef",ref:c,class:"offcanvas offcanvas-end",tabindex:"-1",id:"offcanvasRight","aria-labelledby":"offcanvasRightLabel"},[e("div",Ci,[e("h5",Si,[e("span",Fi,[Ni,k(" "+l(o.$t("User"))+": "+l(f.value),1)])]),e("button",{onClick:g[0]||(g[0]=v=>n("update:modelValue",!1)),type:"button",class:"btn-close","data-bs-dismiss":"offcanvas","aria-label":"Close"})]),e("ul",Li,[e("li",Bi,[e("button",Ti,l(o.$t("Profile")),1)]),e("li",ji,[e("button",Ai,l(o.$t("Notes")),1)]),e("li",Di,[e("button",Mi,l(o.$t("Activities")),1)]),e("li",Ii,[e("button",Vi,l(o.$t("Send E-Mail")),1)])]),e("div",Oi,[e("div",Ui,[e("div",Ei,[e("dl",zi,[e("dt",Ri,[e("strong",null,l(o.$t("User ID"))+":",1)]),e("dd",Wi,[e("p",Pi,l(t.lead.contact.id),1)]),e("dt",qi,[e("strong",null,l(o.$t("Firstname"))+":",1)]),e("dd",Hi,[e("p",Gi,l(t.lead.contact.firstname),1)]),e("dt",Qi,[e("strong",null,l(o.$t("Lastname"))+":",1)]),e("dd",Zi,[e("p",Ji,l(t.lead.contact.lastname),1)]),e("dt",Xi,[e("strong",null,l(o.$t("Job title"))+":",1)]),e("dd",Ki,[e("p",Yi,l(t.lead.contact.job_title),1)]),e("dt",ed,[e("strong",null,l(o.$t("Email"))+":",1)]),e("dd",td,[e("p",sd,l(t.lead.contact.email),1)]),e("dt",od,[e("strong",null,l(o.$t("Phone"))+":",1)]),e("dd",ad,[e("p",nd,l(t.lead.contact.phone),1)]),e("dt",ld,[e("strong",null,l(o.$t("Company"))+":",1)]),e("dd",id,[e("p",dd,l(t.lead.contact.company_name),1)]),e("dt",rd,[e("strong",null,l(o.$t("VAT"))+":",1)]),e("dd",cd,[e("p",ud,l(t.lead.contact.vat),1)]),e("dt",pd,[e("strong",null,l(o.$t("Contact"))+":",1)]),e("dd",hd,[e("p",md,l(t.lead.contact.company_email),1)]),e("dt",gd,[e("strong",null,l(o.$t("Website"))+":",1)]),e("dd",fd,[e("p",_d,l(t.lead.contact.url),1)]),e("dt",vd,[e("strong",null,l(o.$t("Address"))+":",1)]),e("dd",bd,[e("p",yd,l(t.lead.contact.address),1)]),e("dt",wd,[e("strong",null,l(o.$t("ZIP"))+":",1)]),e("dd",xd,[e("p",$d,l(t.lead.contact.postal),1)]),e("dt",kd,[e("strong",null,l(o.$t("City"))+":",1)]),e("dd",Cd,[e("p",Sd,l(t.lead.contact.city),1)]),e("dt",Fd,[e("strong",null,l(o.$t("Country"))+":",1)]),e("dd",Nd,[e("p",Ld,l(t.lead.contact.country),1)]),t.lead.contact.external_profile_url?(i(),m("dt",Bd,[e("strong",null,l(o.$t("Profile"))+" URL:",1)])):N("",!0),t.lead.contact.external_profile_url?(i(),m("dd",Td,[e("p",jd,[e("a",{href:t.lead.contact.external_profile_url,target:"_blank"},l(t.lead.contact.external_profile_url),9,Ad)])])):N("",!0)]),e("div",Dd,[e("span",Md,[Id,k(" "+l(o.$t("Stages")),1)]),y(ki,{"model-id":t.lead.id,options:a(p).stages,"selected-option":t.lead.pipeline_stage_id,"transform-options":""},null,8,["model-id","options","selected-option"])]),Vd,e("div",Od,[e("span",Ud,[Ed,k(l(o.$t("Contact Tags")),1)]),(i(),R(te,{name:"tags[]",label:"Add tag to contact",placeholder:"Choose tags...","label-by":"name","track-by":"name","sync-tags-url":a(p).route.contacts.syncTags.replace(":contactId",t.lead.contact.id),"model-id":t.lead.contact.id,selected:t.lead.contact.tags??[],options:t.tags??[],key:t.lead.contact.id},null,8,["sync-tags-url","model-id","selected","options"]))]),e("div",zd,[e("span",Rd,[Wd,k(l(o.$t("Lists")),1)]),(i(),R(te,{name:"tags[]",label:"Add to Lists",placeholder:"Choose list...","label-by":"name","track-by":"name","sync-tags-url":a(p).route.contacts.syncLists.replace(":contactId",t.lead.contact.id),"model-id":t.lead.contact.id,selected:t.lead.contact.lists??[],options:t.lists??[],key:t.lead.contact.id},null,8,["sync-tags-url","model-id","selected","options"]))]),e("div",Pd,[e("span",qd,[Hd,k(l(o.$t("Lead Tags")),1)]),(i(),R(te,{name:"tags[]",label:"Add tag to lead",placeholder:"Choose tags...","label-by":"name","track-by":"name","sync-tags-url":a(p).route.leads.syncTags.replace(":contactId",t.lead.contact.id),"model-id":t.lead.id,selected:t.lead.tags??[],options:t.tags??[],key:t.lead.id},null,8,["sync-tags-url","model-id","selected","options"]))]),Gd])]),e("div",Qd,[e("div",Zd,[(i(),R(Be,{"lead-id":t.lead.id,"fetch-url":a(p).route.notes.fetch.replace(":leadId",t.lead.id),url:a(p).route.notes.store.replace(":leadId",t.lead.id),"delete-url":a(p).route.notes.delete.replace(":leadId",t.lead.id),key:t.lead.id},null,8,["lead-id","fetch-url","url","delete-url"]))])]),e("div",Jd,[e("div",Xd,[(i(),R(Te,{"lead-id":t.lead.id,"fetch-url":a(p).route.activities.fetch.replace(":leadId",t.lead.id),url:a(p).route.activities.store.replace(":leadId",t.lead.id),"delete-url":a(p).route.activities.delete.replace(":leadId",t.lead.id),key:t.lead.id},null,8,["lead-id","fetch-url","url","delete-url"]))])]),e("div",Kd,[e("div",Yd,[y(bi,{"lead-id":t.lead.id},null,8,["lead-id"])])])])],512)):N("",!0)}},tr=se(er,[["__scopeId","data-v-35c01996"]]),sr={width:"26",height:"26",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",style:{"pointer-events":"none"}},or=e("path",{"fill-rule":"evenodd",d:"M2.25 12c0-5.385 4.365-9.75 9.75-9.75s9.75 4.365 9.75 9.75-4.365 9.75-9.75 9.75S2.25 17.385 2.25 12zm8.706-1.442c1.146-.573 2.437.463 2.126 1.706l-.709 2.836.042-.02a.75.75 0 01.67 1.34l-.04.022c-1.147.573-2.438-.463-2.127-1.706l.71-2.836-.042.02a.75.75 0 11-.671-1.34l.041-.022zM12 9a.75.75 0 100-1.5.75.75 0 000 1.5z","clip-rule":"evenodd"},null,-1),ar=[or],nr={__name:"LeadDetails",props:{leadId:{type:Number,required:!0},campaignId:{type:Number,required:!0}},setup(t){const d=t,s=w(!1),n=w(null),c=w([]),f=w([]);async function p(){try{const g=await axios.get(`/sales/campaign/${d.campaignId}/lead/${d.leadId}`);n.value=g.data.lead,c.value=JSON.parse(g.data.tags),f.value=JSON.parse(g.data.lists)}catch(g){console.error(g)}}const o=async()=>{await p(),s.value=!0};return(g,v)=>(i(),m("div",null,[e("span",{onClick:o,class:"info-icon","aria-controls":"offcanvasRight"},[(i(),m("svg",sr,ar))]),s.value?(i(),R(tr,{key:0,modelValue:s.value,"onUpdate:modelValue":v[0]||(v[0]=_=>s.value=_),lead:n.value,tags:c.value,lists:f.value,routes:[]},null,8,["modelValue","lead","tags","lists"])):N("",!0)]))}},lr=["width","height"],ir=e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M17.982 18.725A7.488 7.488 0 0012 15.75a7.488 7.488 0 00-5.982 2.975m11.963 0a9 9 0 10-11.963 0m11.963 0A8.966 8.966 0 0112 21a8.966 8.966 0 01-5.982-2.275M15 9.75a3 3 0 11-6 0 3 3 0 016 0z"},null,-1),dr=[ir],rr={__name:"User",props:{width:{type:Number,default:20},height:{type:Number,default:20}},setup(t){return(d,s)=>(i(),m("svg",{width:t.width,height:t.height,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},dr,8,lr))}},cr=["width","height"],ur=e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M21.75 6.75v10.5a2.25 2.25 0 01-2.25 2.25h-15a2.25 2.25 0 01-2.25-2.25V6.75m19.5 0A2.25 2.25 0 0019.5 4.5h-15a2.25 2.25 0 00-2.25 2.25m19.5 0v.243a2.25 2.25 0 01-1.07 1.916l-7.5 4.615a2.25 2.25 0 01-2.36 0L3.32 8.91a2.25 2.25 0 01-1.07-1.916V6.75"},null,-1),pr=[ur],hr={__name:"Mail",props:{width:{type:Number,default:18},height:{type:Number,default:18}},setup(t){return(d,s)=>(i(),m("svg",{width:t.width,height:t.height,fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},pr,8,cr))}},mr=["width","height"],gr=e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M2.25 6.75c0 8.284 6.716 15 15 15h2.25a2.25 2.25 0 002.25-2.25v-1.372c0-.516-.351-.966-.852-1.091l-4.423-1.106c-.44-.11-.902.055-1.173.417l-.97 1.293c-.282.376-.769.542-1.21.38a12.035 12.035 0 01-7.143-7.143c-.162-.441.004-.928.38-1.21l1.293-.97c.363-.271.527-.734.417-1.173L6.963 3.102a1.125 1.125 0 00-1.091-.852H4.5A2.25 2.25 0 002.25 4.5v2.25z"},null,-1),fr=[gr],ce={__name:"Phone",props:{width:{type:Number,default:18},height:{type:Number,default:18}},setup(t){return(d,s)=>(i(),m("svg",{width:t.width,height:t.height,fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},fr,8,mr))}},_r=["width","height"],vr=e("path",{"fill-rule":"evenodd",d:"M5.25 2.25a3 3 0 00-3 3v4.318a3 3 0 00.879 2.121l9.58 9.581c.92.92 2.39 1.186 3.548.428a18.849 18.849 0 005.441-5.44c.758-1.16.492-2.629-.428-3.548l-9.58-9.581a3 3 0 00-2.122-.879H5.25zM6.375 7.5a1.125 1.125 0 100-2.25 1.125 1.125 0 000 2.25z","clip-rule":"evenodd"},null,-1),br=[vr],ue={__name:"Tag",props:{width:{type:Number,default:18},height:{type:Number,default:18}},setup(t){return(d,s)=>(i(),m("svg",{width:t.width,height:t.height,viewBox:"0 0 24 24",fill:"currentColor"},br,8,_r))}},yr=["data-lead-id"],wr={class:"drag-handle",style:{display:"inline-block",width:"20px",cursor:"grab","margin-bottom":"5px"}},xr={xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"feather feather-move align-middle",style:{"pointer-events":"none"}},$r=A('<polyline points="5 9 2 12 5 15"></polyline><polyline points="9 5 12 2 15 5"></polyline><polyline points="15 19 12 22 9 19"></polyline><polyline points="19 9 22 12 19 15"></polyline><line x1="2" y1="12" x2="22" y2="12"></line><line x1="12" y1="2" x2="12" y2="22"></line>',6),kr=[$r],Cr={class:"d-flex align-items-center"},Sr={class:"ms-2 lead-name"},Fr=["href"],Nr={class:"d-flex align-items-center"},Lr={class:"ms-2 lead-email"},Br={class:"d-flex align-items-center"},Tr={class:"ms-2"},jr={key:0,class:"d-flex align-items-center"},Ar={class:"list-unstyled d-flex flex-wrap m-0",style:{gap:"2px 3px"}},Dr={key:1,class:"d-flex align-items-center"},Mr={class:"list-unstyled d-flex flex-wrap m-0 lead-tags mt-3",style:{gap:"2px 3px"}},Ir={key:2,class:"d-flex align-items-center"},Vr={class:"ms-2"},Or={key:3,class:"d-flex align-items-center mt-2 pt-2 border-top"},Ur=A('<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="flex-shrink-0"><rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect><line x1="16" y1="2" x2="16" y2="6"></line><line x1="8" y1="2" x2="8" y2="6"></line><line x1="3" y1="10" x2="21" y2="10"></line></svg>',1),Er={class:"ms-2 text-muted",style:{"font-size":"0.85rem"}},zr={__name:"LeadItem",props:{lead:{type:Object,required:!0},campaign:{type:Object,required:!0}},setup(t){const d=t,s=C(()=>{var g,v;const f=(v=(g=d.lead)==null?void 0:g.next_call_activity)==null?void 0:v.start_date;if(!f)return null;const p=new Date(f);return new Intl.DateTimeFormat("de-DE",{day:"numeric",month:"2-digit",year:"numeric",hour:"numeric",minute:"numeric"}).format(p)}),n=C(()=>{var g;const f=(g=d.lead)==null?void 0:g.created_at;if(console.log("Lead data:",d.lead),console.log("Created at:",f),!f)return null;const p=new Date(f);return new Intl.DateTimeFormat("de-DE",{day:"numeric",month:"2-digit",year:"numeric"}).format(p)}),c=J("data");return(f,p)=>{var o,g,v,_,b,u;return i(),m("div",{class:"lead-item card mb-3 p-2 bg-light border gap-1","data-lead-id":t.lead.id},[e("span",wr,[(i(),m("svg",xr,kr))]),e("div",Cr,[y(rr,{class:"flex-shrink-0"}),e("span",Sr,[e("a",{target:"_blank",href:a(c).route.contacts.edit.replace(":contactId",t.lead.contact.id)},l((o=t.lead.contact)==null?void 0:o.firstname)+" "+l((g=t.lead.contact)==null?void 0:g.lastname),9,Fr)])]),e("div",Nr,[y(hr),e("span",Lr,l((v=t.lead.contact)==null?void 0:v.email),1)]),e("div",Br,[y(ce),e("span",Tr,l((_=t.lead.contact)==null?void 0:_.phone),1)]),((b=t.lead.contact)==null?void 0:b.tags.length)>0?(i(),m("div",jr,[y(ue,{class:"me-2 flex-shrink-0"}),e("ul",Ar,[(i(!0),m(I,null,V(t.lead.contact.tags,h=>(i(),m("li",{key:h.id,class:"badge rounded-pill bg-info fw-light"},l(h.name),1))),128))])])):N("",!0),((u=t.lead)==null?void 0:u.tags.length)>0?(i(),m("div",Dr,[y(ue,{class:"me-2 flex-shrink-0"}),e("ul",Mr,[(i(!0),m(I,null,V(t.lead.tags,h=>(i(),m("li",{key:h.id,class:"badge rounded-pill bg-success fw-light"},l(h.name),1))),128))])])):N("",!0),t.lead.next_call_activity?(i(),m("div",Ir,[y(ce),e("span",Vr,l(s.value),1)])):N("",!0),n.value?(i(),m("div",Or,[Ur,e("span",Er," Created: "+l(n.value),1)])):N("",!0),(i(),R(nr,{"lead-id":t.lead.id,"campaign-id":t.campaign.id,key:t.lead.contact.id},null,8,["lead-id","campaign-id"]))],8,yr)}}},Rr={class:"campaign-card"},Wr={class:"card-header"},Pr={key:0,class:"card-actions float-end"},qr={class:"dropdown position-relative"},Hr=A('<a href="#" data-bs-toggle="dropdown" data-bs-display="static"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-more-horizontal align-middle"><circle cx="12" cy="12" r="1"></circle><circle cx="19" cy="12" r="1"></circle><circle cx="5" cy="12" r="1"></circle></svg></a>',1),Gr={class:"dropdown-menu dropdown-menu-end"},Qr=["href"],Zr={class:"card-title"},Jr={key:1,class:"card-subtitle text-muted mb-2"},Xr={class:"input-group-text"},Kr=["placeholder","disabled"],Yr={key:2,class:"mt-2 alert alert-info py-1 px-2 mb-0",style:{"font-size":"0.85rem"}},ec=e("i",{class:"fas fa-filter me-1"},null,-1),tc=["id","data-stage-id"],sc=e("div",{class:"card mb-3 px-2 py-4 cursor-grab border-dashed align-items-center"},[e("span",{style:{"font-size":"10px"}},[e("i",null,"Drag / drop area")])],-1),pe={__name:"LeadList",props:{campaign:{type:Object,required:!0},leadsCount:{type:[Number,Object],required:!0},leads:{type:[Array,Object],required:!1,default:[]},stage:{type:Object,required:!1,default:{}}},setup(t){const d=t,{t:s}=ne(),{cardStyle:n,stageTitle:c,stageIdAttributes:f,getLeads:p,loadMoreLeads:o,handleSearch:g}=Jl(d,s),{route:{list:v},isGlobalSearching:_,globalSearchQuery:b}=J("data"),u=w(null);He(u,()=>{o()},{distance:20,direction:"bottom",canLoadMore:()=>Object.keys(d.stage).length===0?p.value.length<d.leadsCount:p.value.length<d.leadsCount[d.stage.id]});const h=w(null),r=x=>{if(_.value&&b.value){x.target.value="";return}g(x)};return(x,F)=>(i(),m("div",Rr,[e("div",{class:"card",style:L(a(n))},[e("div",Wr,[Object.keys(d.stage).length!==0?(i(),m("div",Pr,[e("div",qr,[Hr,e("div",Gr,[e("a",{href:a(v).newList.replace(":stageId",t.stage.id),class:"dropdown-item"},l(x.$t("Create New List")),9,Qr)])])])):N("",!0),e("h5",Zr,l(a(c)),1),t.stage.description?(i(),m("h6",Jr,l(t.stage.description),1)):N("",!0),e("div",{class:q(["input-group",{"opacity-50":a(_)&&a(b)}])},[e("span",Xr,[y(je)]),e("input",{ref_key:"localSearchInput",ref:h,class:"form-control lead-search",type:"search",name:"lead-search",placeholder:a(_)&&a(b)?"Global search active...":"Search in this stage...",disabled:a(_)&&a(b),onInput:r},null,40,Kr)],2),a(_)&&a(b)&&a(p).length>0?(i(),m("div",Yr,[ec,k(" Showing "+l(a(p).length)+" result(s) from global search ",1)])):N("",!0)]),e("div",{class:"card-body scroll",ref_key:"scrollContainer",ref:u},[e("div",{id:a(f).id,"data-stage-id":a(f).dataStageId},[(i(!0),m(I,null,V(a(p),D=>(i(),R(zr,{key:D.id,lead:D,campaign:t.campaign},null,8,["lead","campaign"]))),128)),sc],8,tc)],512)],4)]))}},Ae=t=>(fe("data-v-3a9ca901"),t=t(),_e(),t),oc={class:"mb-4"},ac={class:"global-search-container"},nc={class:"search-wrapper"},lc={class:"search-icon-wrapper"},ic=["placeholder"],dc=["title"],rc=Ae(()=>e("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"currentColor"},[e("path",{d:"M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z"}),e("path",{d:"M4.646 4.646a.5.5 0 0 1 .708 0L8 7.293l2.646-2.647a.5.5 0 0 1 .708.708L8.707 8l2.647 2.646a.5.5 0 0 1-.708.708L8 8.707l-2.646 2.647a.5.5 0 0 1-.708-.708L7.293 8 4.646 5.354a.5.5 0 0 1 0-.708z"})],-1)),cc=[rc],uc={key:0,class:"search-status-badge"},pc=Ae(()=>e("div",{class:"status-indicator"},null,-1)),hc={class:"status-text"},mc={key:0,class:"results-count"},gc=["data-pipeline-id"],fc={__name:"LeadCampaign",props:{campaign:{type:Object,required:!0},initialLeadsCount:{type:Number,required:!0},initialLeads:{type:Array,required:!0},leadsCount:{type:Object,required:!0},stages:{type:Array,required:!0},leads:{type:Object,required:!0},routes:{type:Object,required:!1},emails:{type:Object,required:!1},initialSearch:{type:String,required:!1,default:""}},setup(t){const{t:d}=ne(),s=t,n=w(""),c=w({}),f=w(!1),p=w(null),o=C(()=>Object.values(c.value).reduce((b,u)=>b+(Array.isArray(u)?u.length:0),0)),g=Ge({route:s.routes,emails:s.emails,stages:s.stages,globalSearchQuery:n,globalSearchResults:c,isGlobalSearching:f});Qe("data",g);const v=async b=>{const u=b.target.value.trim();if(n.value=u,u.length===0){c.value={},f.value=!1;return}f.value=!0;try{const{data:{searchResults:h}}=await Y.get(`/sales/campaign/${s.campaign.id}/pipeline/${s.campaign.pipeline.id}/search-all`,{params:{query:u}});c.value=h}catch(h){console.error("Error fetching global search results:",h),c.value={}}},_=()=>{n.value="",c.value={},f.value=!1,p.value&&(p.value.value="")};return G(()=>{s.initialSearch&&s.initialSearch.trim().length>0&&(p.value&&(p.value.value=s.initialSearch),v({target:{value:s.initialSearch}}))}),(b,u)=>(i(),R(U,{appear:""},{default:$(()=>[e("div",null,[e("div",oc,[e("div",ac,[e("div",nc,[e("div",lc,[y(je,{width:20,height:20})]),e("input",{ref_key:"searchInputRef",ref:p,class:"global-search-input",type:"search",name:"global-search",placeholder:a(d)("Search by name, email, company..."),onInput:v,autocomplete:"off"},null,40,ic),n.value?(i(),m("button",{key:0,onClick:_,class:"clear-search-btn",title:a(d)("Clear search")},cc,8,dc)):N("",!0),y(U,{name:"fade"},{default:$(()=>[f.value&&n.value?(i(),m("div",uc,[pc,e("span",hc,[k(l(a(d)("Searching across all stages"))+" ",1),o.value>0?(i(),m("span",mc," · "+l(o.value)+" "+l(a(d)("results found")),1)):N("",!0)])])):N("",!0)]),_:1})])])]),e("div",{class:"row",style:{"flex-wrap":"unset"},id:"pipeline","data-pipeline-id":t.campaign.pipeline_id},[(i(),R(pe,{campaign:t.campaign,"leads-count":t.initialLeadsCount,leads:t.initialLeads,key:0},null,8,["campaign","leads-count","leads"])),(i(!0),m(I,null,V(t.stages,h=>(i(),R(pe,{key:h.id,"leads-count":t.leadsCount,campaign:t.campaign,stage:h,leads:t.leads},null,8,["leads-count","campaign","stage","leads"]))),128))],8,gc)])]),_:1}))}},_c=se(fc,[["__scopeId","data-v-3a9ca901"]]);document.addEventListener("DOMContentLoaded",()=>{if(document.getElementsByClassName("js-simplebar")[0]){new Ze(document.getElementsByClassName("js-simplebar")[0]);const d=document.getElementsByClassName("sidebar")[0];document.getElementsByClassName("sidebar-toggle")[0].addEventListener("click",()=>{d.classList.toggle("collapsed"),d.addEventListener("transitionend",()=>{window.dispatchEvent(new Event("resize"))})})}});document.addEventListener("DOMContentLoaded",()=>{ve.replace()});window.feather=ve;window.notyf=new Je({duration:5e3,position:{x:"right",y:"top"},types:[{type:"default",backgroundColor:"#3B7DDD",icon:{className:"notyf__icon--success",tagName:"i"}},{type:"info-bsha",backgroundColor:"#495e69",icon:{className:"notyf__icon--success",tagName:"i"}},{type:"success",backgroundColor:"#28a745",icon:{className:"notyf__icon--success",tagName:"i"}},{type:"warning",backgroundColor:"#ffc107",icon:{className:"notyf__icon--error",tagName:"i"}},{type:"danger",backgroundColor:"#dc3545",icon:{className:"notyf__icon--error",tagName:"i"}}]});window.dragula=Xe;window.jQuery=window.$=Ke;const vc={de:Ut},De=Ye({locale:"de",fallbackLocale:"en",messages:vc});De.global.locale=document.documentElement.lang.substring(0,2);const bc=st(),oe=et({components:{WorkFlow:an,ShowWorkFlow:pn,PipelineStageRepeater:Mn,TextArea:Wn,MultiSelectList:te,Notes:Be,Activities:Te,OpenClicksChart:Zl,LeadCampaign:_c}});oe.config.globalProperties.emitter=bc;oe.config.compilerOptions.whitespace="preserve";oe.use(De);document.querySelector("#app")!==null&&oe.mount("#app");window.DataTable=tt;
