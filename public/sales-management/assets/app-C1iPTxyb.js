import{b as Oe,a as Y,o as d,c as h,d as e,e as M,r as w,f as C,u as z,g as b,w as $,T as U,h as B,F as I,i as V,j as a,t as l,v as E,P as S,D as W,k,n as N,_ as A,l as T,m as D,p as Ue,q as he,s as ae,x as Ee,y as P,z as me,A as ge,B as G,C as R,E as ze,G as re,H as K,I as q,J as Re,K as We,L as J,M as ne,N as Pe,O as qe,Q as fe,R as _e,S as He,U as Ge,V as Qe,W as Ze,X as ve,Y as Je,Z as Xe,$ as Ke,a0 as Ye,a1 as et,a2 as tt,a3 as st}from"./vendor-DVxmtyTD.js";window.bootstrap=Oe;let ot=document.head.querySelector('meta[name="csrf-token"]').content;Y.defaults.headers.common["X-CSRF-TOKEN"]=ot;Y.defaults.headers.common["X-Requested-With"]="XMLHttpRequest";window.axios=Y;const at="Dashboard",nt="List",lt="Edit",it="Delete",dt="Remove",rt="Name",ct="Description",ut="Count",pt="Speichern",ht="Stornieren",mt="Vorname",gt="Nachname",ft="Email",_t="Zurück",vt="USt-ID",bt="Anmerkungen",yt="Note",wt="Activities",xt="Profil",$t="Adresse",kt="Benutzer",Ct="Telefon",St="Firma",Ft="Kontakt",Nt="Website",Lt="PLZ",Bt="Stadt",Tt="Land",At="Listen",jt="Wählen",Mt="Von",Dt="Betreff",It="Nachricht",Vt="Leads",Ot="Stages",Ut={"Good day":"Guten Tag",Dashboard:at,"All Lists":"All Lists",List:nt,Edit:lt,Delete:it,Remove:dt,Name:rt,Description:ct,Count:ut,Save:pt,Cancel:ht,"Message Body":"Nachrichtentext",Firstname:mt,Lastname:gt,"Add message placeholders":"Nachrichtenplatzhalter hinzufügen",Email:ft,Back:_t,VAT:vt,Notes:bt,Note:yt,Activities:wt,Profile:xt,"Send E-Mail":"E-Mail senden",Address:$t,User:kt,"User ID":"Bentuzer ID","Job title":"Arbeit",Phone:Ct,Company:St,Contact:Ft,Website:Nt,ZIP:Lt,City:Bt,Country:Tt,"Contact Tags":"Kontakt Tags",Lists:At,"Lead Tags":"Lead Tags",Select:jt,From:Mt,Subject:Dt,"Enter subject":"Betreff eingeben",Message:It,"Send Message":"Nachricht senden",Leads:Vt,"Create New List":"Neue Liste erstellen",Stages:Ot,"Lead moved to another stage!":"Lead in neue Stage verschoben!","Search all stages":"Alle Stages durchsuchen","Search by name, email, company...":"Nach Name, E-Mail, Firma suchen...","Searching across all stages":"Suche über alle Stages","results found":"Ergebnisse gefunden","Clear search":"Suche löschen"},Et={class:"bg-light h-100 shadow-lg"},zt=M('<h5 class="sidebar-heading py-3 px-2"><span class="d-flex align-items-center justify-content-center fw-lighter text-center"><svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-move align-middle me-2"><polyline points="5 9 2 12 5 15"></polyline><polyline points="9 5 12 2 15 5"></polyline><polyline points="15 19 12 22 9 19"></polyline><polyline points="19 9 22 12 19 15"></polyline><line x1="2" y1="12" x2="22" y2="12"></line><line x1="12" y1="2" x2="12" y2="22"></line></svg>You can drag these nodes to the pane</span></h5>',1),Rt={class:"d-flex flex-column gap-2"},Wt={class:"d-flex flex-wrap gap-2 align-items-center my-3 px-4"},Pt=M('<span class="start-box px-3 justify-content-center"><span class="start-box__icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-flag"><path d="M4 15s1-1 4-1 5 2 8 2 4-1 4-1V3s-1 1-4 1-5-2-8-2-4 1-4 1z"></path><line x1="4" y1="22" x2="4" y2="15"></line></svg></span> Start </span>',1),qt=[Pt],Ht=M('<div class="bg-white shadow-sm px-3 py-2"><h6 class="mb-0"><span class="d-flex align-items-center"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-git-pull-request align-middle me-2"><circle cx="18" cy="18" r="3"></circle><circle cx="6" cy="6" r="3"></circle><path d="M13 6h3a2 2 0 0 1 2 2v7"></path><line x1="6" y1="9" x2="6" y2="21"></line></svg> Conditions</span></h6></div>',1),Gt={class:"d-flex flex-wrap gap-4 align-items-center my-3 px-4"},Qt=M('<span class="condition-box pe-2 justify-content-center"><span class="condition-box__icon"><span><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="feather feather-play-circle align-middle"><circle cx="12" cy="12" r="10"></circle><polygon points="10 8 16 12 10 16 10 8"></polygon></svg></span></span> On Run</span>',1),Zt=[Qt],Jt=M('<span class="condition-box pe-2 justify-content-end"><span class="condition-box__icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="feather feather-refresh-cw align-middle"><polyline points="23 4 23 10 17 10"></polyline><polyline points="1 20 1 14 7 14"></polyline><path d="M3.51 9a9 9 0 0 1 14.85-3.36L23 10M1 14l4.64 4.36A9 9 0 0 0 20.49 15"></path></svg></span> Stage Changed</span>',1),Xt=[Jt],Kt=M('<span class="condition-box pe-2 justify-content-end"><span class="condition-box__icon"><span><svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="20px" height="20px" viewBox="-10 -10 84 84" enable-background="new -10 -10 84 84" xml:space="preserve"><g><line fill="none" stroke="#FFFFFF" stroke-width="3" stroke-miterlimit="10" x1="36" y1="9" x2="45" y2="9"></line><line fill="none" stroke="#FFFFFF" stroke-width="3" stroke-miterlimit="10" x1="19" y1="17" x2="45" y2="17"></line><line fill="none" stroke="#FFFFFF" stroke-width="3" stroke-miterlimit="10" x1="19" y1="25" x2="45" y2="25"></line><g><polyline fill="none" stroke="#FFFFFF" stroke-width="3" stroke-miterlimit="10" points="1,26 32,45.434 63,26"></polyline><polyline fill="none" stroke="#FFFFFF" stroke-width="3" stroke-miterlimit="10" points="11.334,21.667 1,26 1,63 63,63 63,26 63,26 52.666,21.667"></polyline><polyline fill="none" stroke="#FFFFFF" stroke-width="3" stroke-miterlimit="10" points="11,32 11,1 53,1 53,32"></polyline></g></g></svg></span></span> Message Opened </span>',1),Yt=[Kt],es=M(`<span class="condition-box pe-2 justify-content-center"><span class="condition-box__icon"><svg version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 52.965 52.965" width="15" height="15" xml:space="preserve"><path style="fill:none;stroke:#FFFFFF;stroke-width:2;stroke-linecap:round;stroke-miterlimit:10;" d="M24.008,13.401L33.2,4.208
                                    c4.278-4.278,11.278-4.278,15.556,0l0,0c4.278,4.278,4.278,11.278,0,15.556L36.735,31.786c-4.278,4.278-11.278,4.278-15.556,0l0,0"></path><path style="fill:none;stroke:#FFFFFF;stroke-width:2;stroke-linecap:round;stroke-miterlimit:10;" d="M27.543,40.978l-7.778,7.778
                                    c-4.278,4.278-11.278,4.278-15.556,0l0,0c-4.278-4.278-4.278-11.278,0-15.556l11.314-11.314c4.278-4.278,11.278-4.278,15.556,0l0,0"></path><line style="fill:none;stroke:#FFFFFF;stroke-width:3;stroke-linecap:round;stroke-miterlimit:10;" x1="33.965" y1="45" x2="33.965" y2="51"></line><line style="fill:none;stroke:#FFFFFF;stroke-width:3;stroke-linecap:round;stroke-miterlimit:10;" x1="37.722" y1="43" x2="41.965" y2="47.243"></line><line style="fill:none;stroke:#FFFFFF;stroke-width:3;stroke-linecap:round;stroke-miterlimit:10;" x1="38.965" y1="39" x2="44.965" y2="39"></line><line style="fill:none;stroke:#FFFFFF;stroke-width:3;stroke-linecap:round;stroke-miterlimit:10;" x1="15.965" y1="10" x2="15.965" y2="4"></line><line style="fill:none;stroke:#FFFFFF;stroke-width:3;stroke-linecap:round;stroke-miterlimit:10;" x1="12.207" y1="12" x2="7.965" y2="7.757"></line><line style="fill:none;stroke:#FFFFFF;stroke-width:3;stroke-linecap:round;stroke-miterlimit:10;" x1="10.965" y1="16" x2="4.965" y2="16"></line></svg></span> Link Clicked </span>`,1),ts=[es],ss=M('<div class="bg-white shadow-sm px-3 py-2"><h6 class="mb-0"><span class="d-flex align-items-center"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-repeat align-middle me-2"><polyline points="17 1 21 5 17 9"></polyline><path d="M3 11V9a4 4 0 0 1 4-4h14"></path><polyline points="7 23 3 19 7 15"></polyline><path d="M21 13v2a4 4 0 0 1-4 4H3"></path></svg> Actions</span></h6></div>',1),os={class:"d-flex flex-wrap gap-4 align-items-center my-3 px-4"},as=M('<span class="action-box pe-2 justify-content-end"><span class="action-box__icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-mail align-middle"><path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"></path><polyline points="22,6 12,13 2,6"></polyline></svg></span> Send Message </span>',1),ns=[as],ls=M('<span class="action-box px-3 justify-content-center"><span class="action-box__icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-clock align-middle"><circle cx="12" cy="12" r="10"></circle><polyline points="12 6 12 12 16 14"></polyline></svg></span> Wait </span>',1),is=[ls],ds=M('<span class="action-box ps-2 justify-content-center"><span class="action-box__icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-tag align-middle"><path d="M20.59 13.41l-7.17 7.17a2 2 0 0 1-2.83 0L2 12V2h10l8.59 8.59a2 2 0 0 1 0 2.82z"></path><line x1="7" y1="7" x2="7.01" y2="7"></line></svg></span> Add Tag </span>',1),rs=[ds],cs=M('<span class="action-box ps-2 justify-content-center"><span class="action-box__icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-list align-middle"><line x1="8" y1="6" x2="21" y2="6"></line><line x1="8" y1="12" x2="21" y2="12"></line><line x1="8" y1="18" x2="21" y2="18"></line><line x1="3" y1="6" x2="3.01" y2="6"></line><line x1="3" y1="12" x2="3.01" y2="12"></line><line x1="3" y1="18" x2="3.01" y2="18"></line></svg></span> Move To List </span>',1),us=[cs],ps=M('<span class="action-box ps-2 justify-content-center"><span class="action-box__icon"><svg viewBox="0 0 24 24" width="20" height="20" stroke="currentColor" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round" class="css-i6dzq1"><rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect><line x1="8" y1="12" x2="16" y2="12"></line><line x1="12" y1="16" x2="12" y2="16"></line><line x1="12" y1="8" x2="12" y2="8"></line></svg></span> A/B Split </span>',1),hs=[ps],ms=M('<span class="action-box pe-2 justify-content-end"><span class="action-box__icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="feather feather-refresh-cw align-middle"><polyline points="23 4 23 10 17 10"></polyline><polyline points="1 20 1 14 7 14"></polyline><path d="M3.51 9a9 9 0 0 1 14.85-3.36L23 10M1 14l4.64 4.36A9 9 0 0 0 20.49 15"></path></svg></span> Change Stage</span>',1),gs=[ms],fs={__name:"Sidebar",setup(t){const u=(s,n,r)=>{s.dataTransfer&&(s.dataTransfer.setData("application/vueflow",n),s.dataTransfer.effectAllowed="move")};return(s,n)=>(d(),h("aside",Et,[zt,e("div",Rt,[e("div",Wt,[e("div",{class:"vue-flow__node-input shadow-sm",draggable:!0,onDragstart:n[0]||(n[0]=r=>u(r,"action.start"))},qt,32)]),Ht,e("div",Gt,[e("div",{class:"vue-flow__node-input shadow-sm",draggable:!0,onDragstart:n[1]||(n[1]=r=>u(r,"condition.run"))},Zt,32),e("div",{class:"vue-flow__node-input shadow-sm",draggable:!0,onDragstart:n[2]||(n[2]=r=>u(r,"condition.stage.changed"))},Xt,32),e("div",{class:"vue-flow__node-input shadow-sm",draggable:!0,onDragstart:n[3]||(n[3]=r=>u(r,"condition.message.opened"))},Yt,32),e("div",{class:"vue-flow__node-input shadow-sm",draggable:!0,onDragstart:n[4]||(n[4]=r=>u(r,"condition.link.clicked"))},ts,32)]),ss,e("div",os,[e("div",{class:"vue-flow__node-input shadow-sm",draggable:!0,onDragstart:n[5]||(n[5]=r=>u(r,"action.message.sent"))},ns,32),e("div",{class:"vue-flow__node-input shadow-sm",draggable:!0,onDragstart:n[6]||(n[6]=r=>u(r,"action.wait"))},is,32),e("div",{class:"vue-flow__node-input shadow-sm",draggable:!0,onDragstart:n[7]||(n[7]=r=>u(r,"action.add.tag"))},rs,32),e("div",{class:"vue-flow__node-input shadow-sm",draggable:!0,onDragstart:n[8]||(n[8]=r=>u(r,"action.move.to.list"))},us,32),e("div",{class:"vue-flow__node-input shadow-sm",draggable:!0,onDragstart:n[9]||(n[9]=r=>u(r,"action.ab.split"))},hs,32),e("div",{class:"vue-flow__node-input shadow-sm",draggable:!0,onDragstart:n[10]||(n[10]=r=>u(r,"action.change.stage"))},gs,32)])])]))}},_s={class:"vue-flow__node-input shadow-sm",style:{"min-width":"150px",width:"100%","padding-left":"2rem","padding-right":"2rem"}},vs={class:"bg-white p-3 rounded-3"},bs=e("h5",{class:"mb-3"},[e("span",{class:"d-flex align-items-center"},[e("i",{class:"align-middle me-1 fas fa-fw fa-cogs"}),k("Node Properties")])],-1),ys={class:"mb-3"},ws=e("label",{for:"argument",class:"form-label",style:{"font-size":"12px"}},"Choose Stage",-1),xs=["value"],$s={class:"d-flex justify-content-end"},ks=e("span",{class:"d-flex align-items-center"},[e("i",{class:"align-middle me-1 fas fa-fw fa-trash"}),k("Delete Node ")],-1),Cs=[ks],Ss={class:"condition-box"},Fs=M('<span class="condition-box__icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="feather feather-refresh-cw align-middle"><polyline points="23 4 23 10 17 10"></polyline><polyline points="1 20 1 14 7 14"></polyline><path d="M3.51 9a9 9 0 0 1 14.85-3.36L23 10M1 14l4.64 4.36A9 9 0 0 0 20.49 15"></path></svg></span>',1),Ns=e("span",{class:"circle"},null,-1),Ls=e("span",{class:"circle"},null,-1),be={__name:"StageChanged",props:{id:String,label:String,type:String},setup(t){const u=t,s=w(!1),n=C(()=>({backgroundColor:"white",borderColor:"#dcdbdb",borderStyle:"solid",borderWidth:"1px",width:"14px",height:"14px",top:"-7px"})),r=C(()=>({backgroundColor:"white",borderColor:"#dcdbdb",borderStyle:"solid",borderWidth:"1px",width:"14px",height:"14px",bottom:"-7px"}));let f=window.stages;const{findNode:p,onNodeClick:o,removeNodes:g,onPaneClick:y}=z(),_=w(p(u.id));o(i=>{i.event.target.classList.contains("handle")||i.node.id===_.value.id&&(s.value=!s.value)}),y(()=>{s.value=!1});const v=i=>{g([i],!0),window.notyf.open({type:"success",message:"Node successfully deleted!",duration:"3000",ripple:!0,dismissible:!0})};return(i,m)=>(d(),h("div",_s,[b(a(W),{style:{display:"flex",gap:"0.5rem","align-items":"center"},"is-visible":s.value,"node-id":t.id,position:a(S).Right},{default:$(()=>[b(U,{mode:"in-out",appear:""},{default:$(()=>[e("div",vs,[bs,e("div",ys,[ws,B(e("select",{name:"argument",class:"form-select form-select-sm","onUpdate:modelValue":m[0]||(m[0]=c=>_.value.data=c),id:"argument"},[(d(!0),h(I,null,V(a(f),c=>(d(),h("option",{value:c},l(c.title),9,xs))),256))],512),[[E,_.value.data]])]),e("div",$s,[e("button",{class:"btn btn-danger btn-sm rounded-2",onClick:m[1]||(m[1]=c=>v(_.value))},Cs)])])]),_:1})]),_:1},8,["is-visible","node-id","position"]),e("span",Ss,[Fs,k(" "+l(_.value.data.title??"Stage Changed"),1)]),b(a(A),{id:`state.stage.changed.target.${t.id}`,type:"target",position:a(S).Top,style:N(n.value),class:"handle"},{default:$(()=>[Ns]),_:1},8,["id","position","style"]),b(a(A),{id:`state.stage.changed.${t.id}`,type:"source",position:a(S).Bottom,style:N(r.value),class:"handle"},{default:$(()=>[Ls]),_:1},8,["id","position","style"])]))}},Bs={class:"vue-flow__node-input shadow-sm",style:{"min-width":"150px",width:"100%","padding-left":"2rem","padding-right":"2rem"}},Ts={class:"bg-white p-3 rounded-3"},As=e("h5",{class:"mb-3"},[e("span",{class:"d-flex align-items-center"},[e("i",{class:"align-middle me-1 fas fa-fw fa-cogs"}),k("Node Properties")])],-1),js={class:"mb-3"},Ms=e("label",{for:"argument",class:"form-label",style:{"font-size":"12px"}},"Choose Message",-1),Ds=["value"],Is={class:"d-flex justify-content-end"},Vs=e("span",{class:"d-flex align-items-center"},[e("i",{class:"align-middle me-1 fas fa-fw fa-trash"}),k("Delete Node ")],-1),Os=[Vs],Us={class:"action-box ps-1"},Es=e("span",{class:"action-box__icon"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"feather feather-mail align-middle"},[e("path",{d:"M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"}),e("polyline",{points:"22,6 12,13 2,6"})])],-1),zs=e("span",{class:"circle"},null,-1),Rs=e("span",{class:"circle"},null,-1),ye={__name:"SendMessage",props:{id:String,label:String,type:String},setup(t){const u=t,s=w(!1),n=C(()=>({backgroundColor:"white",borderColor:"#dcdbdb",borderStyle:"solid",borderWidth:"1px",width:"14px",height:"14px",top:"-7px"})),r=C(()=>({backgroundColor:"white",borderColor:"#dcdbdb",borderStyle:"solid",borderWidth:"1px",width:"14px",height:"14px",bottom:"-7px"}));let f=window.messages;const{findNode:p,onNodeClick:o,removeNodes:g,onPaneClick:y}=z(),_=w(p(u.id));o(i=>{i.event.target.classList.contains("handle")||i.node.id===_.value.id&&(s.value=!s.value)}),y(()=>{s.value=!1});const v=i=>{g([i],!0),window.notyf.open({type:"success",message:"Node successfully deleted!",duration:"3000",ripple:!0,dismissible:!0})};return(i,m)=>(d(),h("div",Bs,[b(a(W),{style:{display:"flex",gap:"0.5rem","align-items":"center"},"is-visible":s.value,"node-id":t.id,position:a(S).Right},{default:$(()=>[b(U,{mode:"in-out",appear:""},{default:$(()=>[e("div",Ts,[As,e("div",js,[Ms,B(e("select",{name:"argument",class:"form-select","onUpdate:modelValue":m[0]||(m[0]=c=>_.value.data=c)},[(d(!0),h(I,null,V(a(f),c=>(d(),h("option",{value:c},l(c.title),9,Ds))),256))],512),[[E,_.value.data]])]),e("div",Is,[e("button",{class:"btn btn-danger btn-sm rounded-2",onClick:m[1]||(m[1]=c=>v(_.value))},Os)])])]),_:1})]),_:1},8,["is-visible","node-id","position"]),e("span",Us,[Es,k(" "+l(_.value.data.title??"Send Message"),1)]),b(a(A),{id:`state.message.sent.${t.id}`,type:"source",position:a(S).Bottom,style:N(r.value),class:"handle"},{default:$(()=>[zs]),_:1},8,["id","position","style"]),b(a(A),{id:`state.message.sent.target.${t.id}`,type:"target",position:a(S).Top,style:N(n.value),class:"handle"},{default:$(()=>[Rs]),_:1},8,["id","position","style"])]))}},Ws={class:"vue-flow__node-input shadow-sm",style:{"min-width":"150px",width:"100%","padding-left":"2rem","padding-right":"2rem"}},Ps={class:"bg-white p-3 rounded-3"},qs=e("h5",{class:"mb-3"},[e("span",{class:"d-flex align-items-center"},[e("i",{class:"align-middle me-1 fas fa-fw fa-cogs"}),k("Node Properties")])],-1),Hs={class:"mb-3"},Gs=e("label",{for:"argument",class:"form-label",style:{"font-size":"12px"}},"Choose Wait Time",-1),Qs=["value"],Zs={class:"d-flex justify-content-end"},Js=e("span",{class:"d-flex align-items-center"},[e("i",{class:"align-middle me-1 fas fa-fw fa-trash"}),k("Delete Node ")],-1),Xs=[Js],Ks={class:"action-box ps-1"},Ys=e("span",{class:"action-box__icon"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"feather feather-clock align-middle"},[e("circle",{cx:"12",cy:"12",r:"10"}),e("polyline",{points:"12 6 12 12 16 14"})])],-1),eo=e("span",{class:"circle"},null,-1),to=e("span",{class:"circle"},null,-1),we={__name:"Wait",props:{id:String,label:String,type:String},setup(t){const u=t,s=w(!1),n=C(()=>({backgroundColor:"white",borderColor:"#dcdbdb",borderStyle:"solid",borderWidth:"1px",width:"14px",height:"14px",top:"-7px"})),r=C(()=>({backgroundColor:"white",borderColor:"#dcdbdb",borderStyle:"solid",borderWidth:"1px",width:"14px",height:"14px",bottom:"-7px"}));let f=window.waitOptions;const{findNode:p,onNodeClick:o,removeNodes:g,onPaneClick:y}=z(),_=w(p(u.id));o(i=>{i.event.target.classList.contains("handle")||i.node.id===_.value.id&&(s.value=!s.value)});const v=i=>{g([i],!0),window.notyf.open({type:"success",message:"Node successfully deleted!",duration:"3000",ripple:!0,dismissible:!0})};return y(()=>{s.value=!1}),(i,m)=>(d(),h("div",Ws,[b(a(W),{style:{display:"flex",gap:"0.5rem","align-items":"center"},"is-visible":s.value,"node-id":t.id,position:a(S).Right},{default:$(()=>[b(U,{mode:"in-out",appear:""},{default:$(()=>[e("div",Ps,[qs,e("div",Hs,[Gs,B(e("select",{name:"argument",class:"form-select","onUpdate:modelValue":m[0]||(m[0]=c=>_.value.data=c)},[(d(!0),h(I,null,V(a(f),c=>(d(),h("option",{value:c},l(c.title),9,Qs))),256))],512),[[E,_.value.data]])]),e("div",Zs,[e("button",{class:"btn btn-danger btn-sm rounded-2",onClick:m[1]||(m[1]=c=>v(_.value))},Xs)])])]),_:1})]),_:1},8,["is-visible","node-id","position"]),e("span",Ks,[Ys,k(" Wait "+l(_.value.data.title??""),1)]),b(a(A),{id:`state.wait.target.${t.id}`,type:"target",position:a(S).Top,style:N(n.value),class:"handle"},{default:$(()=>[eo]),_:1},8,["id","position","style"]),b(a(A),{id:`state.wait.${t.id}`,type:"source",position:a(S).Bottom,style:N(r.value),class:"handle"},{default:$(()=>[to]),_:1},8,["id","position","style"])]))}},so={class:"bg-white p-3 rounded-3"},oo=e("h5",{class:"mb-3"},[e("span",{class:"d-flex align-items-center"},[e("i",{class:"align-middle me-1 fas fa-fw fa-cogs"}),k("Node Properties")])],-1),ao={class:"d-flex justify-content-end"},no=e("span",{class:"d-flex align-items-center"},[e("i",{class:"align-middle me-1 fas fa-fw fa-trash"}),k("Delete Node ")],-1),lo=[no],io=M('<span class="start-box pe-2 justify-content-center"><span class="start-box__icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-flag"><path d="M4 15s1-1 4-1 5 2 8 2 4-1 4-1V3s-1 1-4 1-5-2-8-2-4 1-4 1z"></path><line x1="4" y1="22" x2="4" y2="15"></line></svg></span> Start </span>',1),ro=e("span",{class:"circle"},null,-1),xe={__name:"Start",props:{id:String,label:String,type:String},setup(t){const u=t,s=w(!1),n=w(),r=w(),f=C(()=>({backgroundColor:"white",borderColor:"#dcdbdb",borderStyle:"solid",borderWidth:"1px",width:"14px",height:"14px",bottom:"-6px"})),{findNode:p,onNodeClick:o,removeNodes:g,onPaneClick:y}=z(),_=w(p(u.id));o(i=>{i.event.target.classList.contains("handle")||i.node.id===_.value.id&&(s.value=!s.value)}),y(()=>{s.value=!1});const v=i=>{g([i],!0),window.notyf.open({type:"success",message:"Node successfully deleted!",duration:"3000",ripple:!0,dismissible:!0})};return(i,m)=>(d(),h("div",{class:"vue-flow__node-input shadow-sm",ref_key:"nodeWrapper",ref:n},[b(a(W),{ref_key:"nodeToolbar",ref:r,style:{display:"flex",gap:"0.5rem","align-items":"center"},"is-visible":s.value,"node-id":t.id,position:a(S).Right},{default:$(()=>[b(U,{mode:"in-out",appear:""},{default:$(()=>[e("div",so,[oo,e("div",ao,[e("button",{class:"btn btn-danger btn-sm rounded-2",onClick:m[0]||(m[0]=c=>v(_.value))},lo)])])]),_:1})]),_:1},8,["is-visible","node-id","position"]),io,b(a(A),{id:"start",type:"source",position:a(S).Bottom,style:N(f.value),class:"handle"},{default:$(()=>[ro]),_:1},8,["position","style"])],512))}},co={class:"vue-flow__node-input shadow-sm",style:{"min-width":"150px",width:"100%","padding-left":"2rem","padding-right":"2rem"}},uo={class:"bg-white p-3 rounded-3"},po=e("h5",{class:"mb-3"},[e("span",{class:"d-flex align-items-center"},[e("i",{class:"align-middle me-1 fas fa-fw fa-cogs"}),k("Node Properties")])],-1),ho={class:"mb-3"},mo=e("label",{for:"argument",class:"form-label",style:{"font-size":"12px"}},"Choose Tag",-1),go=["value"],fo={class:"d-flex justify-content-end"},_o=e("span",{class:"d-flex align-items-center"},[e("i",{class:"align-middle me-1 fas fa-fw fa-trash"}),k("Delete Node ")],-1),vo=[_o],bo={class:"action-box ps-1"},yo=e("span",{class:"action-box__icon"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"feather feather-tag align-middle"},[e("path",{d:"M20.59 13.41l-7.17 7.17a2 2 0 0 1-2.83 0L2 12V2h10l8.59 8.59a2 2 0 0 1 0 2.82z"}),e("line",{x1:"7",y1:"7",x2:"7.01",y2:"7"})])],-1),wo=e("span",{class:"circle"},null,-1),xo=e("span",{class:"circle"},null,-1),$e={__name:"AddTag",props:{id:String,label:String,type:String},setup(t){const u=t,s=w(!1),n=C(()=>({backgroundColor:"white",borderColor:"#dcdbdb",borderStyle:"solid",borderWidth:"1px",width:"14px",height:"14px",top:"-7px"})),r=C(()=>({backgroundColor:"white",borderColor:"#dcdbdb",borderStyle:"solid",borderWidth:"1px",width:"14px",height:"14px",bottom:"-7px"}));let f=window.tags;const{findNode:p,onNodeClick:o,removeNodes:g,onPaneClick:y}=z(),_=w(p(u.id));o(i=>{i.event.target.classList.contains("handle")||i.node.id===_.value.id&&(s.value=!s.value)}),y(()=>{s.value=!1});const v=i=>{g([i],!0),window.notyf.open({type:"success",message:"Node successfully deleted!",duration:"3000",ripple:!0,dismissible:!0})};return(i,m)=>(d(),h("div",co,[b(a(W),{style:{display:"flex",gap:"0.5rem","align-items":"center"},"is-visible":s.value,"node-id":t.id,position:a(S).Right},{default:$(()=>[b(U,{mode:"in-out",appear:""},{default:$(()=>[e("div",uo,[po,e("div",ho,[mo,B(e("select",{name:"argument",class:"form-select","onUpdate:modelValue":m[0]||(m[0]=c=>_.value.data=c)},[(d(!0),h(I,null,V(a(f),c=>(d(),h("option",{value:c},l(c.title),9,go))),256))],512),[[E,_.value.data]])]),e("div",fo,[e("button",{class:"btn btn-danger btn-sm rounded-2",onClick:m[1]||(m[1]=c=>v(_.value))},vo)])])]),_:1})]),_:1},8,["is-visible","node-id","position"]),e("span",bo,[yo,k(" "+l(_.value.data.title??"Add Tag"),1)]),b(a(A),{id:`state.tag.add.${t.id}`,type:"source",position:a(S).Bottom,style:N(r.value),class:"handle"},{default:$(()=>[wo]),_:1},8,["id","position","style"]),b(a(A),{id:`state.tag.add.target.${t.id}`,type:"target",position:a(S).Top,style:N(n.value),class:"handle"},{default:$(()=>[xo]),_:1},8,["id","position","style"])]))}},$o={class:"vue-flow__node-input shadow-sm",style:{"min-width":"150px",width:"100%","padding-left":"2rem","padding-right":"2rem"}},ko={class:"bg-white p-3 rounded-3"},Co=e("h5",{class:"mb-3"},[e("span",{class:"d-flex align-items-center"},[e("i",{class:"align-middle me-1 fas fa-fw fa-cogs"}),k("Node Properties")])],-1),So={class:"mb-3"},Fo=e("label",{for:"argument",class:"form-label",style:{"font-size":"12px"}},"Choose Message",-1),No=["value"],Lo={class:"d-flex justify-content-end"},Bo=e("span",{class:"d-flex align-items-center"},[e("i",{class:"align-middle me-1 fas fa-fw fa-trash"}),k("Delete Node ")],-1),To=[Bo],Ao={class:"condition-box"},jo=M('<span class="condition-box__icon"><span><svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="20px" height="20px" viewBox="-10 -10 84 84" enable-background="new -10 -10 84 84" xml:space="preserve"><g><line fill="none" stroke="#FFFFFF" stroke-width="3" stroke-miterlimit="10" x1="36" y1="9" x2="45" y2="9"></line><line fill="none" stroke="#FFFFFF" stroke-width="3" stroke-miterlimit="10" x1="19" y1="17" x2="45" y2="17"></line><line fill="none" stroke="#FFFFFF" stroke-width="3" stroke-miterlimit="10" x1="19" y1="25" x2="45" y2="25"></line><g><polyline fill="none" stroke="#FFFFFF" stroke-width="3" stroke-miterlimit="10" points="1,26 32,45.434 63,26"></polyline><polyline fill="none" stroke="#FFFFFF" stroke-width="3" stroke-miterlimit="10" points="11.334,21.667 1,26 1,63 63,63 63,26 63,26 52.666,21.667"></polyline><polyline fill="none" stroke="#FFFFFF" stroke-width="3" stroke-miterlimit="10" points="11,32 11,1 53,1 53,32"></polyline></g></g></svg></span></span>',1),Mo=e("span",{class:"circle"},null,-1),Do=e("svg",{width:"10",height:"10",fill:"none",viewBox:"0 0 24 24","stroke-width":"2",stroke:"white"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M4.5 12.75l6 6 9-13.5"})],-1),Io=e("svg",{width:"10",height:"10",fill:"none",viewBox:"0 0 24 24","stroke-width":"2",stroke:"white"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6 18L18 6M6 6l12 12"})],-1),ke={__name:"MessageOpened",props:{id:String,label:String,type:String},setup(t){const u=t,s=w(!1),n=C(()=>({backgroundColor:"green",left:"48px",width:"14px",height:"14px",right:"auto",bottom:"-7px"})),r=C(()=>({backgroundColor:"red",width:"14px",height:"14px",right:"40px",left:"auto",bottom:"-7px"})),f=C(()=>({backgroundColor:"white",borderColor:"#dcdbdb",borderStyle:"solid",borderWidth:"1px",width:"14px",height:"14px",top:"-6px"}));let p=window.messagesOpened;const{findNode:o,onNodeClick:g,removeNodes:y,onPaneClick:_}=z(),v=w(o(u.id));g(m=>{m.event.target.classList.contains("handle")||m.node.id===v.value.id&&(s.value=!s.value)}),_(()=>{s.value=!1});const i=m=>{y([m],!0),window.notyf.open({type:"success",message:"Node successfully deleted!",duration:"3000",ripple:!0,dismissible:!0})};return(m,c)=>(d(),h("div",$o,[b(a(W),{style:{display:"flex",gap:"0.5rem","align-items":"center"},"is-visible":s.value,"node-id":t.id,position:a(S).Right},{default:$(()=>[b(U,{mode:"in-out",appear:""},{default:$(()=>[e("div",ko,[Co,e("div",So,[Fo,B(e("select",{name:"argument",class:"form-select form-select-sm","onUpdate:modelValue":c[0]||(c[0]=x=>v.value.data=x),id:"argument"},[(d(!0),h(I,null,V(a(p),x=>(d(),h("option",{value:x},l(x.title),9,No))),256))],512),[[E,v.value.data]])]),e("div",Lo,[e("button",{class:"btn btn-danger btn-sm rounded-2",onClick:c[1]||(c[1]=x=>i(v.value))},To)])])]),_:1})]),_:1},8,["is-visible","node-id","position"]),e("span",Ao,[jo,k(" "+l(v.value.data.title??"Message Opened"),1)]),b(a(A),{id:`state.message.opened.target.${t.id}`,type:"target",position:a(S).Top,style:N(f.value),class:"handle"},{default:$(()=>[Mo]),_:1},8,["id","position","style"]),b(a(A),{id:`state.message.opened.${t.id}`,type:"source",position:a(S).Bottom,style:N(n.value),class:"handle"},{default:$(()=>[Do]),_:1},8,["id","position","style"]),b(a(A),{id:`state.message.not_opened.${t.id}`,type:"source",position:a(S).Bottom,style:N(r.value),class:"handle"},{default:$(()=>[Io]),_:1},8,["id","position","style"])]))}},Vo={class:"vue-flow__node-input shadow-sm",style:{"min-width":"150px",width:"100%","padding-left":"2rem","padding-right":"2rem"}},Oo={class:"bg-white p-3 rounded-3"},Uo=e("h5",{class:"mb-3"},[e("span",{class:"d-flex align-items-center"},[e("i",{class:"align-middle me-1 fas fa-fw fa-cogs"}),k("Node Properties")])],-1),Eo={class:"mb-3"},zo=e("label",{for:"argument",class:"form-label",style:{"font-size":"12px"}},"Choose List",-1),Ro=["value"],Wo={class:"d-flex justify-content-end"},Po=e("span",{class:"d-flex align-items-center"},[e("i",{class:"align-middle me-1 fas fa-fw fa-trash"}),k("Delete Node ")],-1),qo=[Po],Ho={class:"action-box ps-1"},Go=M('<span class="action-box__icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-list align-middle"><line x1="8" y1="6" x2="21" y2="6"></line><line x1="8" y1="12" x2="21" y2="12"></line><line x1="8" y1="18" x2="21" y2="18"></line><line x1="3" y1="6" x2="3.01" y2="6"></line><line x1="3" y1="12" x2="3.01" y2="12"></line><line x1="3" y1="18" x2="3.01" y2="18"></line></svg></span>',1),Qo=e("span",{class:"circle"},null,-1),Zo=e("span",{class:"circle"},null,-1),Ce={__name:"MoveToList",props:{id:String,label:String,type:String},setup(t){const u=t,s=w(!1),n=C(()=>({backgroundColor:"white",borderColor:"#dcdbdb",borderStyle:"solid",borderWidth:"1px",width:"14px",height:"14px",top:"-7px"})),r=C(()=>({backgroundColor:"white",borderColor:"#dcdbdb",borderStyle:"solid",borderWidth:"1px",width:"14px",height:"14px",bottom:"-7px"}));let f=window.contactLists;const{findNode:p,onNodeClick:o,removeNodes:g,onPaneClick:y}=z(),_=w(p(u.id));o(i=>{i.event.target.classList.contains("handle")||i.node.id===_.value.id&&(s.value=!s.value)}),y(()=>{s.value=!1});const v=i=>{g([i],!0),window.notyf.open({type:"success",message:"Node successfully deleted!",duration:"3000",ripple:!0,dismissible:!0})};return(i,m)=>(d(),h("div",Vo,[b(a(W),{style:{display:"flex",gap:"0.5rem","align-items":"center"},"is-visible":s.value,"node-id":t.id,position:a(S).Right},{default:$(()=>[b(U,{mode:"in-out",appear:""},{default:$(()=>[e("div",Oo,[Uo,e("div",Eo,[zo,B(e("select",{name:"argument",class:"form-select","onUpdate:modelValue":m[0]||(m[0]=c=>_.value.data=c)},[(d(!0),h(I,null,V(a(f),c=>(d(),h("option",{value:c},l(c.title),9,Ro))),256))],512),[[E,_.value.data]])]),e("div",Wo,[e("button",{class:"btn btn-danger btn-sm rounded-2",onClick:m[1]||(m[1]=c=>v(_.value))},qo)])])]),_:1})]),_:1},8,["is-visible","node-id","position"]),e("span",Ho,[Go,k(" "+l(_.value.data.title??"Move To List"),1)]),b(a(A),{id:`state.move_to_list.${t.id}`,type:"source",position:a(S).Bottom,style:N(r.value),class:"handle"},{default:$(()=>[Qo]),_:1},8,["id","position","style"]),b(a(A),{id:`state.move_to_list.target.${t.id}`,type:"target",position:a(S).Top,style:N(n.value),class:"handle"},{default:$(()=>[Zo]),_:1},8,["id","position","style"])]))}},Jo={class:"vue-flow__node-input shadow-sm",style:{"min-width":"150px",width:"100%","padding-left":"2rem","padding-right":"2rem"}},Xo={class:"bg-white p-3 rounded-3"},Ko=e("h5",{class:"mb-3"},[e("span",{class:"d-flex align-items-center"},[e("i",{class:"align-middle me-1 fas fa-fw fa-cogs"}),k("Node Properties")])],-1),Yo={class:"mb-3"},ea=e("label",{for:"argument",class:"form-label",style:{"font-size":"12px"}},"Choose split",-1),ta=["value"],sa={class:"d-flex justify-content-end"},oa=e("span",{class:"d-flex align-items-center"},[e("i",{class:"align-middle me-1 fas fa-fw fa-trash"}),k("Delete Node ")],-1),aa=[oa],na={class:"action-box ps-1"},la=M('<span class="action-box__icon"><svg viewBox="0 0 24 24" width="20" height="20" stroke="currentColor" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round" class="css-i6dzq1"><rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect><line x1="8" y1="12" x2="16" y2="12"></line><line x1="12" y1="16" x2="12" y2="16"></line><line x1="12" y1="8" x2="12" y2="8"></line></svg></span>',1),ia=e("span",{class:"circle"},null,-1),da=e("span",{class:"circle"},null,-1),ra=e("span",{class:"circle"},null,-1),Se={__name:"ABSplit",props:{id:String,label:String,type:String},setup(t){const u=t,s=w(!1),n=C(()=>({backgroundColor:"white",borderColor:"#dcdbdb",borderStyle:"solid",borderWidth:"1px",width:"14px",height:"14px",top:"-7px"})),r=C(()=>({backgroundColor:"white",borderColor:"#dcdbdb",borderStyle:"solid",borderWidth:"1px",width:"14px",height:"14px",left:"48px",right:"auto",bottom:"-7px"})),f=C(()=>({backgroundColor:"white",borderColor:"#dcdbdb",borderStyle:"solid",borderWidth:"1px",width:"14px",height:"14px",right:"40px",left:"auto",bottom:"-7px"}));let p=window.abSplit;const{findNode:o,onNodeClick:g,removeNodes:y,onPaneClick:_}=z(),v=w(o(u.id));g(m=>{m.event.target.classList.contains("handle")||m.node.id===v.value.id&&(s.value=!s.value)}),_(()=>{s.value=!1});const i=m=>{y([m],!0),window.notyf.open({type:"success",message:"Node successfully deleted!",duration:"3000",ripple:!0,dismissible:!0})};return(m,c)=>(d(),h("div",Jo,[b(a(W),{style:{display:"flex",gap:"0.5rem","align-items":"center"},"is-visible":s.value,"node-id":t.id,position:a(S).Right},{default:$(()=>[b(U,{mode:"in-out",appear:""},{default:$(()=>[e("div",Xo,[Ko,e("div",Yo,[ea,B(e("select",{name:"argument",class:"form-select","onUpdate:modelValue":c[0]||(c[0]=x=>v.value.data=x)},[(d(!0),h(I,null,V(a(p),x=>(d(),h("option",{value:x},l(x.title),9,ta))),256))],512),[[E,v.value.data]])]),e("div",sa,[e("button",{class:"btn btn-danger btn-sm rounded-2",onClick:c[1]||(c[1]=x=>i(v.value))},aa)])])]),_:1})]),_:1},8,["is-visible","node-id","position"]),e("span",na,[la,k(" "+l(v.value.data.title??"A/B Split"),1)]),b(a(A),{id:`state.abSplit.target.${t.id}`,type:"target",position:a(S).Top,style:N(n.value),class:"handle"},{default:$(()=>[ia]),_:1},8,["id","position","style"]),b(a(A),{id:`state.abSplit.left.${t.id}`,type:"source",position:a(S).Bottom,style:N(r.value),class:"handle"},{default:$(()=>[da]),_:1},8,["id","position","style"]),b(a(A),{id:`state.abSplit.right.${t.id}`,type:"source",position:a(S).Bottom,style:N(f.value),class:"handle"},{default:$(()=>[ra]),_:1},8,["id","position","style"])]))}},ca={class:"vue-flow__node-input shadow-sm",style:{"min-width":"150px",width:"100%","padding-left":"2rem","padding-right":"2rem"}},ua={class:"bg-white p-3 rounded-3"},pa=e("h5",{class:"mb-3"},[e("span",{class:"d-flex align-items-center"},[e("i",{class:"align-middle me-1 fas fa-fw fa-cogs"}),k("Node Properties")])],-1),ha={class:"d-flex justify-content-end"},ma=e("span",{class:"d-flex align-items-center"},[e("i",{class:"align-middle me-1 fas fa-fw fa-trash"}),k("Delete Node ")],-1),ga=[ma],fa={class:"condition-box"},_a=e("span",{class:"condition-box__icon"},[e("span",null,[e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"1","stroke-linecap":"round","stroke-linejoin":"round",class:"feather feather-play-circle align-middle"},[e("circle",{cx:"12",cy:"12",r:"10"}),e("polygon",{points:"10 8 16 12 10 16 10 8"})])])],-1),va=e("span",{class:"circle"},null,-1),ba=e("span",{class:"circle"},null,-1),Fe={__name:"Run",props:{id:String,label:String,type:String},setup(t){const u=t,s=w(!1),n=C(()=>({backgroundColor:"white",borderColor:"#dcdbdb",borderStyle:"solid",borderWidth:"1px",width:"14px",height:"14px",top:"-7px"})),r=C(()=>({backgroundColor:"white",borderColor:"#dcdbdb",borderStyle:"solid",borderWidth:"1px",width:"14px",height:"14px",bottom:"-7px"})),{findNode:f,onNodeClick:p,removeNodes:o,onPaneClick:g}=z(),y=w(f(u.id));y.value.data={argument:window.workflowId},p(v=>{v.event.target.classList.contains("handle")||v.node.id===y.value.id&&(s.value=!s.value)}),g(()=>{s.value=!1});const _=v=>{o([v],!0),window.notyf.open({type:"success",message:"Node successfully deleted!",duration:"3000",ripple:!0,dismissible:!0})};return(v,i)=>(d(),h("div",ca,[b(a(W),{style:{display:"flex",gap:"0.5rem","align-items":"center"},"is-visible":s.value,"node-id":t.id,position:a(S).Right},{default:$(()=>[b(U,{mode:"in-out",appear:""},{default:$(()=>[e("div",ua,[pa,e("div",ha,[e("button",{class:"btn btn-danger btn-sm rounded-2",onClick:i[0]||(i[0]=m=>_(y.value))},ga)])])]),_:1})]),_:1},8,["is-visible","node-id","position"]),e("span",fa,[_a,k(" "+l(y.value.data.title??"On Run"),1)]),b(a(A),{id:`state.run.target.${t.id}`,type:"target",position:a(S).Top,style:N(n.value),class:"handle"},{default:$(()=>[va]),_:1},8,["id","position","style"]),b(a(A),{id:`state.run.${t.id}`,type:"source",position:a(S).Bottom,style:N(r.value),class:"handle"},{default:$(()=>[ba]),_:1},8,["id","position","style"])]))}},ya={class:"vue-flow__node-input shadow-sm",style:{"min-width":"150px",width:"100%","padding-left":"2rem","padding-right":"2rem"}},wa={class:"bg-white p-3 rounded-3"},xa=e("h5",{class:"mb-3"},[e("span",{class:"d-flex align-items-center"},[e("i",{class:"align-middle me-1 fas fa-fw fa-cogs"}),k("Node Properties")])],-1),$a={class:"mb-3"},ka=e("label",{for:"argument",class:"form-label",style:{"font-size":"12px"}},"Choose Stage",-1),Ca=["value"],Sa={class:"d-flex justify-content-end"},Fa=e("span",{class:"d-flex align-items-center"},[e("i",{class:"align-middle me-1 fas fa-fw fa-trash"}),k("Delete Node ")],-1),Na=[Fa],La={class:"action-box ps-1"},Ba=M('<span class="action-box__icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="feather feather-refresh-cw align-middle"><polyline points="23 4 23 10 17 10"></polyline><polyline points="1 20 1 14 7 14"></polyline><path d="M3.51 9a9 9 0 0 1 14.85-3.36L23 10M1 14l4.64 4.36A9 9 0 0 0 20.49 15"></path></svg></span>',1),Ta=e("span",{class:"circle"},null,-1),Aa=e("span",{class:"circle"},null,-1),Ne={__name:"ChangeStage",props:{id:String,label:String,type:String},setup(t){const u=t,s=w(!1),n=C(()=>({backgroundColor:"white",borderColor:"#dcdbdb",borderStyle:"solid",borderWidth:"1px",width:"14px",height:"14px",top:"-7px"})),r=C(()=>({backgroundColor:"white",borderColor:"#dcdbdb",borderStyle:"solid",borderWidth:"1px",width:"14px",height:"14px",bottom:"-7px"}));let f=window.stageActions;const{findNode:p,onNodeClick:o,removeNodes:g,onPaneClick:y}=z(),_=w(p(u.id));o(i=>{i.event.target.classList.contains("handle")||i.node.id===_.value.id&&(s.value=!s.value)}),y(()=>{s.value=!1});const v=i=>{g([i],!0),window.notyf.open({type:"success",message:"Node successfully deleted!",duration:"3000",ripple:!0,dismissible:!0})};return(i,m)=>(d(),h("div",ya,[b(a(W),{style:{display:"flex",gap:"0.5rem","align-items":"center"},"is-visible":s.value,"node-id":t.id,position:a(S).Right},{default:$(()=>[b(U,{mode:"in-out",appear:""},{default:$(()=>[e("div",wa,[xa,e("div",$a,[ka,B(e("select",{name:"argument",class:"form-select","onUpdate:modelValue":m[0]||(m[0]=c=>_.value.data=c)},[(d(!0),h(I,null,V(a(f),c=>(d(),h("option",{value:c},l(c.title),9,Ca))),256))],512),[[E,_.value.data]])]),e("div",Sa,[e("button",{class:"btn btn-danger btn-sm rounded-2",onClick:m[1]||(m[1]=c=>v(_.value))},Na)])])]),_:1})]),_:1},8,["is-visible","node-id","position"]),e("span",La,[Ba,k(" "+l(_.value.data.title??"Change Stage"),1)]),b(a(A),{id:`state.change.stage.target.${t.id}`,type:"target",position:a(S).Top,style:N(n.value),class:"handle"},{default:$(()=>[Ta]),_:1},8,["id","position","style"]),b(a(A),{id:`state.change.stage.${t.id}`,type:"source",position:a(S).Bottom,style:N(r.value),class:"handle"},{default:$(()=>[Aa]),_:1},8,["id","position","style"])]))}},ja={class:"vue-flow__node-input shadow-sm",style:{"min-width":"150px",width:"100%","padding-left":"2rem","padding-right":"2rem"}},Ma={class:"bg-white p-3 rounded-3"},Da=e("h5",{class:"mb-3"},[e("span",{class:"d-flex align-items-center"},[e("i",{class:"align-middle me-1 fas fa-fw fa-cogs"}),k("Node Properties")])],-1),Ia={class:"mb-3"},Va=e("label",{for:"argument",class:"form-label",style:{"font-size":"12px"}},"Choose Message",-1),Oa=["value"],Ua={key:0,class:"mb-3"},Ea=e("label",{for:"argument",class:"form-label",style:{"font-size":"12px"}},"Choose Link",-1),za=["value"],Ra={class:"d-flex justify-content-end"},Wa=e("span",{class:"d-flex align-items-center"},[e("i",{class:"align-middle me-1 fas fa-fw fa-trash"}),k("Delete Node ")],-1),Pa=[Wa],qa=M(`<span class="condition-box"><span class="condition-box__icon"><svg version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 52.965 52.965" width="15" height="15" xml:space="preserve"><path style="fill:none;stroke:#FFFFFF;stroke-width:2;stroke-linecap:round;stroke-miterlimit:10;" d="M24.008,13.401L33.2,4.208
                        c4.278-4.278,11.278-4.278,15.556,0l0,0c4.278,4.278,4.278,11.278,0,15.556L36.735,31.786c-4.278,4.278-11.278,4.278-15.556,0l0,0"></path><path style="fill:none;stroke:#FFFFFF;stroke-width:2;stroke-linecap:round;stroke-miterlimit:10;" d="M27.543,40.978l-7.778,7.778
                        c-4.278,4.278-11.278,4.278-15.556,0l0,0c-4.278-4.278-4.278-11.278,0-15.556l11.314-11.314c4.278-4.278,11.278-4.278,15.556,0l0,0"></path><line style="fill:none;stroke:#FFFFFF;stroke-width:3;stroke-linecap:round;stroke-miterlimit:10;" x1="33.965" y1="45" x2="33.965" y2="51"></line><line style="fill:none;stroke:#FFFFFF;stroke-width:3;stroke-linecap:round;stroke-miterlimit:10;" x1="37.722" y1="43" x2="41.965" y2="47.243"></line><line style="fill:none;stroke:#FFFFFF;stroke-width:3;stroke-linecap:round;stroke-miterlimit:10;" x1="38.965" y1="39" x2="44.965" y2="39"></line><line style="fill:none;stroke:#FFFFFF;stroke-width:3;stroke-linecap:round;stroke-miterlimit:10;" x1="15.965" y1="10" x2="15.965" y2="4"></line><line style="fill:none;stroke:#FFFFFF;stroke-width:3;stroke-linecap:round;stroke-miterlimit:10;" x1="12.207" y1="12" x2="7.965" y2="7.757"></line><line style="fill:none;stroke:#FFFFFF;stroke-width:3;stroke-linecap:round;stroke-miterlimit:10;" x1="10.965" y1="16" x2="4.965" y2="16"></line></svg></span> Link Clicked </span>`,1),Ha=e("span",{class:"circle"},null,-1),Ga=e("svg",{width:"10",height:"10",fill:"none",viewBox:"0 0 24 24","stroke-width":"2",stroke:"white"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M4.5 12.75l6 6 9-13.5"})],-1),Qa=e("svg",{width:"10",height:"10",fill:"none",viewBox:"0 0 24 24","stroke-width":"2",stroke:"white"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6 18L18 6M6 6l12 12"})],-1),Le={__name:"LinkClicked",props:{id:String,label:String,type:String},setup(t){const u=t,s=w(!1),n=C(()=>({backgroundColor:"green",left:"48px",width:"14px",height:"14px",right:"auto",bottom:"-7px"})),r=C(()=>({backgroundColor:"red",width:"14px",height:"14px",right:"40px",left:"auto",bottom:"-7px"})),f=C(()=>({backgroundColor:"white",borderColor:"#dcdbdb",borderStyle:"solid",borderWidth:"1px",width:"14px",height:"14px",top:"-6px"}));let p=w(window.messagesWithLinks);const{findNode:o,onNodeClick:g,removeNodes:y,onPaneClick:_}=z(),v=w(o(u.id)),i=C(()=>p.value.find(c=>c.argument===v.value.data.message)||{links:[]});v.value.data.argument=C(()=>v.value.data.message&&v.value.data.link?`${v.value.data.message}.${v.value.data.link}`:""),g(c=>{c.event.target.classList.contains("handle")||c.node.id===v.value.id&&(s.value=!s.value)}),_(()=>{s.value=!1});const m=c=>{y([c],!0),window.notyf.open({type:"success",message:"Node successfully deleted!",duration:"3000",ripple:!0,dismissible:!0})};return(c,x)=>(d(),h("div",ja,[b(a(W),{style:{display:"flex",gap:"0.5rem","align-items":"center"},"is-visible":s.value,"node-id":t.id,position:a(S).Right},{default:$(()=>[b(U,{mode:"in-out",appear:""},{default:$(()=>[e("div",Ma,[Da,e("div",Ia,[Va,B(e("select",{name:"argument",class:"form-select","onUpdate:modelValue":x[0]||(x[0]=F=>v.value.data.message=F)},[(d(!0),h(I,null,V(a(p),F=>(d(),h("option",{value:F.argument},l(F.title),9,Oa))),256))],512),[[E,v.value.data.message]])]),b(U,{mode:"in-out",appear:""},{default:$(()=>{var F,j;return[(j=(F=i.value)==null?void 0:F.links)!=null&&j.length?(d(),h("div",Ua,[Ea,B(e("select",{name:"argument",class:"form-select","onUpdate:modelValue":x[1]||(x[1]=L=>v.value.data.link=L)},[(d(!0),h(I,null,V(i.value.links,L=>(d(),h("option",{value:L.url},l(L.text),9,za))),256))],512),[[E,v.value.data.link]])])):T("",!0)]}),_:1}),e("div",Ra,[e("button",{class:"btn btn-danger btn-sm rounded-2",onClick:x[2]||(x[2]=F=>m(v.value))},Pa)])])]),_:1})]),_:1},8,["is-visible","node-id","position"]),qa,b(a(A),{id:`state.link.clicked.target.${t.id}`,type:"target",position:a(S).Top,style:N(f.value),class:"handle"},{default:$(()=>[Ha]),_:1},8,["id","position","style"]),b(a(A),{id:`state.link.clicked.${t.id}`,type:"source",position:a(S).Bottom,style:N(n.value),class:"handle"},{default:$(()=>[Ga]),_:1},8,["id","position","style"]),b(a(A),{id:`state.link.not_clicked.${t.id}`,type:"source",position:a(S).Bottom,style:N(r.value),class:"handle"},{default:$(()=>[Qa]),_:1},8,["id","position","style"])]))}},Za={class:"col-lg-7 col-xl-8 col-xxl-9 pe-0"},Ja={class:"d-flex gap-2"},Xa=["href"],Ka=e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"feather feather-arrow-left-circle align-middle me-2"},[e("circle",{cx:"12",cy:"12",r:"10"}),e("polyline",{points:"12 8 8 12 12 16"}),e("line",{x1:"16",y1:"12",x2:"8",y2:"12"})],-1),Ya={class:"h3 mb-3 px-4 py-2 bg-white"},en={class:"d-flex gap-2"},tn={class:"d-flex align-items-center"},sn=e("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"feather feather-save align-middle me-2"},[e("path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z"}),e("polyline",{points:"17 21 17 13 7 13 7 21"}),e("polyline",{points:"7 3 7 8 15 8"})],-1),on={class:"col-lg-5 col-xl-4 col-xxl-3 px-0"},an={__name:"WorkFlow",props:{workflowName:{type:String,default:"Untitled"},workflowId:{type:Number,default:null},saveUrl:{type:String,default:"/automation/workflow/save"},elementsData:{type:Array,default:[]},messages:{type:Array,default:[{argument:3,action:"Message 3",title:"Message 3"}]},messagesOpened:{type:Array,default:[{argument:3,action:"Message 3",title:"Message 3"}]},messagesWithLinks:{type:Array},stages:{type:Array,default:[{argument:"50/50",action:"ABSplit",title:"50/50"}]},tags:{type:Array,default:[{argument:"default",action:"default",title:"default",type:"default"}]},stageActions:{type:Array,default:[{argument:"default",action:"default",title:"default",type:"default"}]},abSplit:{type:Array,default:[{argument:"50/50",action:"ABSplit",title:"50/50"}]},contactLists:{type:Array,default:[{argument:2,action:"contactList 2",title:"contactList 2"}]},waitOptions:{type:Array,default:[{argument:2,action:"contactList 2",title:"contactList 2"}]},backUrl:{type:String,default:"/"}},setup(t){const u={"condition.stage.changed":D(be),"condition.message.opened":D(ke),"condition.run":D(Fe),"condition.link.clicked":D(Le),"action.message.sent":D(ye),"action.wait":D(we),"action.start":D(xe),"action.add.tag":D($e),"action.move.to.list":D(Ce),"action.ab.split":D(Se),"action.change.stage":D(Ne)},s=t,n=w(s.elementsData),r=w(s.workflowName);let f=0;const p=()=>Math.floor(Math.random()*1e4+1)+`_${f++}`,{findNode:o,onConnect:g,nodes:y,edges:_,onNodeClick:v,addEdges:i,addNodes:m,viewport:c,project:x,vueFlowRef:F}=z({nodes:[]});window.messages=s.messages,window.messagesOpened=s.messagesOpened,window.contactLists=s.contactLists,window.waitOptions=s.waitOptions,window.abSplit=s.abSplit,window.stages=s.stages,window.tags=s.tags,window.workflowId=s.workflowId,window.stageActions=s.stageActions,window.messagesWithLinks=s.messagesWithLinks;const j=O=>{O.preventDefault(),O.dataTransfer&&(O.dataTransfer.dropEffect="move")};g(O=>i([O]));const L=O=>{var ie;const H=(ie=O.dataTransfer)==null?void 0:ie.getData("application/vueflow"),{left:X,top:De}=F.value.getBoundingClientRect(),Ie=x({x:O.clientX-X,y:O.clientY-De}),le={id:p(),type:H,position:Ie,label:`${H} node`};m([le]),Ue(()=>{const Z=o(le.id),Ve=ge(()=>Z.dimensions,de=>{de.width>0&&de.height>0&&(Z.position={x:Z.position.x-Z.dimensions.width/2,y:Z.position.y-Z.dimensions.height/2},Ve())},{deep:!0,flush:"post"})})},ee=function(){axios.post(s.saveUrl,{elements:n.value,title:r.value}).then(function(O){window.notyf.open({type:"success",message:"Workflow successfully saved!",duration:"5000",ripple:!0,dismissible:!0})}).catch(function(O){console.log(O),window.notyf.open({type:"warning",message:"Something went wrong!",duration:"5000",ripple:!0,dismissible:!0})})};return(O,H)=>(d(),h("div",{class:"row w-100 h-100 mx-0",onDrop:L},[e("div",Za,[b(a(me),{onDragover:j,modelValue:n.value,"onUpdate:modelValue":H[1]||(H[1]=X=>n.value=X),"node-types":u,"default-edge-options":{type:"smoothstep"}},{default:$(()=>[b(a(he)),b(a(ae),null,{default:$(()=>[e("div",Ja,[e("a",{class:"d-flex align-items-center h4 mb-3 px-4 py-2 text-white bg-info text-decoration-none",href:t.backUrl},[Ka,e("span",null,l(O.$t("Back")),1)],8,Xa),e("h1",Ya,l(r.value),1)])]),_:1}),b(a(ae),{position:a(Ee).BottomRight},{default:$(()=>[e("div",en,[B(e("input",{type:"text",class:"form-control","onUpdate:modelValue":H[0]||(H[0]=X=>r.value=X),style:{"min-width":"200px"}},null,512),[[P,r.value]]),e("button",{class:"btn btn-success text-uppercase px-4",onClick:ee},[e("span",tn,[sn,k(" "+l(O.$t("Save")),1)])])])]),_:1},8,["position"])]),_:1},8,["modelValue"])]),e("div",on,[b(fs)])],32))}},nn={class:"row w-100 h-100 mx-0"},ln={class:"col-lg-12 col-xl-12 col-xxl-12 pe-0"},dn={class:"d-flex gap-2"},rn=["href"],cn=e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"feather feather-arrow-left-circle align-middle me-2"},[e("circle",{cx:"12",cy:"12",r:"10"}),e("polyline",{points:"12 8 8 12 12 16"}),e("line",{x1:"16",y1:"12",x2:"8",y2:"12"})],-1),un={class:"h3 mb-3 px-4 py-2 bg-white"},pn={__name:"ShowWorkFlow",props:{workflowName:{type:String,default:"Untitled"},workflowId:{type:Number,default:null},elementsData:{type:Array,default:[]},messages:{type:Array,default:[{argument:3,action:"Message 3",title:"Message 3"}]},messagesOpened:{type:Array,default:[{argument:3,action:"Message 3",title:"Message 3"}]},messagesWithLinks:{type:Array},stages:{type:Array,default:[{argument:"50/50",action:"ABSplit",title:"50/50"}]},tags:{type:Array,default:[{argument:"default",action:"default",title:"default",type:"default"}]},stageActions:{type:Array,default:[{argument:"default",action:"default",title:"default",type:"default"}]},abSplit:{type:Array,default:[{argument:"50/50",action:"ABSplit",title:"50/50"}]},contactLists:{type:Array,default:[{argument:2,action:"contactList 2",title:"contactList 2"}]},waitOptions:{type:Array,default:[{argument:2,action:"contactList 2",title:"contactList 2"}]},backUrl:{type:String,default:"/"}},setup(t){const u={"condition.stage.changed":D(be),"condition.message.opened":D(ke),"condition.run":D(Fe),"condition.link.clicked":D(Le),"action.message.sent":D(ye),"action.wait":D(we),"action.start":D(xe),"action.add.tag":D($e),"action.move.to.list":D(Ce),"action.ab.split":D(Se),"action.change.stage":D(Ne)},s=t,n=w(s.elementsData),r=w(s.workflowName);return z({nodes:[]}),window.messages=s.messages,window.messagesOpened=s.messagesOpened,window.contactLists=s.contactLists,window.waitOptions=s.waitOptions,window.abSplit=s.abSplit,window.stages=s.stages,window.tags=s.tags,window.workflowId=s.workflowId,window.stageActions=s.stageActions,window.messagesWithLinks=s.messagesWithLinks,(f,p)=>(d(),h("div",nn,[e("div",ln,[b(a(me),{modelValue:n.value,"onUpdate:modelValue":p[0]||(p[0]=o=>n.value=o),"node-types":u},{default:$(()=>[b(a(he)),b(a(ae),null,{default:$(()=>[e("div",dn,[e("a",{class:"d-flex align-items-center h4 mb-3 px-4 py-2 text-white bg-info text-decoration-none",href:t.backUrl},[cn,e("span",null,l(f.$t("Back")),1)],8,rn),e("h1",un,l(r.value),1)])]),_:1})]),_:1},8,["modelValue"])])]))}},hn={class:"row p-3"},mn={class:"d-flex justify-content-between"},gn=["onClick"],fn=e("i",{class:"align-middle fas fa-fw fa-minus-circle"},null,-1),_n=[fn],vn=e("i",{class:"align-middle ms-2 fas fa-fw fa-plus-circle"},null,-1),bn=[vn],yn={class:"col-md-4"},wn={class:"mb-3"},xn=e("label",{for:"stage_name",class:"form-label"},"Stage name",-1),$n=["name","onUpdate:modelValue"],kn={class:"col-md-5"},Cn={class:"mb-3"},Sn=e("label",{for:"stage_description",class:"form-label"},"Stage description",-1),Fn=["name","onUpdate:modelValue"],Nn={class:"col-md-3"},Ln={class:"d-flex flex-column mb-3"},Bn=e("label",{for:"stage_color",class:"form-label"},"Stage color",-1),Tn={class:"d-flex align-items-center"},An=["name","onUpdate:modelValue"],jn={class:"fs-4 ms-3"},Mn=["name","value"],Dn={__name:"PipelineStageRepeater",props:{stages:{type:Array}},setup(t){const u=t,s=w([{name:"Default",description:"This is some description",color:"#366dc7"}]);G(()=>{u.stages.length&&(s.value=u.stages)});const n=()=>{s.value.push({name:"",description:"",color:"#366dc7"})},r=f=>{const p=s.value.indexOf(f);p>-1&&s.value.splice(p,1)};return(f,p)=>(d(),R(ze,{name:"stage-list",appear:""},{default:$(()=>[(d(!0),h(I,null,V(s.value,(o,g)=>(d(),h("div",{class:"d-flex flex-column bg-light mb-3 rounded-3",key:g},[e("div",hn,[e("div",mn,[e("h6",null,"#"+l(g+1)+" - "+l(o.name),1),e("div",null,[B(e("button",{class:"btn text-danger btn-lg border-0 p-0",onClick:K(y=>r(o),["prevent"]),title:"Remove Stage"},_n,8,gn),[[re,g||!g&&s.value.length>1]]),B(e("button",{class:"btn text-info btn-lg border-0 p-0",title:"Add New Stage",onClick:K(n,["prevent"])},bn,512),[[re,g===s.value.length-1]])])]),e("div",yn,[e("div",wn,[xn,B(e("input",{class:"form-control",name:`pipeline_stages[${g}][name]`,placeholder:"Enter stage name",type:"text",id:"stage_name","onUpdate:modelValue":y=>o.name=y},null,8,$n),[[P,o.name]])])]),e("div",kn,[e("div",Cn,[Sn,B(e("input",{class:"form-control",name:`pipeline_stages[${g}][description]`,placeholder:"Enter stage description",type:"text",id:"stage_description","onUpdate:modelValue":y=>o.description=y},null,8,Fn),[[P,o.description]])])]),e("div",Nn,[e("div",Ln,[Bn,e("div",Tn,[B(e("input",{type:"color",name:`pipeline_stages[${g}][color]`,id:"stage_color","onUpdate:modelValue":y=>o.color=y,style:{height:"30px"}},null,8,An),[[P,o.color]]),e("span",jn,l(o.color),1)])])]),e("input",{type:"hidden",name:`pipeline_stages[${g}][id]`,value:o.id},null,8,Mn)])]))),128))]),_:1}))}},se=(t,u)=>{const s=t.__vccOpts||t;for(const[n,r]of u)s[n]=r;return s},In={class:"mb-3 position-relative d-flex flex-column align-items-center"},Vn={for:"body",class:"form-label align-self-start"},On=["name"],Un={class:"placeholder-buttons bg-light"},En={class:"d-flex gap-1"},zn={key:0,class:"invalid-feedback"},Rn={__name:"TextArea",props:{errorMessage:{type:String,required:!0},messageBody:{type:String},name:{type:String,required:!0}},setup(t){const u=t,s=w(""),n=w(null);G(()=>{s.value=u.messageBody});const r=(f,p)=>{f.preventDefault();const o=n.value,g=o.selectionStart,y=`[[${p}]]`;s.value=`${s.value.substring(0,g)} ${y}${s.value.substring(g)}`,o.focus()};return(f,p)=>(d(),h("div",In,[e("label",Vn,l(f.$t("Message Body")),1),B(e("textarea",{ref_key:"textarea",ref:n,"onUpdate:modelValue":p[0]||(p[0]=o=>s.value=o),name:t.name,id:"body",class:q([{"is-invalid":t.errorMessage},"form-control"]),cols:"10",rows:"10"},`
         `,10,On),[[P,s.value]]),e("div",Un,[e("span",null,l(f.$t("Add message placeholders"))+":",1),e("div",En,[e("button",{onClick:p[1]||(p[1]=o=>r(o,"firstname")),class:"btn btn-sm btn-info"},l(f.$t("Firstname")),1),e("button",{onClick:p[2]||(p[2]=o=>r(o,"lastname")),class:"btn btn-sm btn-info"},l(f.$t("Lastname")),1),e("button",{onClick:p[3]||(p[3]=o=>r(o,"email")),class:"btn btn-sm btn-info"},l(f.$t("Email")),1)])]),t.errorMessage?(d(),h("small",zn,l(t.errorMessage),1)):T("",!0)]))}},Wn=se(Rn,[["__scopeId","data-v-0c41e744"]]),Pn={class:"mb-3"},qn={class:"d-block form-label"},Hn=["name","value"],te={__name:"MultiSelectList",props:{selected:{type:Array},options:{type:Array,required:!0},name:{type:String},label:{type:String},placeholder:{type:String},labelBy:{type:String},trackBy:{type:String},syncTagsUrl:{type:String},modelId:{type:Number||String}},setup(t){const u=t,s=w([]);G(()=>{u.selected.length&&(s.value=u.selected)});function n(r,f){if(u.syncTagsUrl){let p=new FormData;p.append("modelId",u.modelId);for(let o=0;o<s.value.length;o++)p.append("tags[]",s.value[o].id);axios.post(u.syncTagsUrl,p,{headers:{"Content-Type":"application/json"}}).then(o=>{o.status===200&&window.notyf.open({type:"success",message:"Tags synced!",duration:"2500",ripple:!0,position:"bottom right",dismissible:!0})}).catch(o=>{console.log(o.message),o.response.status===422&&(errors.value=o.response.data.errors)})}}return(r,f)=>(d(),h("div",Pn,[e("span",qn,l(t.label),1),b(a(Re),{modelValue:s.value,"onUpdate:modelValue":f[0]||(f[0]=p=>s.value=p),options:t.options,multiple:!0,"close-on-select":!1,placeholder:t.placeholder,label:t.labelBy,"track-by":t.trackBy,onRemove:n,onSelect:n},null,8,["modelValue","options","placeholder","label","track-by"]),(d(!0),h(I,null,V(s.value,p=>(d(),h("input",{type:"hidden",name:t.name,value:p.id,key:p.id},null,8,Hn))),128))]))}},Gn={for:"note",class:"form-label fw-bold"},Qn={class:"d-flex align-items-center"},Zn=e("i",{class:"align-middle me-2 fas fa-fw fa-clipboard-list"},null,-1),Jn=["placeholder"],Xn={key:0,class:"invalid-feedback"},Kn=e("option",{value:"Note"},"Note",-1),Yn=e("option",{value:"Call Accepted"},"Call Accepted",-1),el=e("option",{value:"Call Declined"},"Call Declined",-1),tl=e("option",{value:"Meeting"},"Meeting",-1),sl=[Kn,Yn,el,tl],ol=["disabled"],al=e("hr",null,null,-1),nl={class:"notes-container"},ll={class:"d-flex flex-column"},il={class:"mb-1"},dl={key:0,style:{"font-size":"11px"}},rl={style:{"font-size":"11px"}},cl={class:"d-flex gap-1"},ul=["onClick"],pl=e("i",{class:"align-middle me-2 fas fa-fw fa-trash text-danger"},null,-1),hl=[pl],Be={__name:"Notes",props:{url:{type:String},deleteUrl:{type:String},fetchUrl:{type:String},leadId:{type:Number}},setup(t){const u=t,s=w([]),n=w(""),r=w("Note"),f=w({}),p=w(!1);G(()=>{o()});function o(){axios.get(u.fetchUrl,{params:{lead_id:u.leadId}}).then(i=>{i.status===200&&(s.value=[...i.data.leadNotes])}).catch(i=>{console.log(i.message)})}const g=()=>{p.value=!0;let i=new FormData;i.append("note",n.value),i.append("note_type",r.value),i.append("lead_id",u.leadId),axios.post(u.url,i,{headers:{"Content-Type":"application/json"}}).then(m=>{m.status===200&&(s.value=[...s.value,m.data.leadNote],n.value="",p.value=!1,f.value={},window.notyf.open({type:"success",message:"Note saved!",duration:"2500",ripple:!0,position:"bottom right",dismissible:!0}))}).catch(m=>{console.log(m.message),m.response.status===422&&(f.value=m.response.data.errors,p.value=!1)})},y=i=>{axios.delete(u.deleteUrl.replace(":noteId",i)).then(m=>{m.status===200&&(s.value=s.value.filter(c=>c.id!==i),window.notyf.open({type:"success",message:"Note deleted!",duration:"2500",ripple:!0,position:"bottom right",dismissible:!0}))}).catch(m=>{console.log(m.message),window.notyf.open({type:"danger",message:m.message,duration:"2500",ripple:!0,position:"bottom right",dismissible:!0})})},_=i=>Object.keys(i).length!==0,v=i=>{let m=new Date(i*1e3);return new Intl.DateTimeFormat("default",{year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric"}).format(m)};return(i,m)=>(d(),h(I,null,[e("form",{onSubmit:K(g,["prevent"]),id:"notes-form",ref:"notesForm"},[e("div",null,[e("label",Gn,[e("span",Qn,[Zn,k(l(i.$t("Notes")),1)])]),B(e("textarea",{id:"note","onUpdate:modelValue":m[0]||(m[0]=c=>n.value=c),class:q(["form-control mb-2",{"is-invalid":_(f.value)}]),name:"note",placeholder:i.$t("Note")},null,10,Jn),[[P,n.value]]),f.value&&f.value.note?(d(),h("small",Xn,l(f.value.note[0]),1)):T("",!0),B(e("select",{name:"note_type","onUpdate:modelValue":m[1]||(m[1]=c=>r.value=c),id:"note_type",class:"form-select mt-2"},sl,512),[[E,r.value]]),e("button",{type:"submit",class:"btn btn-success mt-2",disabled:p.value},"Add Note",8,ol)])],544),al,e("div",nl,[(d(!0),h(I,null,V(s.value,c=>(d(),h("div",{key:c.id,class:"note mb-3"},[e("div",ll,[e("p",il,l(c.note),1),e("span",{class:q(c.type=="Call Declined"?"text-danger":"text-success")},l(c.type),3),c.user?(d(),h("span",dl,[e("em",null,[e("strong",null,l(c.user.full_name),1)])])):T("",!0),e("span",rl,[e("strong",null,[e("em",null,l(v(c.created_at)),1)])])]),e("div",cl,[e("span",{class:"delete-icon",onClick:x=>y(c.id)},hl,8,ul)])]))),128))])],64))}},ml={for:"note",class:"form-label fw-bold"},gl={class:"d-flex align-items-center"},fl=e("i",{class:"align-middle me-2 fas fa-fw fa-clipboard-list"},null,-1),_l={class:"form-group mb-3"},vl=e("label",{for:"start_date"},"Typ",-1),bl=e("option",{value:"Call"},"Call",-1),yl=e("option",{value:"Meeting"},"Meeting",-1),wl=e("option",{value:"E-Mail"},"E-Mail",-1),xl=e("option",{value:"Task"},"Task",-1),$l=[bl,yl,wl,xl],kl={class:"form-group mb-3"},Cl=e("label",{for:"start_date"},"Start Datum",-1),Sl={key:0,class:"invalid-feedback"},Fl={class:"form-group mb-3"},Nl=e("label",{for:"end_date"},"Ende Datum",-1),Ll={class:"form-group"},Bl=e("label",{for:"start_date"},"Beschreibung",-1),Tl={key:0,class:"invalid-feedback"},Al={class:"d-flex gap-2 mt-2"},jl=["disabled"],Ml=["disabled"],Dl=e("i",{class:"align-middle me-1 fas fa-fw fa-clock"},null,-1),Il=e("hr",null,null,-1),Vl={class:"d-flex flex-column"},Ol={class:"d-flex flex-column"},Ul={class:"mb-1"},El={key:0,style:{"font-size":"11px"}},zl={style:{"font-size":"11px"}},Rl={class:"d-flex gap-1"},Wl=["onClick"],Pl=e("i",{class:"align-middle me-2 fas fa-fw fa-trash text-danger"},null,-1),ql=[Pl],Te={__name:"Activities",props:{url:{type:String},fetchUrl:{type:String},deleteUrl:{type:String},leadId:{type:Number},leadActivities:{type:Array}},setup(t){const u=t,s=w([]),n=w(""),r=w("Call"),f=w(new Date(new Date().getTime()+24*60*60*1e3).toISOString().slice(0,16).slice(0,11)+"00:00"),p=w(""),o=w({}),g=w(!1);G(()=>{y()});function y(){axios.get(u.fetchUrl,{params:{lead_id:u.leadId}}).then(c=>{c.status===200&&(s.value=[...c.data.leadActivities])}).catch(c=>{console.log(c.message)})}const _=()=>{g.value=!0;const c=new Date;c.setTime(c.getTime()+72*60*60*1e3);const x=c.toISOString().slice(0,16);let F=new FormData;F.append("description","Wiedervorlage"),F.append("activity_type","Call"),F.append("activity_start_date",x),F.append("activity_end_date",""),F.append("lead_id",u.leadId),axios.post(u.url,F,{headers:{"Content-Type":"application/json"}}).then(j=>{j.status===200&&(s.value=[...s.value,j.data.leadActivity],g.value=!1,window.notyf.open({type:"success",message:"Wiedervorlage in 3 Tagen erstellt!",duration:"2500",ripple:!0,position:"bottom right",dismissible:!0}))}).catch(j=>{j.response.status===422&&(o.value=j.response.data.errors,console.log(j.response.data.errors)),g.value=!1})},v=()=>{g.value=!0;let c=new FormData;c.append("description",n.value),c.append("activity_type",r.value),c.append("activity_start_date",f.value),c.append("activity_end_date",p.value),c.append("lead_id",u.leadId),axios.post(u.url,c,{headers:{"Content-Type":"application/json"}}).then(x=>{x.status===200&&(s.value=[...s.value,x.data.leadActivity],n.value="",g.value=!1,o.value={},window.notyf.open({type:"success",message:"Activity saved!",duration:"2500",ripple:!0,position:"bottom right",dismissible:!0}))}).catch(x=>{x.response.status===422&&(o.value=x.response.data.errors,console.log(x.response.data.errors),g.value=!1)})},i=c=>{axios.delete(u.deleteUrl.replace(":activityId",c)).then(x=>{x.status===200&&(s.value=s.value.filter(F=>F.id!==c),window.notyf.open({type:"success",message:"Activity deleted!",duration:"2500",ripple:!0,position:"bottom right",dismissible:!0}))}).catch(x=>{console.log(x.message),window.notyf.open({type:"danger",message:x.message,duration:"2500",ripple:!0,position:"bottom right",dismissible:!0})})};function m(c){const x=new Date(c);let F=x.getUTCDate().toString().padStart(2,"0"),j=(x.getUTCMonth()+1).toString().padStart(2,"0"),L=x.getUTCFullYear(),ee=x.getUTCHours().toString().padStart(2,"0"),O=x.getUTCMinutes().toString().padStart(2,"0");return`${F}.${j}.${L} ${ee}:${O}`}return(c,x)=>{var F,j;return d(),h(I,null,[e("form",{onSubmit:K(v,["prevent"]),id:"activities-form",ref:"activitiesForm"},[e("div",null,[e("label",ml,[e("span",gl,[fl,k(l(c.$t("Activities")),1)])]),e("div",_l,[vl,B(e("select",{name:"activity_type","onUpdate:modelValue":x[0]||(x[0]=L=>r.value=L),id:"note_type",class:"form-select mt-2"},$l,512),[[E,r.value]])]),e("div",kl,[Cl,B(e("input",{type:"datetime-local",class:q(["form-control",{"is-invalid":(F=o.value)==null?void 0:F.activity_start_date}]),id:"activity_start_date","onUpdate:modelValue":x[1]||(x[1]=L=>f.value=L)},null,2),[[P,f.value]]),o.value&&o.value.activity_start_date?(d(),h("small",Sl,l(o.value.activity_start_date[0]),1)):T("",!0)]),e("div",Fl,[Nl,B(e("input",{type:"datetime-local",class:"form-control",id:"activity_end_date","onUpdate:modelValue":x[2]||(x[2]=L=>p.value=L)},null,512),[[P,p.value]])]),e("div",Ll,[Bl,B(e("textarea",{id:"activity","onUpdate:modelValue":x[3]||(x[3]=L=>n.value=L),class:q(["form-control",{"is-invalid":(j=o.value)==null?void 0:j.description}]),name:"activity"},null,2),[[P,n.value]]),o.value&&o.value.description?(d(),h("small",Tl,l(o.value.description[0]),1)):T("",!0)]),e("div",Al,[e("button",{type:"submit",class:"btn btn-success",disabled:g.value},"Add Activity",8,jl),e("button",{type:"button",class:"btn btn-warning",onClick:_,disabled:g.value},[Dl,k("Auf Wiedervorlage legen ")],8,Ml)])])],544),Il,e("div",Vl,[(d(!0),h(I,null,V(s.value,L=>(d(),h("div",{key:L.id,class:"note mb-3"},[e("div",Ol,[e("p",Ul,l(L.description),1),e("span",null,l(L.type),1),L.user?(d(),h("span",El,[e("em",null,[e("strong",null,l(L.user.full_name),1)])])):T("",!0),e("span",zl,[k("Start Datum: "),e("strong",null,[e("em",null,l(m(L.start_date)),1)])])]),e("div",Rl,[e("span",{class:"delete-icon",onClick:ee=>i(L.id)},ql,8,Wl)])]))),128))])],64)}}},Hl={props:["chartData","chartType"],mounted(){this.createChart()},methods:{createChart(){const t=this.$refs.chart.getContext("2d");new We(t,{type:this.chartType,data:{labels:this.chartData.labels,datasets:[{label:"Opens",data:this.chartData.opens,fill:this.chartType==="line",backgroundColor:this.chartType==="bar"?"#3B82EC":"transparent",borderColor:"#3B82EC",tension:this.chartType==="line"?.4:0},{label:"Clicks",data:this.chartData.clicks,fill:this.chartType==="line",backgroundColor:this.chartType==="bar"?"#E8EAED":"transparent",borderColor:"#E8EAED",borderDash:this.chartType==="line"?[4,4]:[],tension:this.chartType==="line"?.4:0}]},options:{maintainAspectRatio:!1,plugins:{legend:{display:!0},tooltip:{intersect:!1},filler:{propagate:!1}},interaction:{intersect:!0},scales:{x:{grid:{color:"rgba(0,0,0,0.05)"},ticks:{maxTicksLimit:15}},y:{ticks:{stepSize:500},display:!0,grid:{color:"rgba(0,0,0,0)",borderColor:"rgba(0,0,0,0)",tickColor:"#fff"},borderDash:[5,5]}}}})}}},Gl={ref:"chart",width:"749",height:"350"};function Ql(t,u,s,n,r,f){return d(),h("div",null,[e("canvas",Gl,null,512)])}const Zl=se(Hl,[["render",Ql]]);function Jl(t,u){const s=w([]),n=w(20),r=J("data",{}),f=C(()=>t.stage&&t.stage.color?{"border-top":`8px solid ${t.stage.color}`}:{}),p=C(()=>t.stage&&t.stage.name?`${t.stage.name} (${t.leadsCount[t.stage.id]})`:`${u("Leads")} (${t.leadsCount})`),o=C(()=>{const i=Object.keys(t.stage).length===0?"leads":`stage-${t.stage.id}`,m=Object.keys(t.stage).length!==0?t.stage.id:0;return{id:i,dataStageId:m}}),g=C(()=>Object.keys(t.stage).length===0?t.leads:t.leads[t.stage.id]),y=C(()=>{var m;if(r.isGlobalSearching&&r.globalSearchQuery){const c=t.stage.id||0;return(((m=r.globalSearchResults)==null?void 0:m[c])||[]).slice(0,n.value)}return(s.value.length>0?s.value:g.value).slice(0,n.value)}),_=()=>{n.value+=10},v=async i=>{if(i.target.value.length===0){n.value=20,s.value=[];return}const m=t.campaign.id,c=t.campaign.pipeline.id,x=t.stage.id||0,F=i.target.value.toLowerCase().trim();try{const{data:{searchResults:j}}=await Y.get(`/sales/campaign/${m}/pipeline/${c}/stage/${x}/search`,{params:{query:F}});s.value=j}catch(j){console.error("Error fetching data:",j)}};return ge(()=>r.globalSearchQuery,i=>{i&&i.length>0&&(s.value=[])}),{cardStyle:f,stageTitle:p,stageIdAttributes:o,getLeads:y,loadMoreLeads:_,handleSearch:v}}const Xl=["width","height"],Kl=e("circle",{cx:"11",cy:"11",r:"8"},null,-1),Yl=e("line",{x1:"21",y1:"21",x2:"16.65",y2:"16.65"},null,-1),ei=[Kl,Yl],Ae={__name:"Search",props:{width:{type:Number,default:15},height:{type:Number,default:15}},setup(t){return(u,s)=>(d(),h("svg",{width:t.width,height:t.height,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},ei,8,Xl))}},ti={class:"mb-3"},si={for:"from_email",class:"form-label"},oi={value:"",selected:""},ai=["value"],ni={key:0,class:"invalid-feedback"},li={class:"mb-3"},ii={for:"subject",class:"form-label"},di=["placeholder"],ri={key:0,class:"invalid-feedback"},ci={class:"mb-3"},ui={for:"body",class:"form-label"},pi={key:0,class:"invalid-feedback"},hi={class:"my-3"},mi=["disabled"],gi={class:"d-flex align-items-center justify-content-center"},fi={key:0,class:"spinner spinner-border spinner-border-sm text-light me-2",role:"status"},_i=e("span",{class:"visually-hidden"},"Loading...",-1),vi=[_i],bi={__name:"SendEmailForm",props:{leadId:{type:Number,required:!0}},setup(t){const u=t,s=w(null),n=w({}),r=w(!1),{emails:f,route:{messages:p}}=J("data"),o=()=>{let g=new FormData(s.value);r.value=!0,axios.post(p.send.replace(":leadId",u.leadId),g,{headers:{"Content-Type":"application/json"}}).then(y=>{y.status===200&&(r.value=!1,n.value={},window.notyf.open({type:"success",message:y.data.message,duration:"2500",ripple:!0,position:"bottom right",dismissible:!0}),s.value.reset())}).catch(y=>{y.response.status===422&&(n.value=y.response.data.errors,r.value=!1)})};return(g,y)=>{var _,v,i;return d(),h("form",{onSubmit:K(o,["prevent"]),ref_key:"form",ref:s},[e("div",ti,[e("label",si,l(g.$t("From")),1),e("select",{id:"from_email",name:"from_email",class:q(["form-control",{"is-invalid":(_=n.value)==null?void 0:_.from_email}])},[e("option",oi,l(g.$t("Select")),1),(d(!0),h(I,null,V(a(f),(m,c)=>(d(),h("option",{value:c,key:c},l(m),9,ai))),128))],2),n.value&&n.value.from_email?(d(),h("small",ni,l(n.value.from_email[0]),1)):T("",!0)]),e("div",li,[e("label",ii,l(g.$t("Subject")),1),e("input",{type:"text",name:"subject",class:q(["form-control",{"is-invalid":(v=n.value)==null?void 0:v.subject}]),id:"subject",placeholder:g.$t("Enter subject")},null,10,di),n.value&&n.value.subject?(d(),h("small",ri,l(n.value.subject[0]),1)):T("",!0)]),e("div",ci,[e("label",ui,l(g.$t("Message")),1),e("textarea",{name:"body",id:"body",class:q(["form-control",{"is-invalid":(i=n.value)==null?void 0:i.body}]),rows:"4"},null,2),n.value&&n.value.body?(d(),h("small",pi,l(n.value.body[0]),1)):T("",!0)]),e("div",hi,[e("button",{type:"submit",class:"btn btn-success me-2 w-100",disabled:r.value},[e("span",gi,[r.value?(d(),h("span",fi,vi)):T("",!0),k(l(g.$t("Send Message")),1)])],8,mi)])],544)}}},yi={class:"form-group mb-3"},wi=e("label",{for:"stage-select-select"},"Move Lead to stage:",-1),xi=e("option",{value:"",disabled:""},"Select an option",-1),$i=["value"],ki={__name:"RegularSelect",props:{modelId:{type:Number,required:!1},options:{type:Array,required:!0},transformOptions:{type:Boolean,required:!1},selectedOption:{type:Number,required:!1}},setup(t){const u=t,s=J("data"),n=w(u.selectedOption),{t:r}=ne(),f=C(()=>u.transformOptions?u.options.map(o=>({id:o.id,name:o.name})):u.options),p=async()=>{if(n.value)try{(await axios.post(s.route.leads.leadStageChange.replace(":leadId",u.modelId),{stage_id:n.value})).status===200&&window.notyf.open({type:"success",message:r("Lead moved to another stage!"),duration:"2500",ripple:!0,position:"bottom right",dismissible:!0})}catch(o){console.error("Error fetching data:",o)}};return(o,g)=>(d(),h("div",yi,[wi,B(e("select",{id:"stage-select",class:"form-select mt-2","onUpdate:modelValue":g[0]||(g[0]=y=>n.value=y),onChange:p},[xi,(d(!0),h(I,null,V(f.value,y=>(d(),h("option",{key:y.id,value:y.id},l(y.name),9,$i))),128))],544),[[E,n.value]])]))}},Q=t=>(fe("data-v-35c01996"),t=t(),_e(),t),Ci={class:"offcanvas-header bg-light border-bottom"},Si={class:"offcanvas-title",id:"offcanvasRightLabel"},Fi={class:"d-flex align-items-center"},Ni=Q(()=>e("svg",{class:"me-2 flex-shrink-0",width:"24",height:"24",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M17.982 18.725A7.488 7.488 0 0012 15.75a7.488 7.488 0 00-5.982 2.975m11.963 0a9 9 0 10-11.963 0m11.963 0A8.966 8.966 0 0112 21a8.966 8.966 0 01-5.982-2.275M15 9.75a3 3 0 11-6 0 3 3 0 016 0z"})],-1)),Li={class:"nav nav-tabs",id:"lead-tabs",role:"tablist",style:{"font-size":"12px"}},Bi={class:"nav-item",role:"presentation"},Ti={class:"nav-link active text-uppercase btn-tab",id:"profile-tab","data-bs-toggle":"tab","data-bs-target":"#profile-tab-pane",type:"button",role:"tab","aria-controls":"profile-tab-pane","aria-selected":"true"},Ai={class:"nav-item",role:"presentation"},ji={class:"nav-link text-uppercase btn-tab",id:"notes-tab","data-bs-toggle":"tab","data-bs-target":"#notes-tab-pane",type:"button",role:"tab","aria-controls":"notes-tab-pane","aria-selected":"false"},Mi={class:"nav-item",role:"presentation"},Di={class:"nav-link text-uppercase btn-tab",id:"activities-tab","data-bs-toggle":"tab","data-bs-target":"#activities-tab-pane",type:"button",role:"tab","aria-controls":"activities-tab-pane","aria-selected":"false"},Ii={class:"nav-item",role:"presentation"},Vi={class:"nav-link text-uppercase btn-tab",id:"profile-tab","data-bs-toggle":"tab","data-bs-target":"#message-tab-pane",type:"button",role:"tab","aria-controls":"message-tab-pane","aria-selected":"false"},Oi={class:"tab-content",id:"myTabContent",style:{"overflow-y":"auto"}},Ui={class:"tab-pane fade show active",id:"profile-tab-pane",role:"tabpanel","aria-labelledby":"profile-tab",tabindex:"0"},Ei={class:"offcanvas-body"},zi={class:"row mb-4 data-list"},Ri={class:"col-4 col-xxl-3 mb-0"},Wi={class:"col-8 col-xxl-9 mb-0"},Pi={class:"mb-1"},qi={class:"col-4 col-xxl-3 mb-0"},Hi={class:"col-8 col-xxl-9 mb-0"},Gi={class:"mb-1"},Qi={class:"col-4 col-xxl-3 mb-0"},Zi={class:"col-8 col-xxl-9 mb-0"},Ji={class:"mb-1"},Xi={class:"col-4 col-xxl-3 mb-0"},Ki={class:"col-8 col-xxl-9 mb-0"},Yi={class:"mb-1"},ed={class:"col-4 col-xxl-3 mb-0"},td={class:"col-8 col-xxl-9 mb-0"},sd={class:"mb-1"},od={class:"col-4 col-xxl-3 mb-0"},ad={class:"col-8 col-xxl-9 mb-0"},nd={class:"mb-1"},ld={class:"col-4 col-xxl-3 mb-0"},id={class:"col-8 col-xxl-9 mb-0"},dd={class:"mb-1"},rd={class:"col-4 col-xxl-3 mb-0"},cd={class:"col-8 col-xxl-9 mb-0"},ud={class:"mb-1"},pd={class:"col-4 col-xxl-3 mb-0"},hd={class:"col-8 col-xxl-9 mb-0"},md={class:"mb-1"},gd={class:"col-4 col-xxl-3 mb-0"},fd={class:"col-8 col-xxl-9 mb-0"},_d={class:"mb-1"},vd={class:"col-4 col-xxl-3 mb-0"},bd={class:"col-8 col-xxl-9 mb-0"},yd={class:"mb-1"},wd={class:"col-4 col-xxl-3 mb-0"},xd={class:"col-8 col-xxl-9 mb-0"},$d={class:"mb-1"},kd={class:"col-4 col-xxl-3 mb-0"},Cd={class:"col-8 col-xxl-9 mb-0"},Sd={class:"mb-1"},Fd={class:"col-4 col-xxl-3 mb-0"},Nd={class:"col-8 col-xxl-9 mb-0"},Ld={class:"mb-1"},Bd={key:0,class:"col-4 col-xxl-3 mb-0"},Td={key:1,class:"col-8 col-xxl-9 mb-0"},Ad={class:"mb-1"},jd=["href"],Md={class:"mb-4"},Dd={class:"d-flex fw-bold align-items-center mb-1"},Id=Q(()=>e("i",{class:"align-middle me-2 fas fa-fw fa-random"},null,-1)),Vd=Q(()=>e("hr",null,null,-1)),Od={class:"mb-4"},Ud={class:"d-flex fw-bold align-items-center mb-2"},Ed=Q(()=>e("svg",{class:"me-2",width:"18",height:"18",viewBox:"0 0 24 24",fill:"currentColor"},[e("path",{"fill-rule":"evenodd",d:"M5.25 2.25a3 3 0 00-3 3v4.318a3 3 0 00.879 2.121l9.58 9.581c.92.92 2.39 1.186 3.548.428a18.849 18.849 0 005.441-5.44c.758-1.16.492-2.629-.428-3.548l-9.58-9.581a3 3 0 00-2.122-.879H5.25zM6.375 7.5a1.125 1.125 0 100-2.25 1.125 1.125 0 000 2.25z","clip-rule":"evenodd"})],-1)),zd={class:"mb-4"},Rd={class:"d-flex fw-bold align-items-center mb-2"},Wd=Q(()=>e("svg",{class:"me-2",width:"18",height:"18",viewBox:"0 0 24 24",fill:"currentColor"},[e("path",{"fill-rule":"evenodd",d:"M5.25 2.25a3 3 0 00-3 3v4.318a3 3 0 00.879 2.121l9.58 9.581c.92.92 2.39 1.186 3.548.428a18.849 18.849 0 005.441-5.44c.758-1.16.492-2.629-.428-3.548l-9.58-9.581a3 3 0 00-2.122-.879H5.25zM6.375 7.5a1.125 1.125 0 100-2.25 1.125 1.125 0 000 2.25z","clip-rule":"evenodd"})],-1)),Pd={class:"mb-4"},qd={class:"d-flex fw-bold align-items-center mb-2"},Hd=Q(()=>e("svg",{class:"me-2",width:"18",height:"18",viewBox:"0 0 24 24",fill:"currentColor"},[e("path",{"fill-rule":"evenodd",d:"M5.25 2.25a3 3 0 00-3 3v4.318a3 3 0 00.879 2.121l9.58 9.581c.92.92 2.39 1.186 3.548.428a18.849 18.849 0 005.441-5.44c.758-1.16.492-2.629-.428-3.548l-9.58-9.581a3 3 0 00-2.122-.879H5.25zM6.375 7.5a1.125 1.125 0 100-2.25 1.125 1.125 0 000 2.25z","clip-rule":"evenodd"})],-1)),Gd=Q(()=>e("div",{style:{height:"50px","margin-bottom":"50px"}},null,-1)),Qd={class:"tab-pane fade",id:"notes-tab-pane",role:"tabpanel","aria-labelledby":"notes-tab",tabindex:"0"},Zd={class:"offcanvas-body"},Jd={class:"tab-pane fade",id:"activities-tab-pane",role:"tabpanel","aria-labelledby":"activities-tab",tabindex:"0"},Xd={class:"offcanvas-body"},Kd={class:"tab-pane fade",id:"message-tab-pane",role:"tabpanel","aria-labelledby":"message-tab",tabindex:"0"},Yd={class:"offcanvas-body"},er={__name:"OffCanvas",props:{modelValue:{type:Boolean,default:!1},lead:{type:Object,required:!0},routes:{type:Object,required:!0},tags:{type:Array,required:!0},lists:{type:Array,required:!0}},emits:["update:modelValue"],setup(t,{emit:u}){const s=t,n=u,r=w(null);G(()=>{const o=document.getElementById("offcanvasRight");new bootstrap.Offcanvas(o).show()}),Pe(()=>{const o=document.getElementById("offcanvasRight"),g=new bootstrap.Offcanvas(o);r.value.addEventListener("hidden.bs.offcanvas",()=>{n("update:modelValue",!1)}),g.hide()}),qe(r,()=>{n("update:modelValue",!1)});const f=C(()=>{var o,g;return`${((o=s.lead.contact)==null?void 0:o.firstname)??""} ${((g=s.lead.contact)==null?void 0:g.lastname)??""}`}),p=J("data");return(o,g)=>t.modelValue?(d(),h("div",{key:0,ref_key:"offCanvasRef",ref:r,class:"offcanvas offcanvas-end",tabindex:"-1",id:"offcanvasRight","aria-labelledby":"offcanvasRightLabel"},[e("div",Ci,[e("h5",Si,[e("span",Fi,[Ni,k(" "+l(o.$t("User"))+": "+l(f.value),1)])]),e("button",{onClick:g[0]||(g[0]=y=>n("update:modelValue",!1)),type:"button",class:"btn-close","data-bs-dismiss":"offcanvas","aria-label":"Close"})]),e("ul",Li,[e("li",Bi,[e("button",Ti,l(o.$t("Profile")),1)]),e("li",Ai,[e("button",ji,l(o.$t("Notes")),1)]),e("li",Mi,[e("button",Di,l(o.$t("Activities")),1)]),e("li",Ii,[e("button",Vi,l(o.$t("Send E-Mail")),1)])]),e("div",Oi,[e("div",Ui,[e("div",Ei,[e("dl",zi,[e("dt",Ri,[e("strong",null,l(o.$t("User ID"))+":",1)]),e("dd",Wi,[e("p",Pi,l(t.lead.contact.id),1)]),e("dt",qi,[e("strong",null,l(o.$t("Firstname"))+":",1)]),e("dd",Hi,[e("p",Gi,l(t.lead.contact.firstname),1)]),e("dt",Qi,[e("strong",null,l(o.$t("Lastname"))+":",1)]),e("dd",Zi,[e("p",Ji,l(t.lead.contact.lastname),1)]),e("dt",Xi,[e("strong",null,l(o.$t("Job title"))+":",1)]),e("dd",Ki,[e("p",Yi,l(t.lead.contact.job_title),1)]),e("dt",ed,[e("strong",null,l(o.$t("Email"))+":",1)]),e("dd",td,[e("p",sd,l(t.lead.contact.email),1)]),e("dt",od,[e("strong",null,l(o.$t("Phone"))+":",1)]),e("dd",ad,[e("p",nd,l(t.lead.contact.phone),1)]),e("dt",ld,[e("strong",null,l(o.$t("Company"))+":",1)]),e("dd",id,[e("p",dd,l(t.lead.contact.company_name),1)]),e("dt",rd,[e("strong",null,l(o.$t("VAT"))+":",1)]),e("dd",cd,[e("p",ud,l(t.lead.contact.vat),1)]),e("dt",pd,[e("strong",null,l(o.$t("Contact"))+":",1)]),e("dd",hd,[e("p",md,l(t.lead.contact.company_email),1)]),e("dt",gd,[e("strong",null,l(o.$t("Website"))+":",1)]),e("dd",fd,[e("p",_d,l(t.lead.contact.url),1)]),e("dt",vd,[e("strong",null,l(o.$t("Address"))+":",1)]),e("dd",bd,[e("p",yd,l(t.lead.contact.address),1)]),e("dt",wd,[e("strong",null,l(o.$t("ZIP"))+":",1)]),e("dd",xd,[e("p",$d,l(t.lead.contact.postal),1)]),e("dt",kd,[e("strong",null,l(o.$t("City"))+":",1)]),e("dd",Cd,[e("p",Sd,l(t.lead.contact.city),1)]),e("dt",Fd,[e("strong",null,l(o.$t("Country"))+":",1)]),e("dd",Nd,[e("p",Ld,l(t.lead.contact.country),1)]),t.lead.contact.external_profile_url?(d(),h("dt",Bd,[e("strong",null,l(o.$t("Profile"))+" URL:",1)])):T("",!0),t.lead.contact.external_profile_url?(d(),h("dd",Td,[e("p",Ad,[e("a",{href:t.lead.contact.external_profile_url,target:"_blank"},l(t.lead.contact.external_profile_url),9,jd)])])):T("",!0)]),e("div",Md,[e("span",Dd,[Id,k(" "+l(o.$t("Stages")),1)]),b(ki,{"model-id":t.lead.id,options:a(p).stages,"selected-option":t.lead.pipeline_stage_id,"transform-options":""},null,8,["model-id","options","selected-option"])]),Vd,e("div",Od,[e("span",Ud,[Ed,k(l(o.$t("Contact Tags")),1)]),(d(),R(te,{name:"tags[]",label:"Add tag to contact",placeholder:"Choose tags...","label-by":"name","track-by":"name","sync-tags-url":a(p).route.contacts.syncTags.replace(":contactId",t.lead.contact.id),"model-id":t.lead.contact.id,selected:t.lead.contact.tags??[],options:t.tags??[],key:t.lead.contact.id},null,8,["sync-tags-url","model-id","selected","options"]))]),e("div",zd,[e("span",Rd,[Wd,k(l(o.$t("Lists")),1)]),(d(),R(te,{name:"tags[]",label:"Add to Lists",placeholder:"Choose list...","label-by":"name","track-by":"name","sync-tags-url":a(p).route.contacts.syncLists.replace(":contactId",t.lead.contact.id),"model-id":t.lead.contact.id,selected:t.lead.contact.lists??[],options:t.lists??[],key:t.lead.contact.id},null,8,["sync-tags-url","model-id","selected","options"]))]),e("div",Pd,[e("span",qd,[Hd,k(l(o.$t("Lead Tags")),1)]),(d(),R(te,{name:"tags[]",label:"Add tag to lead",placeholder:"Choose tags...","label-by":"name","track-by":"name","sync-tags-url":a(p).route.leads.syncTags.replace(":contactId",t.lead.contact.id),"model-id":t.lead.id,selected:t.lead.tags??[],options:t.tags??[],key:t.lead.id},null,8,["sync-tags-url","model-id","selected","options"]))]),Gd])]),e("div",Qd,[e("div",Zd,[(d(),R(Be,{"lead-id":t.lead.id,"fetch-url":a(p).route.notes.fetch.replace(":leadId",t.lead.id),url:a(p).route.notes.store.replace(":leadId",t.lead.id),"delete-url":a(p).route.notes.delete.replace(":leadId",t.lead.id),key:t.lead.id},null,8,["lead-id","fetch-url","url","delete-url"]))])]),e("div",Jd,[e("div",Xd,[(d(),R(Te,{"lead-id":t.lead.id,"fetch-url":a(p).route.activities.fetch.replace(":leadId",t.lead.id),url:a(p).route.activities.store.replace(":leadId",t.lead.id),"delete-url":a(p).route.activities.delete.replace(":leadId",t.lead.id),key:t.lead.id},null,8,["lead-id","fetch-url","url","delete-url"]))])]),e("div",Kd,[e("div",Yd,[b(bi,{"lead-id":t.lead.id},null,8,["lead-id"])])])])],512)):T("",!0)}},tr=se(er,[["__scopeId","data-v-35c01996"]]),sr={width:"26",height:"26",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",style:{"pointer-events":"none"}},or=e("path",{"fill-rule":"evenodd",d:"M2.25 12c0-5.385 4.365-9.75 9.75-9.75s9.75 4.365 9.75 9.75-4.365 9.75-9.75 9.75S2.25 17.385 2.25 12zm8.706-1.442c1.146-.573 2.437.463 2.126 1.706l-.709 2.836.042-.02a.75.75 0 01.67 1.34l-.04.022c-1.147.573-2.438-.463-2.127-1.706l.71-2.836-.042.02a.75.75 0 11-.671-1.34l.041-.022zM12 9a.75.75 0 100-1.5.75.75 0 000 1.5z","clip-rule":"evenodd"},null,-1),ar=[or],nr={__name:"LeadDetails",props:{leadId:{type:Number,required:!0},campaignId:{type:Number,required:!0}},setup(t){const u=t,s=w(!1),n=w(null),r=w([]),f=w([]);async function p(){try{const g=await axios.get(`/sales/campaign/${u.campaignId}/lead/${u.leadId}`);n.value=g.data.lead,r.value=JSON.parse(g.data.tags),f.value=JSON.parse(g.data.lists)}catch(g){console.error(g)}}const o=async()=>{await p(),s.value=!0};return(g,y)=>(d(),h("div",null,[e("span",{onClick:o,class:"info-icon","aria-controls":"offcanvasRight"},[(d(),h("svg",sr,ar))]),s.value?(d(),R(tr,{key:0,modelValue:s.value,"onUpdate:modelValue":y[0]||(y[0]=_=>s.value=_),lead:n.value,tags:r.value,lists:f.value,routes:[]},null,8,["modelValue","lead","tags","lists"])):T("",!0)]))}},lr=["width","height"],ir=e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M17.982 18.725A7.488 7.488 0 0012 15.75a7.488 7.488 0 00-5.982 2.975m11.963 0a9 9 0 10-11.963 0m11.963 0A8.966 8.966 0 0112 21a8.966 8.966 0 01-5.982-2.275M15 9.75a3 3 0 11-6 0 3 3 0 016 0z"},null,-1),dr=[ir],rr={__name:"User",props:{width:{type:Number,default:20},height:{type:Number,default:20}},setup(t){return(u,s)=>(d(),h("svg",{width:t.width,height:t.height,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},dr,8,lr))}},cr=["width","height"],ur=e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M21.75 6.75v10.5a2.25 2.25 0 01-2.25 2.25h-15a2.25 2.25 0 01-2.25-2.25V6.75m19.5 0A2.25 2.25 0 0019.5 4.5h-15a2.25 2.25 0 00-2.25 2.25m19.5 0v.243a2.25 2.25 0 01-1.07 1.916l-7.5 4.615a2.25 2.25 0 01-2.36 0L3.32 8.91a2.25 2.25 0 01-1.07-1.916V6.75"},null,-1),pr=[ur],hr={__name:"Mail",props:{width:{type:Number,default:18},height:{type:Number,default:18}},setup(t){return(u,s)=>(d(),h("svg",{width:t.width,height:t.height,fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},pr,8,cr))}},mr=["width","height"],gr=e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M2.25 6.75c0 8.284 6.716 15 15 15h2.25a2.25 2.25 0 002.25-2.25v-1.372c0-.516-.351-.966-.852-1.091l-4.423-1.106c-.44-.11-.902.055-1.173.417l-.97 1.293c-.282.376-.769.542-1.21.38a12.035 12.035 0 01-7.143-7.143c-.162-.441.004-.928.38-1.21l1.293-.97c.363-.271.527-.734.417-1.173L6.963 3.102a1.125 1.125 0 00-1.091-.852H4.5A2.25 2.25 0 002.25 4.5v2.25z"},null,-1),fr=[gr],ce={__name:"Phone",props:{width:{type:Number,default:18},height:{type:Number,default:18}},setup(t){return(u,s)=>(d(),h("svg",{width:t.width,height:t.height,fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},fr,8,mr))}},_r=["width","height"],vr=e("path",{"fill-rule":"evenodd",d:"M5.25 2.25a3 3 0 00-3 3v4.318a3 3 0 00.879 2.121l9.58 9.581c.92.92 2.39 1.186 3.548.428a18.849 18.849 0 005.441-5.44c.758-1.16.492-2.629-.428-3.548l-9.58-9.581a3 3 0 00-2.122-.879H5.25zM6.375 7.5a1.125 1.125 0 100-2.25 1.125 1.125 0 000 2.25z","clip-rule":"evenodd"},null,-1),br=[vr],ue={__name:"Tag",props:{width:{type:Number,default:18},height:{type:Number,default:18}},setup(t){return(u,s)=>(d(),h("svg",{width:t.width,height:t.height,viewBox:"0 0 24 24",fill:"currentColor"},br,8,_r))}},yr=["data-lead-id"],wr={class:"drag-handle",style:{display:"inline-block",width:"20px",cursor:"grab","margin-bottom":"5px"}},xr={xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"feather feather-move align-middle",style:{"pointer-events":"none"}},$r=M('<polyline points="5 9 2 12 5 15"></polyline><polyline points="9 5 12 2 15 5"></polyline><polyline points="15 19 12 22 9 19"></polyline><polyline points="19 9 22 12 19 15"></polyline><line x1="2" y1="12" x2="22" y2="12"></line><line x1="12" y1="2" x2="12" y2="22"></line>',6),kr=[$r],Cr={class:"d-flex align-items-center"},Sr={class:"ms-2 lead-name"},Fr=["href"],Nr={class:"d-flex align-items-center"},Lr={class:"ms-2 lead-email"},Br={class:"d-flex align-items-center"},Tr={class:"ms-2"},Ar={key:0,class:"d-flex align-items-center"},jr={class:"list-unstyled d-flex flex-wrap m-0",style:{gap:"2px 3px"}},Mr={key:1,class:"d-flex align-items-center"},Dr={class:"list-unstyled d-flex flex-wrap m-0 lead-tags mt-3",style:{gap:"2px 3px"}},Ir={key:2,class:"d-flex align-items-center"},Vr={class:"ms-2"},Or={__name:"LeadItem",props:{lead:{type:Object,required:!0},campaign:{type:Object,required:!0}},setup(t){const u=t,s=C(()=>{var o,g;const r=(g=(o=u.lead)==null?void 0:o.next_call_activity)==null?void 0:g.start_date;if(!r)return null;const f=new Date(r);return new Intl.DateTimeFormat("de-DE",{day:"numeric",month:"2-digit",year:"numeric",hour:"numeric",minute:"numeric"}).format(f)}),n=J("data");return(r,f)=>{var p,o,g,y,_,v;return d(),h("div",{class:"lead-item card mb-3 p-2 bg-light border gap-1","data-lead-id":t.lead.id},[e("span",wr,[(d(),h("svg",xr,kr))]),e("div",Cr,[b(rr,{class:"flex-shrink-0"}),e("span",Sr,[e("a",{target:"_blank",href:a(n).route.contacts.edit.replace(":contactId",t.lead.contact.id)},l((p=t.lead.contact)==null?void 0:p.firstname)+" "+l((o=t.lead.contact)==null?void 0:o.lastname),9,Fr)])]),e("div",Nr,[b(hr),e("span",Lr,l((g=t.lead.contact)==null?void 0:g.email),1)]),e("div",Br,[b(ce),e("span",Tr,l((y=t.lead.contact)==null?void 0:y.phone),1)]),((_=t.lead.contact)==null?void 0:_.tags.length)>0?(d(),h("div",Ar,[b(ue,{class:"me-2 flex-shrink-0"}),e("ul",jr,[(d(!0),h(I,null,V(t.lead.contact.tags,i=>(d(),h("li",{key:i.id,class:"badge rounded-pill bg-info fw-light"},l(i.name),1))),128))])])):T("",!0),((v=t.lead)==null?void 0:v.tags.length)>0?(d(),h("div",Mr,[b(ue,{class:"me-2 flex-shrink-0"}),e("ul",Dr,[(d(!0),h(I,null,V(t.lead.tags,i=>(d(),h("li",{key:i.id,class:"badge rounded-pill bg-success fw-light"},l(i.name),1))),128))])])):T("",!0),t.lead.next_call_activity?(d(),h("div",Ir,[b(ce),e("span",Vr,l(s.value),1)])):T("",!0),(d(),R(nr,{"lead-id":t.lead.id,"campaign-id":t.campaign.id,key:t.lead.contact.id},null,8,["lead-id","campaign-id"]))],8,yr)}}},Ur={class:"campaign-card"},Er={class:"card-header"},zr={key:0,class:"card-actions float-end"},Rr={class:"dropdown position-relative"},Wr=M('<a href="#" data-bs-toggle="dropdown" data-bs-display="static"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-more-horizontal align-middle"><circle cx="12" cy="12" r="1"></circle><circle cx="19" cy="12" r="1"></circle><circle cx="5" cy="12" r="1"></circle></svg></a>',1),Pr={class:"dropdown-menu dropdown-menu-end"},qr=["href"],Hr={class:"card-title"},Gr={key:1,class:"card-subtitle text-muted mb-2"},Qr={class:"input-group-text"},Zr=["placeholder","disabled"],Jr={key:2,class:"mt-2 alert alert-info py-1 px-2 mb-0",style:{"font-size":"0.85rem"}},Xr=e("i",{class:"fas fa-filter me-1"},null,-1),Kr=["id","data-stage-id"],Yr=e("div",{class:"card mb-3 px-2 py-4 cursor-grab border-dashed align-items-center"},[e("span",{style:{"font-size":"10px"}},[e("i",null,"Drag / drop area")])],-1),pe={__name:"LeadList",props:{campaign:{type:Object,required:!0},leadsCount:{type:[Number,Object],required:!0},leads:{type:[Array,Object],required:!1,default:[]},stage:{type:Object,required:!1,default:{}}},setup(t){const u=t,{t:s}=ne(),{cardStyle:n,stageTitle:r,stageIdAttributes:f,getLeads:p,loadMoreLeads:o,handleSearch:g}=Jl(u,s),{route:{list:y},isGlobalSearching:_,globalSearchQuery:v}=J("data"),i=w(null);He(i,()=>{o()},{distance:20,direction:"bottom",canLoadMore:()=>Object.keys(u.stage).length===0?p.value.length<u.leadsCount:p.value.length<u.leadsCount[u.stage.id]});const m=w(null),c=x=>{if(_.value&&v.value){x.target.value="";return}g(x)};return(x,F)=>(d(),h("div",Ur,[e("div",{class:"card",style:N(a(n))},[e("div",Er,[Object.keys(u.stage).length!==0?(d(),h("div",zr,[e("div",Rr,[Wr,e("div",Pr,[e("a",{href:a(y).newList.replace(":stageId",t.stage.id),class:"dropdown-item"},l(x.$t("Create New List")),9,qr)])])])):T("",!0),e("h5",Hr,l(a(r)),1),t.stage.description?(d(),h("h6",Gr,l(t.stage.description),1)):T("",!0),e("div",{class:q(["input-group",{"opacity-50":a(_)&&a(v)}])},[e("span",Qr,[b(Ae)]),e("input",{ref_key:"localSearchInput",ref:m,class:"form-control lead-search",type:"search",name:"lead-search",placeholder:a(_)&&a(v)?"Global search active...":"Search in this stage...",disabled:a(_)&&a(v),onInput:c},null,40,Zr)],2),a(_)&&a(v)&&a(p).length>0?(d(),h("div",Jr,[Xr,k(" Showing "+l(a(p).length)+" result(s) from global search ",1)])):T("",!0)]),e("div",{class:"card-body scroll",ref_key:"scrollContainer",ref:i},[e("div",{id:a(f).id,"data-stage-id":a(f).dataStageId},[(d(!0),h(I,null,V(a(p),j=>(d(),R(Or,{key:j.id,lead:j,campaign:t.campaign},null,8,["lead","campaign"]))),128)),Yr],8,Kr)],512)],4)]))}},je=t=>(fe("data-v-3a9ca901"),t=t(),_e(),t),ec={class:"mb-4"},tc={class:"global-search-container"},sc={class:"search-wrapper"},oc={class:"search-icon-wrapper"},ac=["placeholder"],nc=["title"],lc=je(()=>e("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"currentColor"},[e("path",{d:"M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z"}),e("path",{d:"M4.646 4.646a.5.5 0 0 1 .708 0L8 7.293l2.646-2.647a.5.5 0 0 1 .708.708L8.707 8l2.647 2.646a.5.5 0 0 1-.708.708L8 8.707l-2.646 2.647a.5.5 0 0 1-.708-.708L7.293 8 4.646 5.354a.5.5 0 0 1 0-.708z"})],-1)),ic=[lc],dc={key:0,class:"search-status-badge"},rc=je(()=>e("div",{class:"status-indicator"},null,-1)),cc={class:"status-text"},uc={key:0,class:"results-count"},pc=["data-pipeline-id"],hc={__name:"LeadCampaign",props:{campaign:{type:Object,required:!0},initialLeadsCount:{type:Number,required:!0},initialLeads:{type:Array,required:!0},leadsCount:{type:Object,required:!0},stages:{type:Array,required:!0},leads:{type:Object,required:!0},routes:{type:Object,required:!1},emails:{type:Object,required:!1},initialSearch:{type:String,required:!1,default:""}},setup(t){const{t:u}=ne(),s=t,n=w(""),r=w({}),f=w(!1),p=w(null),o=C(()=>Object.values(r.value).reduce((v,i)=>v+(Array.isArray(i)?i.length:0),0)),g=Ge({route:s.routes,emails:s.emails,stages:s.stages,globalSearchQuery:n,globalSearchResults:r,isGlobalSearching:f});Qe("data",g);const y=async v=>{const i=v.target.value.trim();if(n.value=i,i.length===0){r.value={},f.value=!1;return}f.value=!0;try{const{data:{searchResults:m}}=await Y.get(`/sales/campaign/${s.campaign.id}/pipeline/${s.campaign.pipeline.id}/search-all`,{params:{query:i}});r.value=m}catch(m){console.error("Error fetching global search results:",m),r.value={}}},_=()=>{n.value="",r.value={},f.value=!1,p.value&&(p.value.value="")};return G(()=>{s.initialSearch&&s.initialSearch.trim().length>0&&(p.value&&(p.value.value=s.initialSearch),y({target:{value:s.initialSearch}}))}),(v,i)=>(d(),R(U,{appear:""},{default:$(()=>[e("div",null,[e("div",ec,[e("div",tc,[e("div",sc,[e("div",oc,[b(Ae,{width:20,height:20})]),e("input",{ref_key:"searchInputRef",ref:p,class:"global-search-input",type:"search",name:"global-search",placeholder:a(u)("Search by name, email, company..."),onInput:y,autocomplete:"off"},null,40,ac),n.value?(d(),h("button",{key:0,onClick:_,class:"clear-search-btn",title:a(u)("Clear search")},ic,8,nc)):T("",!0),b(U,{name:"fade"},{default:$(()=>[f.value&&n.value?(d(),h("div",dc,[rc,e("span",cc,[k(l(a(u)("Searching across all stages"))+" ",1),o.value>0?(d(),h("span",uc," · "+l(o.value)+" "+l(a(u)("results found")),1)):T("",!0)])])):T("",!0)]),_:1})])])]),e("div",{class:"row",style:{"flex-wrap":"unset"},id:"pipeline","data-pipeline-id":t.campaign.pipeline_id},[(d(),R(pe,{campaign:t.campaign,"leads-count":t.initialLeadsCount,leads:t.initialLeads,key:0},null,8,["campaign","leads-count","leads"])),(d(!0),h(I,null,V(t.stages,m=>(d(),R(pe,{key:m.id,"leads-count":t.leadsCount,campaign:t.campaign,stage:m,leads:t.leads},null,8,["leads-count","campaign","stage","leads"]))),128))],8,pc)])]),_:1}))}},mc=se(hc,[["__scopeId","data-v-3a9ca901"]]);document.addEventListener("DOMContentLoaded",()=>{if(document.getElementsByClassName("js-simplebar")[0]){new Ze(document.getElementsByClassName("js-simplebar")[0]);const u=document.getElementsByClassName("sidebar")[0];document.getElementsByClassName("sidebar-toggle")[0].addEventListener("click",()=>{u.classList.toggle("collapsed"),u.addEventListener("transitionend",()=>{window.dispatchEvent(new Event("resize"))})})}});document.addEventListener("DOMContentLoaded",()=>{ve.replace()});window.feather=ve;window.notyf=new Je({duration:5e3,position:{x:"right",y:"top"},types:[{type:"default",backgroundColor:"#3B7DDD",icon:{className:"notyf__icon--success",tagName:"i"}},{type:"info-bsha",backgroundColor:"#495e69",icon:{className:"notyf__icon--success",tagName:"i"}},{type:"success",backgroundColor:"#28a745",icon:{className:"notyf__icon--success",tagName:"i"}},{type:"warning",backgroundColor:"#ffc107",icon:{className:"notyf__icon--error",tagName:"i"}},{type:"danger",backgroundColor:"#dc3545",icon:{className:"notyf__icon--error",tagName:"i"}}]});window.dragula=Xe;window.jQuery=window.$=Ke;const gc={de:Ut},Me=Ye({locale:"de",fallbackLocale:"en",messages:gc});Me.global.locale=document.documentElement.lang.substring(0,2);const fc=st(),oe=et({components:{WorkFlow:an,ShowWorkFlow:pn,PipelineStageRepeater:Dn,TextArea:Wn,MultiSelectList:te,Notes:Be,Activities:Te,OpenClicksChart:Zl,LeadCampaign:mc}});oe.config.globalProperties.emitter=fc;oe.config.compilerOptions.whitespace="preserve";oe.use(Me);document.querySelector("#app")!==null&&oe.mount("#app");window.DataTable=tt;
